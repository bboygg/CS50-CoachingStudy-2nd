require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/entries/lecture/show.entry.js":[function(a,b,c){a("../../modules/plugin/jquery.plugin.report.js"),a("../../modules/plugin/jquery.plugin.vote.js");var d=a("../../modules/tinymce.plugins/tinymce.plugin.attacher.js"),e=a("../../modules/lecture/show/lecture.show.js");b.exports={initialize:function(a){var b=a.data;d.loadPlugins(["link","katex","quickImageUploader","quickFileUploader"]),a.isSequence?$.ajax({url:"/"+b.courseName+"/lecture/"+b.lectureId+"/confirmQuiz",dataType:"json",contentType:"application/json"}).done($.proxy(function(b){this._initLectureShow(a,b.data)},this)):this._initLectureShow(a),$(window).bind("scroll",function(){var a=$(document).height()-$(window).height()-$(window).scrollTop();a<88&&$(".new_boost_btm").css({bottom:88-a+"px"}),a>88&&$(".new_boost_btm").css({bottom:"0px"})})},_initLectureShow:function(a,b){var c=a.data;new e({isUsingHiddenComment:c.isUsingHiddenComment,courseName:c.courseName,lectureId:c.lectureId,quizList:b,isSequence:a.isSequence,isAlwaysOpen:a.isAlwaysOpen,hasConstraintOnLectureCompletion:a.hasConstraintOnLectureCompletion,nextAccess:a.nextAccess,nextId:c.nextId,nextUrl:c.nextUrl,bbsId:c.bbsId,completeLecture:a.completeLecture}),$(document).vote_plugin(),$(document).report_plugin()}}},{"../../modules/lecture/show/lecture.show.js":28,"../../modules/plugin/jquery.plugin.report.js":56,"../../modules/plugin/jquery.plugin.vote.js":57,"../../modules/tinymce.plugins/tinymce.plugin.attacher.js":72}],1:[function(a,b,c){(function(c){(function(d){function e(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function f(a,b){return Ca.call(a,b)}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(a){!1===wa.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn}function i(a,b){var c=!0;return p(function(){return c&&(h(a),c=!1),b.apply(this,arguments)},b)}function j(a,b){tb[a]||(h(b),tb[a]=!0)}function k(a,b){return function(c){return s(a.call(this,c),b)}}function l(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function m(){}function n(a,b){!1!==b&&I(a),q(this,a),this._d=new Date(+a._d)}function o(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=wa.localeData(),this._bubble()}function p(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function q(a,b){var c,d,e;if(void 0!==b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),void 0!==b._i&&(a._i=b._i),void 0!==b._f&&(a._f=b._f),void 0!==b._l&&(a._l=b._l),void 0!==b._strict&&(a._strict=b._strict),void 0!==b._tzm&&(a._tzm=b._tzm),void 0!==b._isUTC&&(a._isUTC=b._isUTC),void 0!==b._offset&&(a._offset=b._offset),void 0!==b._pf&&(a._pf=b._pf),void 0!==b._locale&&(a._locale=b._locale),La.length>0)for(c in La)d=La[c],void 0!==(e=b[d])&&(a[d]=e);return a}function r(a){return a<0?Math.ceil(a):Math.floor(a)}function s(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function t(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function u(a,b){var c;return b=N(b,a),a.isBefore(b)?c=t(a,b):(c=t(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function v(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(j(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=wa.duration(c,d),w(this,e,a),this}}function w(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d||d,e&&a._d.setTime(+a._d+e*c),f&&qa(a,"Date",pa(a,"Date")+f*c),g&&oa(a,pa(a,"Month")+g*c),d&&wa.updateOffset(a,f||g)}function x(a){return"[object Array]"===Object.prototype.toString.call(a)}function y(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function z(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&D(a[d])!==D(b[d]))&&g++;return g+f}function A(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=mb[a]||nb[b]||b}return a}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c))&&(d[b]=a[c]);return d}function C(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else{if(0!==a.indexOf("month"))return;b=12,c="month"}wa[a]=function(e,f){var g,h,i=wa._locale[a],j=[];if("number"==typeof e&&(f=e,e=d),h=function(a){var b=wa().utc().set(c,a);return i.call(wa._locale,b,e||"")},null!=f)return h(f);for(g=0;g<b;g++)j.push(h(g));return j}}function D(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function E(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function F(a,b,c){return ka(wa([a,11,31+b-c]),b,c).week}function G(a){return H(a)?366:365}function H(a){return a%4==0&&a%100!=0||a%400==0}function I(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Ea]<0||a._a[Ea]>11?Ea:a._a[Fa]<1||a._a[Fa]>E(a._a[Da],a._a[Ea])?Fa:a._a[Ga]<0||a._a[Ga]>24||24===a._a[Ga]&&(0!==a._a[Ha]||0!==a._a[Ia]||0!==a._a[Ja])?Ga:a._a[Ha]<0||a._a[Ha]>59?Ha:a._a[Ia]<0||a._a[Ia]>59?Ia:a._a[Ja]<0||a._a[Ja]>999?Ja:-1,a._pf._overflowDayOfYear&&(b<Da||b>Fa)&&(b=Fa),a._pf.overflow=b)}function J(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length&&a._pf.bigHour===d)),a._isValid}function K(a){return a?a.toLowerCase().replace("_","-"):a}function L(a){for(var b,c,d,e,f=0;f<a.length;){for(e=K(a[f]).split("-"),b=e.length,c=K(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=M(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&z(e,c,!0)>=b-1)break;b--}f++}return null}function M(b){var c=null;if(!Ka[b]&&Ma)try{c=wa.locale(),a("./locale/"+b),wa.locale(c)}catch(d){}return Ka[b]}function N(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(wa.isMoment(a)||y(a)?+a:+wa(a))-+c,c._d.setTime(+c._d+d),wa.updateOffset(c,!1),c):wa(a).local()}function O(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function P(a){var b,c,d=a.match(Qa);for(b=0,c=d.length;b<c;b++)sb[d[b]]?d[b]=sb[d[b]]:d[b]=O(d[b]);return function(e){var f="";for(b=0;b<c;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function Q(a,b){return a.isValid()?(b=R(b,a.localeData()),ob[b]||(ob[b]=P(b)),ob[b](a)):a.localeData().invalidDate()}function R(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ra.lastIndex=0;d>=0&&Ra.test(a);)a=a.replace(Ra,c),Ra.lastIndex=0,d-=1;return a}function S(a,b){var c=b._strict;switch(a){case"Q":return ab;case"DDDD":return cb;case"YYYY":case"GGGG":case"gggg":return c?db:Ua;case"Y":case"G":case"g":return fb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return c?eb:Va;case"S":if(c)return ab;case"SS":if(c)return bb;case"SSS":if(c)return cb;case"DDD":return Ta;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Xa;case"a":case"A":return b._locale._meridiemParse;case"x":return $a;case"X":return _a;case"Z":case"ZZ":return Ya;case"T":return Za;case"SSSS":return Wa;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return c?bb:Sa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Sa;case"Do":return c?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return new RegExp(_($(a.replace("\\","")),"i"))}}function T(a){a=a||"";var b=a.match(Ya)||[],c=b[b.length-1]||[],d=(c+"").match(kb)||["-",0,0],e=60*d[1]+D(d[2]);return"+"===d[0]?-e:e}function U(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ea]=3*(D(b)-1));break;case"M":case"MM":null!=b&&(e[Ea]=D(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Ea]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Fa]=D(b));break;case"Do":null!=b&&(e[Fa]=D(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=D(b));break;case"YY":e[Da]=wa.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Da]=D(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Ga]=D(b);break;case"m":case"mm":e[Ha]=D(b);break;case"s":case"ss":e[Ia]=D(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ja]=D(1e3*("0."+b));break;case"x":c._d=new Date(D(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=T(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=D(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=wa.parseTwoDigitYear(b)}}function V(a){var b,c,d,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(g=1,h=4,c=e(b.GG,a._a[Da],ka(wa(),1,4).year),d=e(b.W,1),f=e(b.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,c=e(b.gg,a._a[Da],ka(wa(),g,h).year),d=e(b.w,1),null!=b.d?(f=b.d)<g&&++d:f=null!=b.e?b.e+g:g),i=la(c,d,f,h,g),a._a[Da]=i.year,a._dayOfYear=i.dayOfYear}function W(a){var b,c,d,f,g=[];if(!a._d){for(d=Y(a),a._w&&null==a._a[Fa]&&null==a._a[Ea]&&V(a),a._dayOfYear&&(f=e(a._a[Da],d[Da]),a._dayOfYear>G(f)&&(a._pf._overflowDayOfYear=!0),c=ga(f,0,a._dayOfYear),a._a[Ea]=c.getUTCMonth(),a._a[Fa]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=g[b]=d[b];for(;b<7;b++)a._a[b]=g[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ga]&&0===a._a[Ha]&&0===a._a[Ia]&&0===a._a[Ja]&&(a._nextDay=!0,a._a[Ga]=0),a._d=(a._useUTC?ga:fa).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm),a._nextDay&&(a._a[Ga]=24)}}function X(a){var b;a._d||(b=B(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],W(a))}function Y(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Z(a){if(a._f===wa.ISO_8601)return void ba(a);a._a=[],a._pf.empty=!0;var b,c,e,f,g,h=""+a._i,i=h.length,j=0;for(e=R(a._f,a._locale).match(Qa)||[],b=0;b<e.length;b++)f=e[b],c=(h.match(S(f,a))||[])[0],c&&(g=h.substr(0,h.indexOf(c)),g.length>0&&a._pf.unusedInput.push(g),h=h.slice(h.indexOf(c)+c.length),j+=c.length),sb[f]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(f),U(f,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(f);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),!0===a._pf.bigHour&&a._a[Ga]<=12&&(a._pf.bigHour=d),a._isPm&&a._a[Ga]<12&&(a._a[Ga]+=12),!1===a._isPm&&12===a._a[Ga]&&(a._a[Ga]=0),W(a),I(a)}function $(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aa(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=g(),b._f=a._f[e],Z(b),J(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||f<d)&&(d=f,c=b));p(a,c||b)}function ba(a){var b,c,d=a._i,e=gb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=ib.length;b<c;b++)if(ib[b][1].exec(d)){a._f=ib[b][0]+(e[6]||" ");break}for(b=0,c=jb.length;b<c;b++)if(jb[b][1].exec(d)){a._f+=jb[b][0];break}d.match(Ya)&&(a._f+="Z"),Z(a)}else a._isValid=!1}function ca(a){ba(a),!1===a._isValid&&(delete a._isValid,wa.createFromInputFallback(a))}function da(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ea(a){var b,c=a._i;c===d?a._d=new Date:y(c)?a._d=new Date(+c):null!==(b=Na.exec(c))?a._d=new Date(+b[1]):"string"==typeof c?ca(a):x(c)?(a._a=da(c.slice(0),function(a){return parseInt(a,10)}),W(a)):"object"==typeof c?X(a):"number"==typeof c?a._d=new Date(c):wa.createFromInputFallback(a)}function fa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<1970&&h.setFullYear(a),h}function ga(a){var b=new Date(Date.UTC.apply(null,arguments));return a<1970&&b.setUTCFullYear(a),b}function ha(a,b){if("string"==typeof a)if(isNaN(a)){if("number"!=typeof(a=b.weekdaysParse(a)))return null}else a=parseInt(a,10);return a}function ia(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ja(a,b,c){var d=wa.duration(a).abs(),e=Ba(d.as("s")),f=Ba(d.as("m")),g=Ba(d.as("h")),h=Ba(d.as("d")),i=Ba(d.as("M")),j=Ba(d.as("y")),k=e<pb.s&&["s",e]||1===f&&["m"]||f<pb.m&&["mm",f]||1===g&&["h"]||g<pb.h&&["hh",g]||1===h&&["d"]||h<pb.d&&["dd",h]||1===i&&["M"]||i<pb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,ia.apply({},k)}function ka(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),f<e-7&&(f+=7),d=wa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function la(a,b,c,d,e){var f,g,h=ga(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(h<e?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:G(a-1)+g}}function ma(a){var b,c=a._i,e=a._f;return a._locale=a._locale||wa.localeData(a._l),null===c||e===d&&""===c?wa.invalid({nullInput:!0}):("string"==typeof c&&(a._i=c=a._locale.preparse(c)),wa.isMoment(c)?new n(c,!0):(e?x(e)?aa(a):Z(a):ea(a),b=new n(a),b._nextDay&&(b.add(1,"d"),b._nextDay=d),b))}function na(a,b){var c,d;if(1===b.length&&x(b[0])&&(b=b[0]),!b.length)return wa();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function oa(a,b){var c;return"string"==typeof b&&"number"!=typeof(b=a.localeData().monthsParse(b))?a:(c=Math.min(a.date(),E(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function pa(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function qa(a,b,c){return"Month"===b?oa(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ra(a,b){return function(c){return null!=c?(qa(this,a,c),wa.updateOffset(this,b),this):pa(this,a)}}function sa(a){return 400*a/146097}function ta(a){return 146097*a/400}function ua(a){wa.duration.fn[a]=function(){return this._data[a]}}function va(a){"undefined"==typeof ender&&(xa=Aa.moment,Aa.moment=a?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wa):wa)}for(var wa,xa,ya,za="2.8.4",Aa=void 0!==c?c:this,Ba=Math.round,Ca=Object.prototype.hasOwnProperty,Da=0,Ea=1,Fa=2,Ga=3,Ha=4,Ia=5,Ja=6,Ka={},La=[],Ma=void 0!==b&&b&&b.exports,Na=/^\/?Date\((\-?\d+)/i,Oa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Pa=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Qa=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ra=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Sa=/\d\d?/,Ta=/\d{1,3}/,Ua=/\d{1,4}/,Va=/[+\-]?\d{1,6}/,Wa=/\d+/,Xa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ya=/Z|[\+\-]\d\d:?\d\d/gi,Za=/T/i,$a=/[\+\-]?\d+/,_a=/[\+\-]?\d+(\.\d{1,3})?/,ab=/\d/,bb=/\d\d/,cb=/\d{3}/,db=/\d{4}/,eb=/[+-]?\d{6}/,fb=/[+-]?\d+/,gb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hb="YYYY-MM-DDTHH:mm:ssZ",ib=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],jb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],kb=/([\+\-]|\d\d)/gi,lb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),mb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},nb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ob={},pb={s:45,m:45,h:22,d:26,M:11},qb="DDD w W M D d".split(" "),rb="M D H h m s w W".split(" "),sb={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return s(this.year()%100,2)},YYYY:function(){return s(this.year(),4)},YYYYY:function(){return s(this.year(),5)},YYYYYY:function(){var a=this.year();return(a>=0?"+":"-")+s(Math.abs(a),6)},gg:function(){return s(this.weekYear()%100,2)},gggg:function(){return s(this.weekYear(),4)},ggggg:function(){return s(this.weekYear(),5)},GG:function(){return s(this.isoWeekYear()%100,2)},GGGG:function(){return s(this.isoWeekYear(),4)},GGGGG:function(){return s(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return D(this.milliseconds()/100)},SS:function(){return s(D(this.milliseconds()/10),2)},SSS:function(){return s(this.milliseconds(),3)},SSSS:function(){return s(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+s(D(a/60),2)+":"+s(D(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return a<0&&(a=-a,b="-"),b+s(D(a/60),2)+s(D(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},tb={},ub=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];qb.length;)ya=qb.pop(),sb[ya+"o"]=l(sb[ya],ya);for(;rb.length;)ya=rb.pop(),sb[ya+ya]=k(sb[ya],2);sb.DDDD=k(sb.DDD,3),p(m.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=wa.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;b<7;b++)if(this._weekdaysParse[b]||(c=wa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ka(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wa=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._i=a,f._f=b,f._l=c,f._strict=e,f._isUTC=!1,f._pf=g(),ma(f)},wa.suppressDeprecationWarnings=!1,wa.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),wa.min=function(){return na("isBefore",[].slice.call(arguments,0))},wa.max=function(){return na("isAfter",[].slice.call(arguments,0))},wa.utc=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=c,f._i=a,f._f=b,f._strict=e,f._pf=g(),ma(f).utc()},wa.unix=function(a){return wa(1e3*a)},wa.duration=function(a,b){var c,d,e,g,h=a,i=null;return wa.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Oa.exec(a))?(c="-"===i[1]?-1:1,h={y:0,d:D(i[Fa])*c,h:D(i[Ga])*c,m:D(i[Ha])*c,s:D(i[Ia])*c,ms:D(i[Ja])*c}):(i=Pa.exec(a))?(c="-"===i[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},h={y:e(i[2]),M:e(i[3]),d:e(i[4]),h:e(i[5]),m:e(i[6]),s:e(i[7]),w:e(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=u(wa(h.from),wa(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),d=new o(h),wa.isDuration(a)&&f(a,"_locale")&&(d._locale=a._locale),d},wa.version=za,wa.defaultFormat=hb,wa.ISO_8601=function(){},wa.momentProperties=La,wa.updateOffset=function(){},wa.relativeTimeThreshold=function(a,b){return pb[a]!==d&&(b===d?pb[a]:(pb[a]=b,!0))},wa.lang=i("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return wa.locale(a,b)}),wa.locale=function(a,b){var c;return a&&(c=void 0!==b?wa.defineLocale(a,b):wa.localeData(a))&&(wa.duration._locale=wa._locale=c),wa._locale._abbr},wa.defineLocale=function(a,b){return null!==b?(b.abbr=a,Ka[a]||(Ka[a]=new m),Ka[a].set(b),wa.locale(a),Ka[a]):(delete Ka[a],null)},wa.langData=i("moment.langData is deprecated. Use moment.localeData instead.",function(a){return wa.localeData(a)}),wa.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return wa._locale;if(!x(a)){if(b=M(a))return b;a=[a]}return L(a)},wa.isMoment=function(a){return a instanceof n||null!=a&&f(a,"_isAMomentObject")},wa.isDuration=function(a){return a instanceof o};for(ya=ub.length-1;ya>=0;--ya)C(ub[ya]);wa.normalizeUnits=function(a){return A(a)},wa.invalid=function(a){var b=wa.utc(NaN);return null!=a?p(b._pf,a):b._pf.userInvalidated=!0,b},wa.parseZone=function(){return wa.apply(null,arguments).parseZone()},wa.parseTwoDigitYear=function(a){return D(a)+(D(a)>68?1900:2e3)},p(wa.fn=n.prototype,{clone:function(){return wa(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=wa(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Q(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Q(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return J(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&z(this._a,(this._isUTC?wa.utc(this._a):wa(this._a)).toArray())>0)},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=Q(this,a||wa.defaultFormat);return this.localeData().postformat(b)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=N(a,this),h=6e4*(this.zone()-g.zone());return b=A(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-wa(this).startOf("month")-(g-wa(g).startOf("month")),f-=6e4*(this.zone()-wa(this).startOf("month").zone()-(g.zone()-wa(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:r(e)},from:function(a,b){return wa.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(wa(),a)},calendar:function(a){var b=a||wa(),c=N(b,this).startOf("day"),d=this.diff(c,"days",!0),e=d<-6?"sameElse":d<-1?"lastWeek":d<0?"lastDay":d<1?"sameDay":d<2?"nextDay":d<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,wa(b)))},isLeapYear:function(){return H(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ha(a,this.localeData()),this.add(a-b,"d")):b},month:ra("Month",!0),startOf:function(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=A(a),a===d||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b=A(void 0!==b?b:"millisecond"),"millisecond"===b?(a=wa.isMoment(a)?a:wa(a),+this>+a):(wa.isMoment(a)?+a:+wa(a))<+this.clone().startOf(b)},isBefore:function(a,b){var c;return b=A(void 0!==b?b:"millisecond"),"millisecond"===b?(a=wa.isMoment(a)?a:wa(a),+this<+a):(c=wa.isMoment(a)?+a:+wa(a),+this.clone().endOf(b)<c)},isSame:function(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=wa.isMoment(a)?a:wa(a),+this==+a):(c=+wa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=wa.apply(null,arguments),a<this?this:a}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=wa.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=T(a)),Math.abs(a)<16&&(a*=60),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?w(this,wa.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wa.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?wa(a).zone():0,(this.zone()-a)%60==0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(a){var b=Ba((wa(this).startOf("day")-wa(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ka(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ka(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ka(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return F(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return F(this.year(),a.dow,a.doy)},get:function(a){return a=A(a),this[a]()},set:function(a,b){return a=A(a),"function"==typeof this[a]&&this[a](b),this},locale:function(a){var b;return a===d?this._locale._abbr:(b=wa.localeData(a),null!=b&&(this._locale=b),this)},lang:i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return a===d?this.localeData():this.locale(a)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),wa.fn.millisecond=wa.fn.milliseconds=ra("Milliseconds",!1),wa.fn.second=wa.fn.seconds=ra("Seconds",!1),wa.fn.minute=wa.fn.minutes=ra("Minutes",!1),wa.fn.hour=wa.fn.hours=ra("Hours",!0),wa.fn.date=ra("Date",!0),wa.fn.dates=i("dates accessor is deprecated. Use date instead.",ra("Date",!0)),wa.fn.year=ra("FullYear",!0),wa.fn.years=i("years accessor is deprecated. Use year instead.",ra("FullYear",!0)),wa.fn.days=wa.fn.day,wa.fn.months=wa.fn.month,wa.fn.weeks=wa.fn.week,wa.fn.isoWeeks=wa.fn.isoWeek,wa.fn.quarters=wa.fn.quarter,wa.fn.toJSON=wa.fn.toISOString,p(wa.duration.fn=o.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=r(d/1e3),
g.seconds=a%60,b=r(a/60),g.minutes=b%60,c=r(b/60),g.hours=c%24,e+=r(c/24),h=r(sa(e)),e-=r(ta(h)),f+=r(e/30),e%=30,h+=r(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12)},humanize:function(a){var b=ja(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=wa.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=wa.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=A(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if("month"===(a=A(a))||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*sa(b),"month"===a?c:c/12;switch(b=this._days+Math.round(ta(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:wa.fn.lang,locale:wa.fn.locale,toIsoString:i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),wa.duration.fn.toString=wa.duration.fn.toISOString;for(ya in lb)f(lb,ya)&&ua(ya.toLowerCase());wa.duration.fn.asMilliseconds=function(){return this.as("ms")},wa.duration.fn.asSeconds=function(){return this.as("s")},wa.duration.fn.asMinutes=function(){return this.as("m")},wa.duration.fn.asHours=function(){return this.as("h")},wa.duration.fn.asDays=function(){return this.as("d")},wa.duration.fn.asWeeks=function(){return this.as("weeks")},wa.duration.fn.asMonths=function(){return this.as("M")},wa.duration.fn.asYears=function(){return this.as("y")},wa.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===D(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),Ma?b.exports=wa:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&!0===c.config().noGlobal&&(Aa.moment=xa),wa}),va(!0)):va()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){(function(a){!function(c,d){"use strict";function e(a,b){for(var c,d=[],e=0;e<a.length;++e){if(!(c=i[a[e]]||g(a[e])))throw"module definition dependecy not found: "+a[e];d.push(c)}b.apply(null,d)}function f(a,b,c){if("string"!=typeof a)throw"invalid module definition, module id must be defined and be a string";if(b===d)throw"invalid module definition, dependencies must be specified";if(c===d)throw"invalid module definition, definition function must be specified";e(b,function(){i[a]=c.apply(null,arguments)})}function g(a){for(var b=c,d=a.split(/[.\/]/),e=0;e<d.length;++e){if(!b[d[e]])return;b=b[d[e]]}return b}function h(a){var b,e,f,g,h;for(b=0;b<a.length;b++){e=c,f=a[b],g=f.split(/[.\/]/);for(var j=0;j<g.length-1;++j)e[g[j]]===d&&(e[g[j]]={}),e=e[g[j]];e[g[g.length-1]]=i[f]}if(c.AMDLC_TESTS){h=c.privateModules||{};for(f in i)h[f]=i[f];for(b=0;b<a.length;b++)delete h[a[b]];c.privateModules=h}}var i={};f("tinymce/codesampleplugin/Prism",[],function(){var c={},d=void 0!==c?c:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},e=function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=d.Prism={util:{encode:function(a){return a instanceof c?new c(a.type,b.util.encode(a.content),a.alias):"Array"===b.util.type(a)?a.map(b.util.encode):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){switch(b.util.type(a)){case"Object":var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=b.util.clone(a[d]));return c;case"Array":return a.map&&a.map(function(a){return b.util.clone(a)})}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;var f=e[a];if(2==arguments.length){d=arguments[1];for(var g in d)d.hasOwnProperty(g)&&(f[g]=d[g]);return f}var h={};for(var i in f)if(f.hasOwnProperty(i)){if(i==c)for(var g in d)d.hasOwnProperty(g)&&(h[g]=d[g]);h[i]=f[i]}return b.languages.DFS(b.languages,function(b,c){c===e[a]&&b!=a&&(this[b]=h)}),e[a]=h},DFS:function(a,c,d){for(var e in a)a.hasOwnProperty(e)&&(c.call(a,e,a[e],d||e),"Object"===b.util.type(a[e])?b.languages.DFS(a[e],c):"Array"===b.util.type(a[e])&&b.languages.DFS(a[e],c,e))}},plugins:{},highlightAll:function(a,c){for(var d,e=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0;d=e[f++];)b.highlightElement(d,!0===a,c)},highlightElement:function(c,e,f){for(var g,h,i=c;i&&!a.test(i.className);)i=i.parentNode;i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),c.className=c.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=c.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);var j=c.textContent,k={element:c,language:g,grammar:h,code:j};if(!j||!h)return void b.hooks.run("complete",k);if(b.hooks.run("before-highlight",k),e&&d.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=a.data,b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k),b.hooks.run("complete",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(c),b.hooks.run("after-highlight",k),b.hooks.run("complete",k)},highlight:function(a,d,e){var f=b.tokenize(a,d);return c.stringify(b.util.encode(f),e)},tokenize:function(a,c,d){var e=b.Token,f=[a],g=c.rest;if(g){for(var h in g)c[h]=g[h];delete c.rest}a:for(var h in c)if(c.hasOwnProperty(h)&&c[h]){var i=c[h];i="Array"===b.util.type(i)?i:[i];for(var j=0;j<i.length;++j){var k=i[j],l=k.inside,m=!!k.lookbehind,n=0,o=k.alias;k=k.pattern||k;for(var p=0;p<f.length;p++){var q=f[p];if(f.length>a.length)break a;if(!(q instanceof e)){k.lastIndex=0;var r=k.exec(q);if(r){m&&(n=r[1].length);var s=r.index-1+n,r=r[0].slice(n),t=r.length,u=s+t,v=q.slice(0,s+1),w=q.slice(u+1),x=[p,1];v&&x.push(v);var y=new e(h,l?b.tokenize(r,l):r,o);x.push(y),w&&x.push(w),Array.prototype.splice.apply(f,x)}}}}}return f},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var e,f=0;e=d[f++];)e(c)}}},c=b.Token=function(a,b,c){this.type=a,this.content=b,this.alias=c};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("Array"===b.util.type(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};if("comment"==f.type&&(f.attributes.spellcheck="true"),a.alias){var g="Array"===b.util.type(a.alias)?a.alias:[a.alias];Array.prototype.push.apply(f.classes,g)}b.hooks.run("wrap",f);var h="";for(var i in f.attributes)h+=(h?" ":"")+i+'="'+(f.attributes[i]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+h+">"+f.content+"</"+f.tag+">"},!d.document)return d.addEventListener?(d.addEventListener("message",function(a){var c=JSON.parse(a.data),e=c.language,f=c.code,g=c.immediateClose;d.postMessage(b.highlight(f,b.languages[e],e)),g&&d.close()},!1),d.Prism):d.Prism}();return void 0!==b&&b.exports&&(b.exports=e),void 0!==a&&(a.Prism=e),e.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},e.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),e.languages.xml=e.languages.markup,e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},e.languages.css.atrule.inside.rest=e.util.clone(e.languages.css),e.languages.markup&&(e.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:e.languages.markup.tag.inside},rest:e.languages.css},alias:"language-css"}}),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:e.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:e.languages.css}},alias:"language-css"}},e.languages.markup.tag)),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),e.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),e.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}}}),e.languages.markup&&e.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:e.languages.markup.tag.inside},rest:e.languages.javascript},alias:"language-javascript"}}),e.languages.js=e.languages.javascript,e.languages.c=e.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),e.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete e.languages.c["class-name"],delete e.languages.c.boolean,e.languages.csharp=e.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),e.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),e.languages.cpp=e.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),e.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),e.languages.java=e.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),e.languages.php=e.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),e.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),e.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),e.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),e.languages.markup&&(e.hooks.add("before-highlight",function(a){"php"===a.language&&(a.tokenStack=[],a.backupCode=a.code,a.code=a.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(b){return a.tokenStack.push(b),"{{{PHP"+a.tokenStack.length+"}}}"}))}),e.hooks.add("before-insert",function(a){"php"===a.language&&(a.code=a.backupCode,delete a.backupCode)}),e.hooks.add("after-highlight",function(a){if("php"===a.language){for(var b,c=0;b=a.tokenStack[c];c++)a.highlightedCode=a.highlightedCode.replace("{{{PHP"+(c+1)+"}}}",e.highlight(b,a.grammar,"php").replace(/\$/g,"$$$$"));a.element.innerHTML=a.highlightedCode}}),e.hooks.add("wrap",function(a){"php"===a.language&&"markup"===a.type&&(a.content=a.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),e.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:e.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),e.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(a){a.languages.ruby=a.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var b={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:a.util.clone(a.languages.ruby)}};a.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:b}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:b}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:b}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:b}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:b}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),a.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),a.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:b}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:b}}]}(e),e}),f("tinymce/codesampleplugin/Utils",[],function(){function a(a){return a&&"PRE"==a.nodeName&&-1!==a.className.indexOf("language-")}function b(a){return function(b,c){return a(c)}}return{isCodeSample:a,trimArg:b}}),f("tinymce/codesampleplugin/Dialog",["tinymce/dom/DOMUtils","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Prism"],function(a,b,c){function d(a){var b=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],c=a.settings.codesample_languages;return c||b}function e(a,b,d){a.undoManager.transact(function(){var e=f(a);d=i.encode(d),e?(a.dom.setAttrib(e,"class","language-"+b),e.innerHTML=d,c.highlightElement(e),a.selection.select(e)):(a.insertContent('<pre id="__new" class="language-'+b+'">'+d+"</pre>"),a.selection.select(a.$("#__new").removeAttr("id")[0]))})}function f(a){var c=a.selection.getNode();return b.isCodeSample(c)?c:null}function g(a){var b=f(a);return b?b.textContent:""}function h(a){var b,c=f(a);return c?(b=c.className.match(/language-(\w+)/),b?b[1]:""):""}var i=a.DOM;return{open:function(a){a.windowManager.open({title:"Insert/Edit code sample",minWidth:Math.min(i.getViewPort().w,a.getParam("codesample_dialog_width",800)),minHeight:Math.min(i.getViewPort().h,a.getParam("codesample_dialog_height",650)),layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:h(a),values:d(a)},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:g(a),autofocus:!0}],onSubmit:function(b){e(a,b.data.language,b.data.code)}})}}}),f("tinymce/codesampleplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Utils"],function(a,b,c,d,e){var f,g=e.trimArg;b.add("codesample",function(b,h){function i(){var a,c=b.settings.codesample_content_css;b.inline&&f||!b.inline&&j||(b.inline?f=!0:j=!0,!1!==c&&(a=b.dom.create("link",{rel:"stylesheet",href:c||h+"/css/prism.css"}),b.getDoc().getElementsByTagName("head")[0].appendChild(a)))}var j,k=b.$;a.ceFalse&&(b.on("PreProcess",function(a){k("pre[contenteditable=false]",a.node).filter(g(e.isCodeSample)).each(function(a,b){var c=k(b),d=b.textContent;c.attr("class",k.trim(c.attr("class"))),c.removeAttr("contentEditable"),c.empty().append(k("<code></code>").each(function(){this.textContent=d}))})}),b.on("SetContent",function(){var a=k("pre").filter(g(e.isCodeSample)).filter(function(a,b){return"false"!==b.contentEditable});a.length&&b.undoManager.transact(function(){a.each(function(a,d){k(d).find("br").each(function(a,c){c.parentNode.replaceChild(b.getDoc().createTextNode("\n"),c)}),d.contentEditable=!1,d.innerHTML=b.dom.encode(d.textContent),c.highlightElement(d),d.className=k.trim(d.className)})})}),b.addCommand("codesample",function(){var a=b.selection.getNode();b.selection.isCollapsed()||e.isCodeSample(a)?d.open(b):b.formatter.toggle("code")}),b.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),b.on("init",i))})}),h(["tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Plugin"])}(window)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},d=function(){var a=/\blang(?:uage)?-(\w+)\b/i,b=0,d=c.Prism={manual:c.Prism&&c.Prism.manual,disableWorkerMessageHandler:c.Prism&&c.Prism.disableWorkerMessageHandler,util:{encode:function(a){return a instanceof e?new e(a.type,d.util.encode(a.content),a.alias):"Array"===d.util.type(a)?a.map(d.util.encode):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++b}),a.__id},clone:function(a){switch(d.util.type(a)){case"Object":var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=d.util.clone(a[c]));return b;case"Array":return a.map(function(a){return d.util.clone(a)})}return a}},languages:{extend:function(a,b){var c=d.util.clone(d.languages[a]);for(var e in b)c[e]=b[e];return c},insertBefore:function(a,b,c,e){e=e||d.languages;var f=e[a];if(2==arguments.length){c=arguments[1];for(var g in c)c.hasOwnProperty(g)&&(f[g]=c[g]);return f}var h={};for(var i in f)if(f.hasOwnProperty(i)){if(i==b)for(var g in c)c.hasOwnProperty(g)&&(h[g]=c[g]);h[i]=f[i]}return d.languages.DFS(d.languages,function(b,c){c===e[a]&&b!=a&&(this[b]=h)}),e[a]=h},DFS:function(a,b,c,e){e=e||{};for(var f in a)a.hasOwnProperty(f)&&(b.call(a,f,a[f],c||f),"Object"!==d.util.type(a[f])||e[d.util.objId(a[f])]?"Array"!==d.util.type(a[f])||e[d.util.objId(a[f])]||(e[d.util.objId(a[f])]=!0,d.languages.DFS(a[f],b,f,e)):(e[d.util.objId(a[f])]=!0,d.languages.DFS(a[f],b,null,e)))}},plugins:{},highlightAll:function(a,b){d.highlightAllUnder(document,a,b)},highlightAllUnder:function(a,b,c){var e={callback:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",e);for(var f,g=e.elements||a.querySelectorAll(e.selector),h=0;f=g[h++];)d.highlightElement(f,!0===b,e.callback)},highlightElement:function(b,e,f){for(var g,h,i=b;i&&!a.test(i.className);)i=i.parentNode;i&&(g=(i.className.match(a)||[,""])[1].toLowerCase(),h=d.languages[g]),b.className=b.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,b.parentNode&&(i=b.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g));var j=b.textContent,k={element:b,language:g,grammar:h,code:j};if(d.hooks.run("before-sanity-check",k),!k.code||!k.grammar)return k.code&&(d.hooks.run("before-highlight",k),k.element.textContent=k.code,d.hooks.run("after-highlight",k)),void d.hooks.run("complete",k);if(d.hooks.run("before-highlight",k),e&&c.Worker){var l=new Worker(d.filename);l.onmessage=function(a){k.highlightedCode=a.data,d.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),d.hooks.run("after-highlight",k),d.hooks.run("complete",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else k.highlightedCode=d.highlight(k.code,k.grammar,k.language),d.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(b),d.hooks.run("after-highlight",k),d.hooks.run("complete",k)},highlight:function(a,b,c){var f=d.tokenize(a,b);return e.stringify(d.util.encode(f),c)},matchGrammar:function(a,b,c,e,f,g,h){var i=d.Token;for(var j in c)if(c.hasOwnProperty(j)&&c[j]){if(j==h)return;var k=c[j];k="Array"===d.util.type(k)?k:[k];for(var l=0;l<k.length;++l){var m=k[l],n=m.inside,o=!!m.lookbehind,p=!!m.greedy,q=0,r=m.alias;if(p&&!m.pattern.global){var s=m.pattern.toString().match(/[imuy]*$/)[0];m.pattern=RegExp(m.pattern.source,s+"g")}m=m.pattern||m;for(var t=e,u=f;t<b.length;u+=b[t].length,++t){var v=b[t];if(b.length>a.length)return;if(!(v instanceof i)){m.lastIndex=0;var w=m.exec(v),x=1;if(!w&&p&&t!=b.length-1){if(m.lastIndex=u,!(w=m.exec(a)))break;for(var y=w.index+(o?w[1].length:0),z=w.index+w[0].length,A=t,B=u,C=b.length;A<C&&(B<z||!b[A].type&&!b[A-1].greedy);++A)B+=b[A].length,y>=B&&(++t,u=B);if(b[t]instanceof i||b[A-1].greedy)continue;x=A-t,v=a.slice(u,B),w.index-=u}if(w){o&&(q=w[1].length);var y=w.index+q,w=w[0].slice(q),z=y+w.length,D=v.slice(0,y),E=v.slice(z),F=[t,x];D&&(++t,u+=D.length,F.push(D));var G=new i(j,n?d.tokenize(w,n):w,r,w,p);if(F.push(G),E&&F.push(E),Array.prototype.splice.apply(b,F),1!=x&&d.matchGrammar(a,b,c,t,u,!0,j),g)break}else if(g)break}}}}},tokenize:function(a,b,c){var e=[a],f=b.rest;if(f){for(var g in f)b[g]=f[g];delete b.rest}return d.matchGrammar(a,e,b,0,0,!1),e},hooks:{all:{},add:function(a,b){var c=d.hooks.all;c[a]=c[a]||[],c[a].push(b)},run:function(a,b){var c=d.hooks.all[a];if(c&&c.length)for(var e,f=0;e=c[f++];)e(b)}}},e=d.Token=function(a,b,c,d,e){this.type=a,this.content=b,this.alias=c,this.length=0|(d||"").length,this.greedy=!!e};if(e.stringify=function(a,b,c){if("string"==typeof a)return a;if("Array"===d.util.type(a))return a.map(function(c){return e.stringify(c,b,a)}).join("");var f={type:a.type,content:e.stringify(a.content,b,c),tag:"span",classes:["token",a.type],attributes:{},language:b,parent:c};if(a.alias){var g="Array"===d.util.type(a.alias)?a.alias:[a.alias];Array.prototype.push.apply(f.classes,g)}d.hooks.run("wrap",f);var h=Object.keys(f.attributes).map(function(a){return a+'="'+(f.attributes[a]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+f.tag+' class="'+f.classes.join(" ")+'"'+(h?" "+h:"")+">"+f.content+"</"+f.tag+">"},!c.document)return c.addEventListener?(d.disableWorkerMessageHandler||c.addEventListener("message",function(a){var b=JSON.parse(a.data),e=b.language,f=b.code,g=b.immediateClose;c.postMessage(d.highlight(f,d.languages[e],e)),g&&c.close()},!1),c.Prism):c.Prism;var f=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return f&&(d.filename=f.src,d.manual||f.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(d.highlightAll):window.setTimeout(d.highlightAll,16):document.addEventListener("DOMContentLoaded",d.highlightAll))),c.Prism}();void 0!==b&&b.exports&&(b.exports=d),void 0!==a&&(a.Prism=d),d.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},d.languages.markup.tag.inside["attr-value"].inside.entity=d.languages.markup.entity,d.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),d.languages.xml=d.languages.markup,d.languages.html=d.languages.markup,d.languages.mathml=d.languages.markup,d.languages.svg=d.languages.markup,d.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},d.languages.css.atrule.inside.rest=d.util.clone(d.languages.css),d.languages.markup&&(d.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:d.languages.css,alias:"language-css",greedy:!0}}),d.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:d.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:d.languages.css}},alias:"language-css"}},d.languages.markup.tag)),d.languages.clike={comment:[{
pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},d.languages.javascript=d.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\d*\.?\d+(?:[Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),d.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[[^\]\r\n]+]|\\.|[^\/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"}}),d.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:d.languages.javascript}},string:/[\s\S]+/}}}),d.languages.markup&&d.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:d.languages.javascript,alias:"language-javascript",greedy:!0}}),d.languages.js=d.languages.javascript,d.languages.c=d.languages.extend("clike",{keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),d.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+(?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(?:<.+?>|("|')(?:\\?.)+?\2)/,lookbehind:!0},directive:{pattern:/(#\s*)\b(?:define|defined|elif|else|endif|error|ifdef|ifndef|if|import|include|line|pragma|undef|using)\b/,lookbehind:!0,alias:"keyword"}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete d.languages.c["class-name"],delete d.languages.c.boolean,d.languages.cpp=d.languages.extend("c",{keyword:/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(?:true|false)\b/,operator:/--?|\+\+?|!=?|<{1,2}=?|>{1,2}=?|->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|\|?|\?|\*|\/|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),d.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)\w+/i,lookbehind:!0}}),d.languages.csharp=d.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[{pattern:/@("|')(?:\1\1|\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*?\1/,greedy:!0}],number:/\b-?(?:0x[\da-f]+|\d*\.?\d+f?)\b/i}),d.languages.insertBefore("csharp","keyword",{"generic-method":{pattern:/[a-z0-9_]+\s*<[^>\r\n]+?>\s*(?=\()/i,alias:"function",inside:{keyword:d.languages.csharp.keyword,punctuation:/[<>(),.:]/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),function(a){a.languages.ruby=a.languages.extend("clike",{comment:[/#(?!\{[^\r\n]*?\}).*/,/^=begin(?:\r?\n|\r)(?:.*(?:\r?\n|\r))*?=end/m],keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var b={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:a.util.clone(a.languages.ruby)}};a.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[gim]{0,3}/,greedy:!0,inside:{interpolation:b}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,greedy:!0,inside:{interpolation:b}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,greedy:!0,inside:{interpolation:b}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,greedy:!0,inside:{interpolation:b}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,greedy:!0,inside:{interpolation:b}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:/:[a-zA-Z_]\w*(?:[?!]|\b)/}),a.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),a.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,greedy:!0,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,greedy:!0,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,greedy:!0,inside:{interpolation:b}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,greedy:!0,inside:{interpolation:b}},{pattern:/("|')(?:#\{[^}]+\}|\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:b}}]}(d),d.languages.java=d.languages.extend("clike",{keyword:/\b(?:abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),d.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}}),d.languages.perl={comment:[{pattern:/(^\s*)=\w+[\s\S]*?=cut.*/m,lookbehind:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0}],string:[{pattern:/\b(?:q|qq|qx|qw)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/\b(?:q|qq|qx|qw)\s+([a-zA-Z0-9])(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/\b(?:q|qq|qx|qw)\s*\((?:[^()\\]|\\[\s\S])*\)/,greedy:!0},{pattern:/\b(?:q|qq|qx|qw)\s*\{(?:[^{}\\]|\\[\s\S])*\}/,greedy:!0},{pattern:/\b(?:q|qq|qx|qw)\s*\[(?:[^[\]\\]|\\[\s\S])*\]/,greedy:!0},{pattern:/\b(?:q|qq|qx|qw)\s*<(?:[^<>\\]|\\[\s\S])*>/,greedy:!0},{pattern:/("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/'(?:[^'\\\r\n]|\\.)*'/,greedy:!0}],regex:[{pattern:/\b(?:m|qr)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[msixpodualngc]*/,greedy:!0},{pattern:/\b(?:m|qr)\s+([a-zA-Z0-9])(?:(?!\1)[^\\]|\\[\s\S])*\1[msixpodualngc]*/,greedy:!0},{pattern:/\b(?:m|qr)\s*\((?:[^()\\]|\\[\s\S])*\)[msixpodualngc]*/,greedy:!0},{pattern:/\b(?:m|qr)\s*\{(?:[^{}\\]|\\[\s\S])*\}[msixpodualngc]*/,greedy:!0},{pattern:/\b(?:m|qr)\s*\[(?:[^[\]\\]|\\[\s\S])*\][msixpodualngc]*/,greedy:!0},{pattern:/\b(?:m|qr)\s*<(?:[^<>\\]|\\[\s\S])*>[msixpodualngc]*/,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s*([^a-zA-Z0-9\s{(\[<])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2[msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s+([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2[msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s*\((?:[^()\\]|\\[\s\S])*\)\s*\((?:[^()\\]|\\[\s\S])*\)[msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s*\{(?:[^{}\\]|\\[\s\S])*\}\s*\{(?:[^{}\\]|\\[\s\S])*\}[msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s*\[(?:[^[\]\\]|\\[\s\S])*\]\s*\[(?:[^[\]\\]|\\[\s\S])*\][msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^-]\b)(?:s|tr|y)\s*<(?:[^<>\\]|\\[\s\S])*>\s*<(?:[^<>\\]|\\[\s\S])*>[msixpodualngcer]*/,lookbehind:!0,greedy:!0},{pattern:/\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(lt|gt|le|ge|eq|ne|cmp|not|and|or|xor|x)\b))/,greedy:!0}],variable:[/[&*$@%]\{\^[A-Z]+\}/,/[&*$@%]\^[A-Z_]/,/[&*$@%]#?(?=\{)/,/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+)+(?:::)*/i,/[&*$@%]\d+/,/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/],filehandle:{pattern:/<(?![<=])\S*>|\b_\b/,alias:"symbol"},vstring:{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/sub [a-z0-9_]+/i,inside:{keyword:/sub/}},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b-?(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:\d(?:_?\d)*)?\.?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:lt|gt|le|ge|eq|ne|cmp|not|and|or|xor)\b/,punctuation:/[{}[\];(),:]/},d.languages.php=d.languages.extend("clike",{string:{pattern:/(["'])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0}}),d.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),d.languages.insertBefore("php","keyword",{delimiter:{pattern:/\?>|<\?(?:php|=)?/i,alias:"important"},variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),d.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),d.languages.markup&&(d.hooks.add("before-highlight",function(a){"php"===a.language&&/(?:<\?php|<\?)/gi.test(a.code)&&(a.tokenStack=[],a.backupCode=a.code,a.code=a.code.replace(/(?:<\?php|<\?)[\s\S]*?(?:\?>|$)/gi,function(b){for(var c=a.tokenStack.length;-1!==a.backupCode.indexOf("___PHP"+c+"___");)++c;return a.tokenStack[c]=b,"___PHP"+c+"___"}),a.grammar=d.languages.markup)}),d.hooks.add("before-insert",function(a){"php"===a.language&&a.backupCode&&(a.code=a.backupCode,delete a.backupCode)}),d.hooks.add("after-highlight",function(a){if("php"===a.language&&a.tokenStack){a.grammar=d.languages.php;for(var b=0,c=Object.keys(a.tokenStack);b<c.length;++b){var e=c[b],f=a.tokenStack[e];a.highlightedCode=a.highlightedCode.replace("___PHP"+e+"___",'<span class="token php language-php">'+d.highlight(f,a.grammar,"php").replace(/\$/g,"$$$$")+"</span>")}a.element.innerHTML=a.highlightedCode}})),d.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"triple-quoted-string":{pattern:/("""|''')[\s\S]+?\1/,greedy:!0,alias:"string"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},d.languages.swift=d.languages.extend("clike",{string:{pattern:/("|')(\\(?:\((?:[^()]|\([^)]+\))+\)|\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/\\\((?:[^()]|\([^)]+\))+\)/,inside:{delimiter:{pattern:/^\\\(|\)$/,alias:"variable"}}}}},keyword:/\b(?:as|associativity|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic(?:Type)?|else|enum|extension|fallthrough|final|for|func|get|guard|if|import|in|infix|init|inout|internal|is|lazy|left|let|mutating|new|none|nonmutating|operator|optional|override|postfix|precedence|prefix|private|Protocol|public|repeat|required|rethrows|return|right|safe|self|Self|set|static|struct|subscript|super|switch|throws?|try|Type|typealias|unowned|unsafe|var|weak|where|while|willSet|__(?:COLUMN__|FILE__|FUNCTION__|LINE__))\b/,number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,constant:/\b(?:nil|[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,atrule:/@\b(?:IB(?:Outlet|Designable|Action|Inspectable)|class_protocol|exported|noreturn|NS(?:Copying|Managed)|objc|UIApplicationMain|auto_closure)\b/,builtin:/\b(?:[A-Z]\S+|abs|advance|alignof(?:Value)?|assert|contains|count(?:Elements)?|debugPrint(?:ln)?|distance|drop(?:First|Last)|dump|enumerate|equal|filter|find|first|getVaList|indices|isEmpty|join|last|lexicographicalCompare|map|max(?:Element)?|min(?:Element)?|numericCast|overlaps|partition|print(?:ln)?|reduce|reflect|reverse|sizeof(?:Value)?|sort(?:ed)?|split|startsWith|stride(?:of(?:Value)?)?|suffix|swap|toDebugString|toString|transcode|underestimateCount|unsafeBitCast|with(?:ExtendedLifetime|Unsafe(?:MutablePointers?|Pointers?)|VaList))\b/}),d.languages.swift.string.inside.interpolation.inside.rest=d.util.clone(d.languages.swift),function(){function a(a,b){return Array.prototype.slice.call((b||document).querySelectorAll(a))}function b(a,b){return b=" "+b+" ",(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(b)>-1}function c(a,c,e){c="string"==typeof c?c:a.getAttribute("data-line");for(var g,h=c.replace(/\s+/g,"").split(","),i=+a.getAttribute("data-line-offset")||0,j=f()?parseInt:parseFloat,k=j(getComputedStyle(a).lineHeight),l=b(a,"line-numbers"),m=0;g=h[m++];){var n=g.split("-"),o=+n[0],p=+n[1]||o,q=a.querySelector('.line-highlight[data-range="'+g+'"]')||document.createElement("div");if(q.setAttribute("aria-hidden","true"),q.setAttribute("data-range",g),q.className=(e||"")+" line-highlight",l&&d.plugins.lineNumbers){var r=d.plugins.lineNumbers.getLine(a,o),s=d.plugins.lineNumbers.getLine(a,p);r&&(q.style.top=r.offsetTop+"px"),s&&(q.style.height=s.offsetTop-r.offsetTop+s.offsetHeight+"px")}else q.setAttribute("data-start",o),p>o&&q.setAttribute("data-end",p),q.style.top=(o-i-1)*k+"px",q.textContent=new Array(p-o+2).join(" \n");l?a.appendChild(q):(a.querySelector("code")||a).appendChild(q)}}function e(){var b=location.hash.slice(1);a(".temporary.line-highlight").forEach(function(a){a.parentNode.removeChild(a)});var d=(b.match(/\.([\d,-]+)$/)||[,""])[1];if(d&&!document.getElementById(b)){var e=b.slice(0,b.lastIndexOf(".")),f=document.getElementById(e);f&&(f.hasAttribute("data-line")||f.setAttribute("data-line",""),c(f,d,"temporary "),document.querySelector(".temporary.line-highlight").scrollIntoView())}}if("undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector){var f=function(){var a;return function(){if(void 0===a){var b=document.createElement("div");b.style.fontSize="13px",b.style.lineHeight="1.5",b.style.padding=0,b.style.border=0,b.innerHTML="&nbsp;<br />&nbsp;",document.body.appendChild(b),a=38===b.offsetHeight,document.body.removeChild(b)}return a}}(),g=0;d.hooks.add("before-sanity-check",function(b){var c=b.element.parentNode,d=c&&c.getAttribute("data-line");if(c&&d&&/pre/i.test(c.nodeName)){var e=0;a(".line-highlight",c).forEach(function(a){e+=a.textContent.length,a.parentNode.removeChild(a)}),e&&/^( \n)+$/.test(b.code.slice(-e))&&(b.code=b.code.slice(0,-e))}}),d.hooks.add("complete",function a(f){var h=f.element.parentNode,i=h&&h.getAttribute("data-line");if(h&&i&&/pre/i.test(h.nodeName)){clearTimeout(g);var j=d.plugins.lineNumbers,k=f.plugins&&f.plugins.lineNumbers;b(h,"line-numbers")&&j&&!k?d.hooks.add("line-numbers",a):(c(h,i),g=setTimeout(e,1))}}),window.addEventListener("hashchange",e),window.addEventListener("resize",function(){var a=document.querySelectorAll("pre[data-line]");Array.prototype.forEach.call(a,function(a){c(a)})})}}(),function(){if("undefined"!=typeof self&&self.Prism&&self.document){var a="line-numbers",b=/\n(?!$)/g,c=function(a){var c=e(a),d=c["white-space"];if("pre-wrap"===d||"pre-line"===d){var f=a.querySelector("code"),g=a.querySelector(".line-numbers-rows"),h=a.querySelector(".line-numbers-sizer"),i=f.textContent.split(b);h||(h=document.createElement("span"),h.className="line-numbers-sizer",f.appendChild(h)),h.style.display="block",i.forEach(function(a,b){h.textContent=a||"\n";var c=h.getBoundingClientRect().height;g.children[b].style.height=c+"px"}),h.textContent="",h.style.display="none"}},e=function(a){return a?window.getComputedStyle?getComputedStyle(a):a.currentStyle||null:null};window.addEventListener("resize",function(){Array.prototype.forEach.call(document.querySelectorAll("pre."+a),c)}),d.hooks.add("complete",function(a){if(a.code){var e=a.element.parentNode,f=/\s*\bline-numbers\b\s*/;if(e&&/pre/i.test(e.nodeName)&&(f.test(e.className)||f.test(a.element.className))&&!a.element.querySelector(".line-numbers-rows")){f.test(a.element.className)&&(a.element.className=a.element.className.replace(f," ")),f.test(e.className)||(e.className+=" line-numbers");var g,h=a.code.match(b),i=h?h.length+1:1,j=new Array(i+1);j=j.join("<span></span>"),g=document.createElement("span"),g.setAttribute("aria-hidden","true"),g.className="line-numbers-rows",g.innerHTML=j,e.hasAttribute("data-start")&&(e.style.counterReset="linenumber "+(parseInt(e.getAttribute("data-start"),10)-1)),a.element.appendChild(g),c(e),d.hooks.run("line-numbers",a)}}}),d.hooks.add("line-numbers",function(a){a.plugins=a.plugins||{},a.plugins.lineNumbers=!0}),d.plugins.lineNumbers={getLine:function(b,c){if("PRE"===b.tagName&&b.classList.contains(a)){var d=b.querySelector(".line-numbers-rows"),e=parseInt(b.getAttribute("data-start"),10)||1,f=e+(d.children.length-1);c<e&&(c=e),c>f&&(c=f);var g=c-e;return d.children[g]}}}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){b.exports=Backbone.Model.extend({defaults:{isUsingHiddenComment:!0,type:null,typeId:null,sort:null,order:null,max:null,offset:null,totalCommentCount:0,pageCount:10},initialize:function(){},fetch:function(a){var b=_.extend({reset:!0,data:{type:this.get("type"),typeId:this.get("typeId"),sort:this.get("Sort"),order:this.get("Order"),max:this.get("Max"),offset:this._getPageOffset(this.get("pageIndex"))}},a);return this.get("comments").fetch(b).then(_.bind(this._updateCommentCount,this))},addCommentAsJson:function(a){this.get("comments").addCommentAsJson(a).then(_.bind(this._updateCommentCount,this))},_updateCommentCount:function(){this.set("totalCommentCount",this.getCommentCount())},pageMetadata:function(){return{current_page_index:this.get("pageIndex"),page_count:this.get("pageCount"),count_per_page:this.get("Max"),total_item_count:this.getCommentCount()}},getCurrentPageIndex:function(){return Math.ceil(this.get("pageIndex")/this.get("Max"))},getCommentCount:function(){return this.get("comments").getTotalCount()},_getPageOffset:function(a){return(a-1)*this.get("Max")}})},{}],5:[function(a,b,c){a("../plugin/jquery.plugin.pagenavi.js");var d=a("../common/helper/util.js"),e=a("../common.util.js"),f=a("./cmmt.comments.js"),g=a("./cmmt.comment.view.js"),h=a("../mini.editor/mini.editor.manager.js");b.exports=Backbone.View.extend({el:"#_wrap_comment",events:{"click [data-editor] [data-btn=save]":"_onClickSaveBtn"},initialize:function(a){this._oEditor=null,this.model.set("comments",new f([],{course:this.model.get("course"),type:this.model.get("type"),uriPath:$.proxy(function(){return this.model.get("typeId")+"/content/"+this.model.get("contentId")+"/comment"},this)})),this._assignElements(),this._initEditor(),this._bindsToModel(),this._attachEvents();var b=e.queryStringToObject(),c=b?b.id:void 0,g=b?b.page:void 0;this.focusedCommentId=isNaN(c)?void 0:Number(c),this.focusedCommentPage=isNaN(g)?void 0:Number(g),this.focusedCommentPage&&this.model.set("pageIndex",this.focusedCommentPage),this.fetchComment().done($.proxy(function(){this.initPageNavi(),d.initMultipleImagesViewer()},this))},_attachEvents:function(){$("html, body").on("mousewheel",function(){$(this).stop()})},_assignElements:function(){this._welTotalCount=$("#_wrap_comment_count"),this._welCommentListWrap=this.$el.find("#_wrap_comment_list"),this._welNavigationWrap=this.$el.find("#_wrap_page_navi"),this._welEditorWrap=this.$el.find("[data-editor]")},_bindsToModel:function(){this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"remove",this.refresh),this.listenTo(this.model,"change:totalCommentCount",this._onChangeTotalCount),this.listenTo(this.model.get("comments"),"reset",this._onResetComments),this.listenTo(this.model.get("comments"),"add",this._onAddComment),this.listenTo(this.model.get("comments"),"remove",this._onRemoveComment)},_onResetComments:function(a){this._hideComments(),this._clearComments(),a.forEach(_.bind(this._appendComment,this)),this._showComments(),this._changePageNavi()},_onAddComment:function(a){this._oEditor.clearEditor(),this.model.set("pageIndex",1),this._reRenderComments()},_onRemoveComment:function(){0===this.model.get("comments").length&&this.model.get("pageIndex")>1&&this.model.set("pageIndex",this.model.get("pageIndex")-1),this._reRenderComments()},_onChangeTotalCount:function(a,b){this._renderCommentCount(b)},_renderComment:function(a){return a=$.extend({type:this.model.get("type")},a),new g({model:a,focusedCommentId:this.focusedCommentId}).render().$el},_reRenderComments:function(){this.refresh()},_appendComment:function(a){setTimeout(_.bind(function(){this._welCommentListWrap.append(this._renderComment(a)),d.initMultipleImagesViewer(),a.id===this.focusedCommentId&&this.scrollTo(this._welCommentListWrap.find("[data-comment-id="+this.focusedCommentId+"]").offset().top)},this),16)},_changePageNavi:function(){!1!==Boolean(this.page_navigation)&&this.page_navigation.resetPageNavi(this.model.pageMetadata())},initPageNavi:function(){this.page_navigation=this._welNavigationWrap.page_navigation(this.model.pageMetadata()),this.page_navigation.on("CHANGE_PAGE",$.proxy(function(a,b){this.model.set("pageIndex",b),this.fetchComment()},this))},_initEditor:function(){this._oEditor=new h({isUsingHiddenComment:this.model.get("isUsingHiddenComment")}),this._welEditorWrap.html(this._oEditor.render({placeholder:$.i18n.prop("comment.comment.description.template")}).$el),this._oEditor.initComponent("",[],!1);var a=d.haveAccess();-1!==a&&this._blockUpComment(a),this.$el.find("[data-btn=cancel]").remove()},_blockUpComment:function(a){$("<div></div>").addClass("dimmed").css("opacity",0).on("click",function(){d.moveToGetAccess(a)}).prependTo(this._oEditor.$el)},_onClickSaveBtn:function(){this._oEditor.validate()&&(this.writeComment(this._oEditor.getEditorData()),this._oEditor.isPrivate=!1)},_renderCommentCount:function(a){this._welTotalCount.text($.i18n.prop("comment.all.reply.label",a>0?a:""))},fetchComment:function(a){return this.model.fetch(a)},refresh:function(){return this.fetchComment()},_clearComments:function(){this._welCommentListWrap.empty()},_hideComments:function(){this._welCommentListWrap.css("display","none")},_showComments:function(){this._welCommentListWrap.css("display","block")},writeComment:function(a){a.course=this.model.get("course"),a.type=this.model.get("type"),a.typeId=this.model.get("typeId"),a.projectId=this.model.get("typeId"),a.projectContentId=this.model.get("contentId"),this.model.addCommentAsJson(a)},scrollTo:function(a){$("html, body").stop().animate({scrollTop:a},700,"easeOutQuint")}})},{"../common.util.js":13,"../common/helper/util.js":17,"../mini.editor/mini.editor.manager.js":48,"../plugin/jquery.plugin.pagenavi.js":55,"./cmmt.comment.view.js":7,"./cmmt.comments.js":8}],6:[function(a,b,c){b.exports=Backbone.Model.extend({idAttribute:"id",defaults:{aMaterials:null},initialize:function(a){"PROJECT"===this.get("type").toUpperCase()?this._dynamicChangeProjectURI():this._dynamicChangeURI(),this.on("change:course",this._dynamicChangeURI,this)},_dynamicChangeURI:function(){this.methodUris={create:["",this.get("course"),"comment"].join("/"),update:["",this.get("course"),"comment",this.get("id")].join("/"),delete:["",this.get("course"),"comment",this.get("id")].join("/")}},_dynamicChangeProjectURI:function(){this.methodUris={create:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment"].join("/"),update:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment",this.get("id")].join("/"),delete:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment",this.get("id")].join("/")}},sync:function(a,b,c){return b.url=b.methodUris[a],b.unset("modYmdt"),b.unset("regYmdt"),Backbone.sync(a,b,c)},parse:function(a){return a.aMaterials&&a.aMaterials.sort(function(a,b){return"Image"===a.type?0:1}),a.data?a.data:a},toPrintJson:function(){var a=_.clone(this.toJSON());return a.hasReply=this.has("replyCount"),a.postId=a.id,a.courseId=a.course,this.isForum()?a.nickNameSearchUrl="/"+a.course+"/search/forum/forum?searchText="+a.nickName+"&bbsId="+a.bbsId:a.nickNameSearchUrl="/"+a.course+"/search/lecture/title?searchText="+a.nickName+"&bbsId="+a.bbsId,a},isForum:function(){return"FORUM"===this.get("type")},isPrivate:function(){return!1===this.get("isMyWriting")&&"NORMAL_PRIVATE"===this.get("status")&&!1===this.get("isEditable")&&!1===this.get("isViewable")},isDeleted:function(){return!1===this.get("isMyWriting")&&"DELETED_BY_STAFF"===this.get("status")}})},{}],7:[function(a,b,c){var d=a("../system.config.js"),e=a("../common/helper/util.js"),f=a("../common/application/template.manager.js"),g=a("../common/constants/user.role.info.map.js"),h=a("../mini.editor/mini.editor.manager.js"),i=a("./cmmt.comments.js"),j=a("./cmmt.replies.js"),k=a("./cmmt.reply.js"),l=a("./cmmt.reply.view.js"),m=a("./../common/modal/common.modal/index.js"),n=Backbone.View.extend({__name:"cmmt.comment.view.js",template:_.template(f.applyI18n(a("./template/comment.view.html"))),model:i,tagName:"li",events:{"click [data-btn-modify]":"_onClickModifyBtn","click [data-btn-delete]":"_onClickDeleteBtn","click [data-btn-reply-list]":"_onClickReplies","click [data-wrap-comment-editor] [data-btn=save]":"_onClickSaveBtnOfEditing","click [data-wrap-comment-editor] [data-btn=cancel]":"_onClickCancelBtnOfEditing","click [data-wrap-reply-editor] [data-btn=save]":"_onClickSaveBtnByReplyEditor"},initialize:function(a){this._isOpenReplyArea=!1,this.focusedCommentId=a.focusedCommentId,this.isParentCommentPrivate=this.model.get("isPrivate"),this.isUsingHiddenComment=this.model.get("isUsingHiddenComment"),this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change:replyCount",this._renderRepliesCount)},render:function(){var a=this.model.toPrintJson();return"PROJECT"===a.type?a.postType="PROJECT_":a.postType="",a.postType+=a.hasReply?"COMMENT":"REPLY",this.$el.html(this.template($.extend({filterFlag:"OUTER"},{userRoleInfoMap:g},a))),this.model.isPrivate()?this.$el.addClass("private"):this.model.isDeleted()&&this.$el.addClass("del"),this._assignElements(),this._createReplies(),this._bindToModels(),this.focusedCommentId&&a.id===this.focusedCommentId&&this.$el.find("[data-comment-id="+this.focusedCommentId+"]").css("background-color","#f5f5f5"),e.initMultipleImagesViewer(),this},_assignElements:function(){this.elements={"wrap-comment-editor":this.$el.find("[data-wrap-comment-editor]"),"wrap-reply-editor":this.$el.find("[data-wrap-reply-editor]"),"wrap-reply-area":this.$el.find("[data-wrap-reply-area]"),"reply-button":this.$el.find("[data-btn-reply-list]"),"reply-list":this.$el.find("[data-reply-list]")}},_bindToModels:function(){this.listenTo(this.replies,"remove",this._loadReplyList)},_createReplies:function(){this.replies=new j([],{course:this.model.get("course"),type:this.model.type,uriPath:$.proxy(function(){return[this.model.get("projectId"),"content",this.model.get("projectContentId"),"comment",this.model.get("id"),"reply"].join("/")},this)})},_renderRepliesCount:function(a){var b=a.get("replyCount"),c="";0===b?c="":b>0&&(c=b),this.$el.find("[data-replies-count]").text(c)},_onClickDeleteBtn:function(a){return confirm($.i18n.prop("comment.delete.comment.confirm"))&&this.model.destroy({wait:!0}),!1},_onClickModifyBtn:function(a){if(a.preventDefault(),a.stopPropagation(),!this._oEditor){var b=this.model;this._oEditor=new h({isUsingHiddenComment:b.get("isUsingHiddenComment")});var c=b.get("isUsingHiddenComment")&&b.get("isPrivate");this.elements["wrap-comment-editor"].html(this._oEditor.render({placeholder:$.i18n.prop("comment.comment.description.template")}).$el),
this._oEditor.initComponent(b.get("content"),b.get("aMaterials"),c),this._oEditor.moveTo()}},_onClickSaveBtnOfEditing:function(){!0===this._oEditor.validate()&&(this._updateComment(this._oEditor.getEditorData()),this._removeMiniEditor(),this._isOpenReplyArea=!1)},_removeMiniEditor:function(){this._oEditor.destroyEditor(),delete this._oEditor},_updateComment:function(a){this.model.save(a)},_onClickCancelBtnOfEditing:function(){this._removeMiniEditor()},_onClickReplies:function(a){if(!d.isLoginUser())return void new m({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")});if(d.isGuestUser())return void new m({type:"register"});if(void 0===this._oReplyEditor&&this._initReplyEditor(),!1===this._isOpenReplyArea){var b=this._loadReplyList();$.when(b).done($.proxy(function(){this._toggleReplies(),this._isOpenReplyArea=!0,e.initMultipleImagesViewer()},this))}else this._toggleReplies(),this._isOpenReplyArea=!1;a.preventDefault()},_toggleReplies:function(){this.elements["wrap-reply-area"].toggleClass("hidden"),this.elements["reply-button"].toggleClass("on")},_initReplyEditor:function(){this._oReplyEditor=new h({isParentCommentPrivate:this.isParentCommentPrivate,isUsingHiddenComment:this.isUsingHiddenComment}),this.elements["wrap-reply-editor"].html(this._oReplyEditor.render({placeholder:$.i18n.prop("comment.reply.description.template")}).$el),this._oReplyEditor.initComponent("",[],this.isParentCommentPrivate),this.elements["wrap-reply-editor"].find("[data-btn=cancel]").remove()},_onClickSaveBtnByReplyEditor:function(){!0===this._oReplyEditor.validate()&&(this._createReply(this._oReplyEditor.getEditorData()),this._oReplyEditor.isPrivate=this.isParentCommentPrivate)},_createReply:function(a){a=$.extend({course:this.model.get("course"),commentId:this.model.get("id"),type:this.model.get("type")},a),"PROJECT"===this.model.get("type")&&(a.projectId=this.model.get("projectId"),a.projectContentId=this.model.get("projectContentId"),a.projectCommentId=this.model.get("id")),new k(a).save().success($.proxy(this._onSuccessNewReply,this))},_onSuccessNewReply:function(){this._loadReplyList(),this._oReplyEditor.clearEditor(),this.$el.find("input[type=checkbox]").prop("checked",this.model.get("isPrivate")).closest("[data-ychecker]").trigger("checked.ychecker")},_loadReplyList:function(){return this.replies.fetch({reset:!0,data:{commentId:this.model.get("id"),order:"desc"}}).done($.proxy(this._renderReplyList,this))},_renderReplyList:function(){this.elements["reply-list"].empty(),_.each(this.replies.models,$.proxy(this._appendReply,this)),e.initMultipleImagesViewer(),this.model.set("replyCount",this.replies.length)},_appendReply:function(a){a.set({type:this.model.get("type"),isParentCommentPrivate:this.model.get("isPrivate")}),"PROJECT"===this.model.get("type")&&a.set({projectId:this.model.get("projectId"),projectContentId:this.model.get("projectContentId"),projectCommentId:this.model.get("id")});var b=new l({model:a,course:this.model.get("course")}),c=b.render().$el;this.elements["reply-list"].append(c)}});b.exports=n},{"../common/application/template.manager.js":14,"../common/constants/user.role.info.map.js":16,"../common/helper/util.js":17,"../mini.editor/mini.editor.manager.js":48,"../system.config.js":63,"./../common/modal/common.modal/index.js":18,"./cmmt.comments.js":8,"./cmmt.replies.js":9,"./cmmt.reply.js":10,"./cmmt.reply.view.js":11,"./template/comment.view.html":12}],8:[function(a,b,c){var d=a("./cmmt.comment.js");b.exports=Backbone.Collection.extend({model:d,initialize:function(a){},url:function(){return this.getURI()},initialize:function(a,b){this.totalCount=0,_.extend(this,b)},setTotalCount:function(a){this.totalCount=a},getTotalCount:function(){return this.totalCount},getURI:function(){return"PROJECT"==this.type.toUpperCase()?["",this.getCourseName(),this.type.toLowerCase(),this.uriPath()].join("/"):["",this.getCourseName(),"comment","list"].join("/")},getCourseName:function(){return this.course},_increaseTotalCount:function(){this.totalCount++},parse:function(a){var b=a.data,c=b.commentJsonList;return this.setTotalCount(b.totalCount),_.map(c,$.proxy(function(a){return a.course=this.getCourseName(),a=$.extend({type:this.type},a)},this))},addCommentAsJson:function(a){var b=new d(a);return b.save().then(_.bind(function(a){b.set(a.data),this.add(b),this._increaseTotalCount()},this))}})},{"./cmmt.comment.js":6}],9:[function(a,b,c){var d=a("./cmmt.reply.js");b.exports=Backbone.Collection.extend({model:d,url:function(){return this.getURI()},defaults:{baseUrl:""},initialize:function(a,b){_.extend(this,b)},getURI:function(){return"PROJECT"==this.type.toUpperCase()?["",this.course,this.type.toLowerCase(),this.uriPath()].join("/"):[this.baseUrl,this.course,"reply","list"].join("/")},parse:function(a){var b=a.data.replyJsonList;return _.each(b,function(a){a.aMaterials&&a.aMaterials.sort(function(a,b){return"Image"==a.type?0:1})}),_.each(b,$.proxy(function(a){a.course=this.course,a.baseUrl=this.baseUrl,a.type=this.type},this)),this.data=a.data,this.data.replyJsonList}})},{"./cmmt.reply.js":10}],10:[function(a,b,c){b.exports=Backbone.Model.extend({__name:"cmmt.reply.js",idAttribute:"id",defaults:{baseUrl:""},initialize:function(a){"PROJECT"==this.get("type").toUpperCase()?this._dynamicChangeProjectURI():this._dynamicChangeURI(),this.on("change:course",this._dynamicChangeURI,this)},_dynamicChangeURI:function(){this.methodUris={create:["",this.get("course"),"reply"].join("/"),update:["",this.get("course"),"reply",this.get("id")].join("/"),delete:["",this.get("course"),"reply",this.get("id")].join("/")}},_dynamicChangeProjectURI:function(){this.methodUris={create:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment",this.get("projectCommentId"),"reply"].join("/"),update:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment",this.get("projectCommentId"),"reply",this.get("id")].join("/"),delete:["",this.get("course"),"project",this.get("projectId"),"content",this.get("projectContentId"),"comment",this.get("projectCommentId"),"reply",this.get("id")].join("/")}},sync:function(a,b,c){return b.url=b.methodUris[a],b.unset("modYmdt"),b.unset("regYmdt"),Backbone.sync(a,b,c)}})},{}],11:[function(a,b,c){var d=a("../common/helper/util.js"),e=a("../common/application/template.manager.js"),f=a("../common/constants/user.role.info.map.js"),g=a("../mini.editor/mini.editor.manager.js");b.exports=Backbone.View.extend({__name:"cmmt.reply.view.js",events:{"click [data-btn-modify]":"_onClickModifyBtn","click [data-btn-delete]":"_onClickDeleteBtn","click [data-wrap-comment-editor] [data-btn=save]":"_onClickSaveBtnOfEditing","click [data-wrap-comment-editor] [data-btn=cancel]":"_onClickCancelBtnOfEditing"},tagName:"li",className:"children",template:_.template(e.applyI18n(a("./template/comment.view.html"))),initialize:function(){this.rolePriority=this.model.get("rolePriority"),this.hasReply=this.model.has("replyCount"),this.listenTo(this.model,"sync",this.render)},render:function(){var a=$.extend({},{userRoleInfoMap:f,filterFlag:"OUTER"},this.model.toJSON());return a.rolePriority=this.rolePriority,a.hasReply=this.hasReply,a.postId=a.id,a.courseId=a.course,"FORUM"===this.model.get("type")?a.nickNameSearchUrl="/"+a.course+"/search/forum/forum?searchText="+a.nickName+"&bbsId="+a.bbsId:a.nickNameSearchUrl="/"+a.course+"/search/lecture/title?searchText="+a.nickName+"&bbsId="+a.bbsId,"PROJECT"===this.model.get("type")?a.postType="PROJECT_":a.postType="",a.postType+=a.hasReply?"COMMENT":"REPLY",this.$el.html(this.template(a)),this.$editor=this.$el.find("[data-wrap-comment-editor]"),!1===a.isMyWriting&&"NORMAL_PRIVATE"===a.status&&!1===a.isViewable?this.$el.addClass("private"):!1===a.isMyWriting&&"DELETED_BY_STAFF"===a.status&&this.$el.addClass("del"),d.initMultipleImagesViewer(),this},_onClickDeleteBtn:function(a){var b=$.i18n.prop("comment.delete.reply.confirm");!0===confirm(b)&&this.model.destroy({wait:!0}).success($.proxy(function(){},this)),a.preventDefault(),a.stopPropagation()},_onClickModifyBtn:function(a){if(a.preventDefault(),a.stopPropagation(),!this._oEditor){var b=this.model,c=b.get("isUsingHiddenComment")?b.get("isPrivate"):b.get("isParentCommentPrivate")&&b.get("isPrivate");this._oEditor=new g({isParentCommentPrivate:b.get("isParentCommentPrivate"),isUsingHiddenComment:b.get("isUsingHiddenComment")}),this.$editor.html(this._oEditor.render({placeholder:$.i18n.prop("comment.reply.description.template")}).$el),this._oEditor.initComponent(b.get("content"),b.get("aMaterials"),c),this._oEditor.moveTo()}},_onClickSaveBtnOfEditing:function(a){!0===this._oEditor.validate()&&(this._updateReply(this._oEditor.getEditorData()),this._removeMiniEditor()),a.preventDefault(),a.stopPropagation()},_removeMiniEditor:function(){this._oEditor.destroyEditor(),delete this._oEditor},_onClickCancelBtnOfEditing:function(a){this._removeMiniEditor()},_updateReply:function(a){this.model.unset("isReported"),this.model.unset("isDeleted"),this.model.unset("rolePriority"),this.model.save(a).success($.proxy(function(a){this.model.unset("data"),this.model.set(a.data),this.render()},this))}})},{"../common/application/template.manager.js":14,"../common/constants/user.role.info.map.js":16,"../common/helper/util.js":17,"../mini.editor/mini.editor.manager.js":48,"./template/comment.view.html":12}],12:[function(a,b,c){b.exports='\x3c!--  #breadcrumb:comment/template/comment.view.html --\x3e\n<% if ((isViewable === true && status != \'DELETED_BY_STAFF\') || isMyWriting == true || isEditable == true) { %>\n<div class="comment_area" data-comment-id="<%= id %>">\n    <% if(profImageUrl) { %>\n        <div class="thumb bgnone">\n            <% if(hasReply) { %>\n            <img src="<%- profImageUrl %>?type=ff40_40_r" width="40" height="40" alt="<%- nickName %>">\n            <% }else{ %>\n            <img src="<%- profImageUrl %>?type=ff32_32_r" width="32" height="32" alt="<%- nickName %>">\n            <% } %>\n        </div>\n    <% } else { %>\n        <div class="thumb"></div>\n    <% } %>\n    <div class="comment_view_mode" data-wrap-comment>\n        <div class="comment_info <% if (filterFlag == \'OUTER\') { %> edwith <% } %>">\n            <ul>\n                <li>\n                    <span class="username" data-username><%- nickName %></span>\n                    <% if (rolePriority === userRoleInfoMap.ROLE_ASSISTANT) { %>\n                        <div class="ic_ad" data-icon-staff>{{\'user.grade.ROLE_ASSISTANT\'}}</div>\n                    <% } else if (rolePriority === userRoleInfoMap.ROLE_PROFESSOR) { %>\n                        <div class="ic_ad" data-icon-staff>{{\'user.grade.ROLE_PROFESSOR\'}}</div>\n                    <% } else  if (rolePriority === userRoleInfoMap.ROLE_ADMIN) { %>\n                        <div class="ic_ad" data-icon-staff>{{\'user.grade.ROLE_ADMIN\'}}</div>\n                    <% } %>\n                    <% if(isPrivate === true){ %>\n                    <span class="ico_g_lock3" data-icon-status>{{\'comment.private.comment.template\'}}</span>\n                    <% } %>\n                </li>\n                <li><span data-elapsed-time><%- registeredTime %></span></li>\n                <% if(isMyWriting !== true) { %>\n                    <li><a href="#" class="btn_tx" data-btn-report data-course-id="<%- courseId %>" data-post-id="<%- postId %>" data-post-type="<%= postType %>">{{\'comment.report.label.template\'}}</a></li>\n                <% } else { %>\n                    <li><a href="#" class="btn_tx" data-btn-modify>{{\'default.button.modify.label\'}}</a></li>\n                <% } %>\n                <% if (isEditable === true) { %>\n                    <li><a href="#" class="btn_tx" data-btn-delete>{{\'default.button.delete.label\'}}</a></li>\n                <% } %>\n            </ul>\n        </div>\n        <div class="comment_desc">\n            <p data-content <% if (content.length === 0) { %>style="display:none"<% } %>><%=content%></p>\n        </div>\n    </div>\n    \x3c!--  --\x3e\n    <div class="se_editor_area view" data-material-content>\n        <% _.each(aMaterials, function(material, idx) { %>\n            <% if(material.type === "Image") { %>\n            <div class="f_img">\n                <a href="#" data-multiple-images-preview data-type="<%=postType%>" data-type-id="<%=id%>" data-image-index="<%=idx%>">\n                    <img src="<%- material.image.indexOf(\'?type=mfullfill_199_148\') === -1 ? material.image + \'?type=mfullfill_199_148\' : material.image %>" width="199" height="148" alt="<%- material.filename %>">\n                </a>\n            </div>\n            <% } else if (material.type === "File") {%>\n            <div class="f_file">\n                <span class="ico ico_s_file"></span><span class="name"><%- material.filename %></span>\n                <a href="<%- material.downloadPath %>&autoClose=true" class="btn btn_type3" data-global-file-download>{{\'default.button.save.label\'}}</a>\n            </div>\n            <% } %>\n        <% }); %>\n    </div>\n    \x3c!--//  --\x3e\n    <div class="comment_btn">\n        <ul>\n            <li><button type="button" class="btn btn_type9 r_rcom <% if(isVoted){%>on<%}%>" data-btn-vote data-course-id="<%- courseId %>" data-post-id="<%- postId %>" data-post-type="<%= postType %>">{{\'writing.gsp.page.vote.count.default.label\'}}<em data-vote-count><% if(voteCount > 0) { %><%- voteCount %><% } %></em></button></li>\n            <% if(hasReply){ %><li><button type="button" class="btn btn_type9 r_reply" data-btn-reply-list>{{\'comment.reply.label\'}}<em data-replies-count><% if(replyCount > 0) { %><%- replyCount %><% } %></em></button></li><% } %>\n        </ul>\n    </div>\n</div>\n\x3c!----\x3e\n<div class="se_wrap"  data-wrap-comment-editor></div>\n\x3c!--//--\x3e\n<% if(hasReply) { %>\n<div class="comment_children_wrap hidden" data-wrap-reply-area>\n    <div class="se_wrap" data-wrap-reply-editor></div>\n    <ul data-reply-list>\n    </ul>\n</div>\n<% } %>\n<% } else if (status == \'DELETED_BY_STAFF\') { %>\n\x3c!--   --\x3e\n    <div class="comment_area" data-comment-id="<%= id %>">\n        <div class="comment_view_mode">\n            <div class="comment_desc">\n                <p data-content <% if (content.length === 0) { %>style="display:none"<% } %>><%=content%></p>\n            </div>\n            <div class="comment_info">\n                <ul>\n                    <li><span data-elapsed-time><%- registeredTime %></span></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n<% } else if (status == \'NORMAL_PRIVATE\') { %>\n    \x3c!--  --\x3e\n    <div class="comment_area" data-comment-id="<%= id %>">\n        <div class="comment_view_mode">\n            <div class="comment_desc">\n                <p data-content <% if (content.length === 0) { %>style="display:none"<% } %>><%=content%></p>\n            </div>\n            <div class="comment_info">\n                <ul>\n                    <li><span data-elapsed-time><%- registeredTime %></span></li>\n                </ul>\n            </div>\n        </div>\n    </div>\n<% } %>\n'},{}],13:[function(a,b,c){b.exports={browserInfo:{appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,userAgent:navigator.userAgent},isBrowserType:function(a){var b={ie:"trident",chrome:"chrome",firefox:"firefox",safari:"safari"},c=this.browserInfo.userAgent.toLowerCase();return a=a.toLowerCase(),-1!=c.indexOf(b[a])},isIEBrowserVersion:function(a){return-1!=this.browserInfo.userAgent.toLowerCase().indexOf("msie "+a)},getMobileOSInfo:function(){var a=/(iPhone |iPad )?OS ([\d|_]+)/.exec(this.browserInfo.userAgent)||/(Android) ([\w.]+)/.exec(this.browserInfo.userAgent),b={name:"",version:""};return null!==a&&(b.name=a[1]||"",b.version=a[2]||""),b},isMobile:function(){return""!=this.getMobileOSInfo().name},replaceToPCHost:function(a){return a.match("://local")?a=a.replace("://local","://local-m"):a.match("://dev")?a=a.replace("://dev","://dev-m"):a.match("://qa")?a=a.replace("://qa","://qa-m"):a.match("://www")?a=a.replace("://www","://m"):a.match("://")&&(a=a.replace("://","://m-")),a},goMobileView:function(a){return this.replaceToPCHost(a)+"?validMobileApp=true"},objectToQueryString:function(a){return _.reduce(Object.keys(a),function(b,c,d){var e=0===d?"?":"&";return c=encodeURIComponent(c),[b,e,c,"=",encodeURIComponent(a[c])].join("")},"")},queryStringToObject:function(){var a={},b=window.location.href.split("?")[1];if(!b)return null;var c=decodeURI(b),d=c.split("&");return _.each(d,function(b){var c=b.split("=")[0],d="null"===b.split("=")[1]?null:b.split("=")[1];a[c]=d}),a},queryStringWithHashToObject:function(){var a={},b=window.location.hash.split("?")[1];if(!b)return null;var c=decodeURI(b),d=c.split("&");return _.each(d,function(b){var c=b.split("=")[0],d="null"===b.split("=")[1]?null:b.split("=")[1];a[c]=d}),a}}},{}],14:[function(a,b,c){window.i18n=window.i18n||function(){};var d=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},e={__name:"template.manager.js",nl2br:function(a){return null===a||void 0===a?"":(a+"").replace(/\n/g,"<br />")},_runI18n:function(a){var b=_.clone(_.templateSettings);window.i18n=function(){var a=$.i18n.prop.apply(this,arguments);return e.nl2br(a)};var c=d(a,"{{(.+?)}}","{{i18n($1)}}");return _.templateSettings={interpolate:/\{\{(.+?)\}\}/g},a=_.template(c,$.i18n.map),_.templateSettings=b,a},convert:function(a,b){return $.i18n&&(a=this._runI18n(a)),_.template(a,b)},applyI18n:function(a){return $.i18n&&(a=this._runI18n(a)),a}};b.exports=e},{}],15:[function(a,b,c){a("../../plugin/jquery.plugin.modal.js");a("../../system.config.js"),a("../application/template.manager.js");b.exports=function(){var a=null,b=null,c=null,d=null,e=null;$(document).ready(function(){$(document.body).append('<div class="modal_wrap modal_progress" data-selector="progressModal" style="display:none;"><div class="modal_inner"><div class="modal_dimmed"><iframe frameborder="0" src="about:blank" title="for bug fix"></iframe></div><div class="modal_container"><div class="modal_content"><div class="upload_progress modal_progress"><div class="inner"><strong data-selector="message">(<span data-selector="percentage">0</span>%)</strong><span class="wrap"><span class="mask"></span><span data-selector="gageLevel" style="width:0%"></span></span></div></div></div></div></div></div>'),e=$.modal({container:"[data-selector=progressModal]"}),a=e.wrap_modal_element,setTimeout(function(){b=a.find("[data-selector=message]"),c=a.find("[data-selector=percentage]"),d=a.find("[data-selector=gageLevel]"),b.text($.i18n.prop("fileupload.fileupload.progress.message"))},1)});var f=function(a){c.text(a),d.css("width",a+"%")};return{open:function(){e.open()},progress:function(a){c.text(a),d.css("width",a+"%")},close:function(){null!==e&&(e.close(),f(0))}}}()},{"../../plugin/jquery.plugin.modal.js":54,"../../system.config.js":63,"../application/template.manager.js":14}],16:[function(a,b,c){b.exports={__name:"user.role.info.map.js",ROLE_GUEST:1,ROLE_STUDENT:2,ROLE_ASSISTANT:3,ROLE_PROFESSOR:4,ROLE_ADMIN:5}},{}],17:[function(a,b,c){var d=a("../../system.config.js"),e=a("./../modal/common.modal/index.js"),f=a("../../../../bower_components/moment/moment.js"),g={isFirefox:function(){return"undefined"!=typeof InstallTrigger},callAjax:function(a){a=_.extend({url:"",data:{},type:"POST",done:function(){},fail:function(){}},a);var b={type:a.type,contentType:"text/json",dataType:"json",url:a.url,data:JSON.stringify(a.data)};return $.ajax(b).done(function(b){a.done(b)}).fail(function(){a.fail()})},ajaxCheckCoursePeriod:function(a){var b=[];$("._checkCoursePeriod").each(function(){b.push($(this).val())});var c={courseId:a,checkDate:b},e={type:"POST",contentType:"text/json",url:d.API+"course/checkCoursePeriod",dataType:"json",data:JSON.stringify(c)};return $.ajax(e)},pad:function(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a},nl2Br:function(a){return a.replace(/\n/g,"<br/>")},tag2String:function(a){return a.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")},removeEmptyString:function(a){var b=a;return b=b.replace(/<\/?p>/gi,""),b=b.replace(/<br.*?>/gi,""),b=b.replace(/<\/?span.*?>/gi,""),b=b.replace(/&\/?nbsp;/gi,""),b=b.replace(/ /gi,"")},isEditorContentEmpty:function(a,b){if(a=a||"",b&&""===$.trim(g.removeEmptyString(a)))return!0;var c=$(a);return 0===c.length||$("<div>").append(c).find("[data-selector=placeholder]").length>0},initMovie:function(){$("._movie_area").each(function(a,b){var c=$(b),d=c.attr("data-postId");c.attr("data-coverUrl")})},openPopup:function(a,b,c){window.open(a,"htmlname","width="+b+", height="+c+", resizable=1")},initMultipleImagesViewer:function(){$("[data-multiple-images-preview]").each($.proxy(function(a,b){$(b).off("click.multipleImages").on("click.multipleImages",$.proxy(function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget),c=b.data("type"),e=b.data("typeId"),f=b.data("imageIndex"),g=d.API+"viewer/image/multiple?type="+c+"&typeId="+e+"&imageIndex="+f;window.open(g,"_blank","width=1280px, height=720px, resizable=1")}))}))},initPreview:function(){$("._preview").each($.proxy(function(a,b){var c=$(window).width(),d=$(window).height(),e=$(b);e.off("click.preview").on("click.preview",$.proxy(function(a){var b=e.parent().find("img"),f=null,g=null,h=null;return 0===b.length&&(b=e.parent().parent().find("img")),f=b.attr("src").split("?")[0],g=parseInt(b.attr("data-width"),10)+20,h=parseInt(b.attr("data-height"),10)+20,c<g&&(g=c),d<h&&(h=d),this.openPopup("/viewer/image?src="+encodeURIComponent(f),g,h),!1},this))},this))},initMoviePreview:function(a){$('[data-selector="moviePreview"]').each($.proxy(function(b,c){var d=$(c);d.find('[data-selector="moviePreviewTrigger"]').on("click",$.proxy(function(b){this.openPopup(a+"?coverUrl="+d.attr("data-coverUrl")+"&postId="+d.attr("data-videoId"),600,500),b.preventDefault(),b.stopPropagation()},this))},this))},paramToObject:function(a){var b=[],c=a||location.href,d=c.split("?")[1];if(d){var e=d.split("&");_.each(e,function(a){var c=a.split("=");c[1]&&b.push(c)})}return _.object(b)},objectToParam:function(a){_.each(a,function(b,c){""==b&&delete a[c]});return $.param(a)},getFileSizePrintText:function(a){var b=["Bytes","KB","MB","GB","TB"];if(0==a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c)*100)/100+" "+b[c]},parseISO8601:function(a){var b,c=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,d=new Date(NaN),e=c.exec(a);return e&&(b=+e[2],d.setFullYear(e[1],b-1,e[3]),b!=d.getMonth()+1&&d.setTime(NaN)),d},getUUID:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}},isIE:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("msie")&&parseInt(a.split("msie")[1]);if(10!==b||window.TextTrack||(b=9),0==b){return!!!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&11}return b},isAppleDevice:function(){return!!navigator.userAgent.toLowerCase().match(/iphone|ipad|mac/)},isLessEqualExplorer10:function(){return!1!==g.isIE()&&g.isIE()<=10},isLessExplorer10:function(){return!1!==g.isIE()&&g.isIE()<10},pointChecker:function(a){var b=a.val();return 0===b.length?(alert($.i18n.prop("taskSubmit.validate.score.required.message")),a.val("").focus(),!1):!0===_.isNaN(parseInt(b,10))||b.match(/\D/)?(alert($.i18n.prop("taskSubmit.validate.score.number.message")),a.val("").focus(),!1):!(b<=0||b>1e3)||(alert($.i18n.prop("taskSubmit.validate.score.range.message",1,1e3)),a.val("").focus(),!1)},closeAllLayer:function(){$(document.body).trigger("HIDE_LAYER")},bodyScrollLock:function(){$("body").addClass("hidden_scroll")},bodyScrollUnlock:function(){$("body").removeClass("hidden_scroll")},removeImage:function(a){$(a).remove()},numberWithCommas:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},renderCircleProgress:function(a,b,c){var e=82,f=82,g=4,h=Raphael(a,e,f),i=e/2-g/2-5,j=d.PARTNER_COLOR?d.PARTNER_COLOR:"#00c73c",k={bgColor:"#ecf0f1",fgColor:""==$(a).data("color")?"#96a0aa":j},l=k.bgColor,m={stroke:k.bgcolor,"stroke-width":g,"stroke-linecap":"round"},n=function(a,b,c,d,e,f,g){l=g,e.animate({arc:[b,c,d]},900,">")};h.customAttributes.arc=function(a,b,c){if(a<=0)return!1;var d,f=360/b*a,g=(90-f)*Math.PI/180,h=e/2+c*Math.cos(g),i=e/2-c*Math.sin(g),j=l;return d=b==a?[["M",e/2,e/2-c],["A",c,c,0,1,1,e/2-.11,e/2-c]]:[["M",e/2,e/2-c],["A",c,c,0,+(f>180),1,h,i]],{path:d,stroke:j}};h.path().attr(m).attr({arc:[10,10,i]});n(a,b,c,i,h.path().attr(m).attr({arc:[0,10,i]}),!0,k.fgColor)},getPositionY:function(){var a=void 0!==window.pageXOffset,b="CSS1Compat"===(document.compatMode||"");return a?window.pageYOffset:b?document.documentElement.scrollTop:document.body.scrollTop},haveAccess:function(){return 1==d.USER_INFO.USER_PRIORITY?""===d.USER_INFO.USER_ID?0:1:-1},moveToGetAccess:function(a){return d.isLoginUser()?d.isGuestUser()?void new e({type:"register"}):void 0:void new e({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")})},localStorage:{setItem:function(a,b){try{localStorage.setItem(a,b)}catch(c){}},getItem:function(a){try{var b=localStorage.getItem(a);return"null"===b?b=null:"undefined"===b&&(b=window.undefined),b}catch(c){}},removeItem:function(a){try{localStorage.removeItem(a)}catch(b){}}},makeRandomPassword:function(){var a=["abcdefghijklmnopqrstuvwxyz".split(""),"0123456789".split(""),"!@#$%^&".split("")];return _.map([0,1,0,2,1,0,1],function(b){var c=a[b];return c.splice(parseInt(Math.random()*c.length),1)}).join("")},getAccountStringFromUrl:function(a){var b=g.removeUriQuery(a),c=g.removeProtocol(b).split("/"),d="",e="";return _.each(c,function(a,b){0===b?d=a:""!==a&&(b>1&&(e+="/"),e+=a)}),e&&(e=e.replace(/^[^\d\w-]/,"")),e||d},removeProtocol:function(a){return a.replace(/^(https?|HTTPS?):\/\//,"")},removeUriQuery:function(a){return a.replace(/\?+.*/,"")},changeSecondToTimeFormat:function(a){a=Math.floor(a);var b=0,c=0,d=0,e="";return a>=3600&&(b=Math.floor(a/3600),a%=3600,b=b<10?"0"+b:b,e=e+b+":"),c=Math.floor(a/60),d=a%60,c=c<10?"0"+c:c,d=d<10?"0"+d:d,e=e+c+":"+d},convertLineBreakToTag:function(a){return a?"<p>"+a.replace(/(?:\r\n|\r|\n)/g,"</p><p>")+"</p>":""},isContainDatePeriod:function(a,b,c,d){return void 0===c&&(c=new Date),d||(c=new Date(c.toDateString())),isNaN(a)&&(a=c),isNaN(b)&&(b=c),a<=c&&c<=b},convertDateToFormatYMD:function(a,b){var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate();return b||(b=""),""+c+b+(d<10?"0":"")+d+b+(e<10?"0":"")+e},convertDateToFormatYMDHMS:function(a,b,c){var d=a.toTimeString().split(" ")[0];return c||(c=" "),this.convertDateToFormatYMD(a,b)+c+d},getIsAllDayFromYmdt:function(a,b){var c=f(a),d=f(b),e=(c.format("YYYY.MM.DD"),c.format("HH")),g=c.format("mm"),h=(d.format("YYYY.MM.DD"),d.format("HH")),i=d.format("mm");return"00"===e&&"00"===g&&"23"===h&&"59"===i},generateYmdtWithZeroPad:function(a,b,c,d){var e=d?":59.0":":00.0";return a+" "+this._zeroPad(b)+":"+this._zeroPad(c)+e},_zeroPad:function(a){var b=Math.abs(Number(a));return(b<10?"0":"")+b},isValidPeriod:function(a,b){var c=f(a,"YYYY.MM.DD HH:mm:ss.S"),d=f(b,"YYYY.MM.DD HH:mm:ss.S");return c.isBefore(d)},escapeWithKeepingBrackets:function(a){return _.escape(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},addCssStyleToHead:function(a){var b=document.createElement("style");b.type="text/css",b.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(b)},cutString:function(a){var b=35;return a.length>b&&(a=a.substr(0,b-2)+"..."),a},parseLinkInHtmlString:function(a){var b=/(?!<(a|span)[^>]*?>[^<])(https?:\/\/(www\.)?|www)[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)(?![^<]*<\/?(a|span)>?)/g;return a=a.replace(b,function(a){return'<a href="'+a+'" target="_blank">'+a+"</a>"})},getCookie:function(a){for(var b,c,d=document.cookie.split(";"),e=0;e<d.length;e++)if(b=d[e].substr(0,d[e].indexOf("=")),c=d[e].substr(d[e].indexOf("=")+1),(b=b.replace(/^\s+|\s+$/g,""))==a)return unescape(c)}};b.exports=g},{"../../../../bower_components/moment/moment.js":1,"../../system.config.js":63,"./../modal/common.modal/index.js":18}],18:[function(a,b,c){var d=a("../../application/template.manager.js"),e=a("../../../system.config.js");b.exports=Backbone.View.extend({tagName:"div",className:"common_modal",events:{"click [data-close]":"_onClickCloseBtn","click [data-cancel]":"_onClickCancelBtn","click [data-ok]":"_onClickOkBtn"},template:_.template(d.applyI18n(a("./template.html"))),initialize:function(a){this.type=a.type,this._option=a,this.title=a.title,this.bodyTitle=a.bodyTitle,this.message=a.message,this.useCancelBtn=a.useCancelBtn,this.confirmBtnName=a.confirmBtnName,this.confirmCallback=a.confirmCallback,this.cancelBtnName=a.cancelBtnName,this.render(),$(document.body).append(this.$el),document.body.style.overflow="hidden"},_close:function(){this.remove(),document.body.style.overflow=""},_onClickCloseBtn:function(){this._close()},_onClickCancelBtn:function(){this._close()},_onClickOkBtn:function(){"login"===this.type?location.href=this._option.returnUrl:"register"===this.type?e.IS_PRIVATE_PARTNER&&!e.IS_WHALE_CLASS?($("#_btn_request_lecture").trigger("click"),this._close()):location.href="/"+e.COURSE_URI+"/":(this.confirmCallback&&this.confirmCallback(),this._close())},render:function(){return this.$el.html(this.template({title:this.title||$.i18n.prop("common.alert.title"),bodyTitle:this.bodyTitle,type:this.type,message:this.message||$.i18n.prop("security.filters.needLogin3.message"),useCancelBtn:this.useCancelBtn,confirmBtnName:this.confirmBtnName||$.i18n.prop("default.button.confirm.label"),cancelBtnName:this.cancelBtnName||$.i18n.prop("default.button.cancel.label")})),this.$el}})},{"../../../system.config.js":63,"../../application/template.manager.js":14,"./template.html":19}],19:[function(a,b,c){
b.exports='\x3c!-- #breadcrumb: src/fe/app/js/modules/common/modal/common.modal/template.html --\x3e\n<% if (type === \'login\') { %>\n<div class="modal_wrap">\n    <div class="modal_inner">\n        <div class="modal_dimmed"><iframe frameborder="0" src="about:blank" title=""></iframe></div>\n        <div class="modal_container">\n            <div class="modal_content">\n                <button type="button" class="modal_close ico_clse" data-close> </button>\n                <div class="modal_header">\n                    <h1 class="modal_title"></h1>\n                </div>\n                <div class="modal_body type3">\n                    <p class="txts"><%= message %></p>\n                </div>\n                <div class="modal_footer">\n                    <button type="button" class="btn btn_type1" data-cancel></button>\n                    <button type="button" class="btn btn_type1 on" data-ok></button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<% } else if (type === \'register\') { %>\n<div class="modal_wrap openplatform">\n    <div class="modal_inner">\n        <div class="modal_dimmed"><iframe frameborder="0" src="about:blank" title=""></iframe></div>\n        <div class="modal_container">\n            <div class="modal_content">\n                <button type="button" class="modal_close ico_clse" data-close> </button>\n                <div class="modal_header">\n                    <h1 class="modal_title"></h1>\n                </div>\n                <div class="modal_body type3">\n                    <p class="txts"><%= $.i18n.prop(\'security.filters.course.need.registration\') %></p>\n                </div>\n                <div class="modal_footer">\n                    <button type="button" class="btn btn_type1" data-cancel></button>\n                    <button type="button" class="btn btn_type1 on" data-ok><%= $.i18n.prop(\'course.gsp.page.home.course.join.lable\') %></button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<% } else { %>\n<div class="modal_wrap">\n    <div class="modal_inner">\n        <div class="modal_dimmed"><iframe frameborder="0" src="about:blank" title=""></iframe></div>\n        <div class="modal_container">\n            <div class="modal_content">\n                <button type="button" class="modal_close ico_clse" data-close> </button>\n                <div class="modal_header">\n                    <h1 class="modal_title"><%= title %></h1>\n                </div>\n                <div class="modal_body type3">\n                    <% if (bodyTitle) { %>\n                        <strong><%= bodyTitle %></strong>\n                    <% } %>\n                    <p class="txts"><%= message %></p>\n                </div>\n                <div class="modal_footer">\n                    <% if (useCancelBtn) { %>\n                        <button type="button" class="btn btn_type1" data-cancel><%= cancelBtnName %></button>\n                        <button type="button" class="btn btn_type1 on" data-ok><%= confirmBtnName %></button>\n                    <% } else { %>\n                        <button type="button" class="btn btn_type1 on" data-ok><%= confirmBtnName %></button>\n                    <% } %>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<% } %>\n'},{}],20:[function(a,b,c){var d=a("../../application/template.manager.js"),e=a("./userLists.js"),f=a("../../helper/util.js"),g=a("../../../system.config.js"),h=Backbone.View.extend({tagName:"li",template:_.template(d.applyI18n(a("./list.template.html"))),initialize:function(){this.render()},render:function(){this.$el.html(this.template({voteUser:this.model.toJSON(),isSharePartnerCode:g.IS_SHARE_PARTNER_CODE}))}});b.exports=Backbone.View.extend({tagName:"div",className:"modal_content",events:{"click [data-btn-close]":"_onClickCloseButton","click [data-btn-download]":"_onClickDownloadBtn"},template:_.template(d.applyI18n(a("./template.html"))),initialize:function(a){this._options=$.extend({modalWrapper:"#modal",modalContainer:".container"},a),this.userLists=new e([],a),this.voteUserListUrl="/"+this._options.course+"/vote/"+this._options.lectureId+"/userList",this.$modalContainer=$(this._options.modalContainer),this.$modalWrapper=$(this._options.modalWrapper),this._assignElement(),this._bindEvent(),this._render(),this.userLists.loadUserLists(),this._renderVoteCount()},_assignElement:function(){},_bindEvent:function(){this.userLists.once("add",this._renderListArea,this),this.userLists.on("add",this._renderLists,this)},_renderListArea:function(){this.$modalLikeArea=this.$modalContainer.find(".modal_like_area"),this.$modalLikeArea.html('<ul class="list"></ul>')},_render:function(){this.$el.html(this.template),this.$modalContainer.append(this.$el),this.$modalWrapper.show(),f.bodyScrollLock()},_renderLists:function(a){var b=new h({model:a});this.$elUserList=this.$modalContainer.find("ul.list"),this.$elUserList.append(b.el)},_renderVoteCount:function(){this.$modalContainer.find(".cnt").text(this.userLists.voteCount)},_close:function(){this.$modalWrapper.hide(),this.remove(),f.bodyScrollUnlock()},_onClickCloseButton:function(){this._close()},_onClickDownloadBtn:function(){$.fileDownload(this.voteUserListUrl+"/download",g.FILE_DOWNLOAD_OPTION)}})},{"../../../system.config.js":63,"../../application/template.manager.js":14,"../../helper/util.js":17,"./list.template.html":21,"./template.html":22,"./userLists.js":23}],21:[function(a,b,c){b.exports='<%\nvar imageUrl = "https://ssl.pstatic.net/static/m/mooc/p/blank/prof32.png";\nif (Boolean(voteUser.profImageUrl)) {\n    imageUrl = voteUser.profImageUrl + "?type=ff32_32_r";\n}\n%>\n    <span class="thumb">\n        <img src="<%=imageUrl%>" width="32" height="32" alt="<%=voteUser.nickName%>">\n    </span>\n<% if (isSharePartnerCode === true) { %>\n    <em class="name"><%=voteUser.userName%></em>\n    <span class="team"><%=voteUser.subGroupDesc%></span>\n<% } else { %>\n    <em class="name"><%=voteUser.nickName%></em>\n<% } %>'},{}],22:[function(a,b,c){b.exports='    <button type="button" class="modal_close ico_clse" data-btn-close> </button>\n    <div class="modal_header">\n        <h1 class="modal_title">   <em class="cnt">0</em></h1>\n    </div>\n    <div class="modal_body">\n        <div class="modal_like_area">\n            <span class="no_list"> .</span>\n        </div>\n    </div>\n    <div class="modal_footer">\n        <div class="group_lr">\n            <div class="group_l">\n                <button type="button" class="btn btn_type2 bold" data-btn-download> </button>\n            </div>\n            <div class="group_r">\n                <button type="button" class="btn btn_type1" data-btn-close></button>\n            </div>\n        </div>\n    </div>\n'},{}],23:[function(a,b,c){b.exports=Backbone.Collection.extend({method:null,initialize:function(a,b){this.options=b},url:function(){return{GET:this.voteUserListUrl="/"+this.options.course+"/vote/"+this.options.lectureId+"/userList"}[this.method]},requestApi:function(a,b,c){this.method=a,$.ajax({async:!1,url:this.url(),type:a,contentType:"application/json",data:JSON.stringify(b)}).done($.proxy(function(a){void 0!==c&&c(a.data)},this)).fail(function(a){})},loadUserLists:function(a){this.requestApi("GET","",$.proxy(function(b){this.getVoteCount(b.voteCount),this.addUserList(b.voteUserList),void 0!==a&&a()},this))},addUserList:function(a){var b={};_.each(a,$.proxy(function(a){b={mainGroupDesc:a.mainGroupDesc,voteYmdt:a.voteYmdt,email:a.email,nickName:a.nickName,profImageUrl:a.profImageUrl,userName:a.userName,snsId:a.snsId,subGroupDesc:a.subGroupDesc,partner:a.partner},this.add(b)},this))},getVoteCount:function(a){this.voteCount=a}})},{}],24:[function(a,b,c){a("../../../patches/uploadify.patch.js");var d=a("../../system.config.js"),e=a("../helper/util.js"),f=a("../components/upload.progress.js"),g=function(a,b){this.init.apply(this,arguments)};g.prototype={__name:"upload.service.js",_UPLOADIFY_DEFAULT_OPTIONS:{fileObjName:"myFile",preventCaching:!1,debug:!1,multi:!1,buttonText:"",removeTimeout:0,uploader:"/uploadManager/upload"},_UPLOADIFY_URL:"uploadify/uploadify.swf",_MAX_UPLOAD_SIZE:4295e6,_FILESIZE_LIMIT_WARNING:null,init:function(a,b){this._wel=a,this._htOptions=this._mixOption(b||{}),this._targetData=null,this._uploadify=null;var c=this._convertToReadableDatasizeFormat(this._htOptions.maxFileSize,0),d=this._getAcceptFileTypeString(this._htOptions.ext);this._FILESIZE_LIMIT_WARNING=$.i18n.prop("fileupload.filesize.limited",c),this._UNACCEPTABLE_FILETYPE_WARNING=$.i18n.prop("fileupload.filetype.limited",d),this._initUploader(this._wel,this._htOptions),this._wel.on("drop dragover",function(a){a.preventDefault(),a.stopPropagation()})},_convertToReadableDatasizeFormat:function(a,b){var c=["G","MB","KB"],d=[10737e5,1048576,1024],e=a/d[b];return b>=d.length?null:e>=1?parseInt(e,10)+c[b]:this._convertToReadableDatasizeFormat(a,++b)},_mixOption:function(a){return _.extend({url:d.FILEUPLOAD_ENDPOINT,buttonText:$.i18n.prop("util.uploader.htoptions.button.message"),hideButton:!1,width:"100%",height:"100%",welSpinTarget:null,autoUpload:!0,ext:[],maxFileSize:this._MAX_UPLOAD_SIZE,useUploadProgress:!0,add:function(){},start:function(){},done:function(){},progress:function(){},error:function(){}},a)},_initUploader:function(a,b){"KAIST"===d.PARTNER_CODE&&(b.formData||(b.formData={}),b.formData.neoIdToken=e.getCookie("NEO_SES"),b.formData.partnerCode=d.PARTNER_CODE),this.isLessEqualExplorer10()?this._attachFlashUploader(a,b):this._attachXHRUploader(a,b)},_isFileTypeAvailable:function(a,b){return new RegExp("."+a.join("|")+"$","i").test(b)},_isFileSizeOverflow:function(a){return a>this._htOptions.maxFileSize},_isFileValid:function(a,b){return!1===this._isFileTypeAvailable(a,b.name)?(alert(this._UNACCEPTABLE_FILETYPE_WARNING),!1):!this._isFileSizeOverflow(b.size)||(alert(this._FILESIZE_LIMIT_WARNING),!1)},_cacheTargetData:function(a){this._targetData=a},_isAcceptableFile:function(a,b){var c=a.join("|");return c=c.split("*").join("|"),new RegExp("(.|/)("+c+")$","i").test(b)},_makeAcceptableFileTypeProperty:function(a,b){return"."+a.join(", .")},_getAcceptFileTypeString:function(a){return a.join(", ")},_attachFlashUploader:function(a,b){a.each(function(a,b){$(b).attr("id",e.getUUID())});try{this._uploadify&&this._uploadify.uploadify("destroy"),this._uploadify=a.uploadify(_.extend(this._UPLOADIFY_DEFAULT_OPTIONS,{hideButton:!0,auto:b.autoUpload,width:b.width,height:b.height,successTimeout:0,formData:b.formData||{},buttonText:b.buttonText,wmode:"transparent",button_window_mode:"transparent",swf:d.VENDOR+this._UPLOADIFY_URL,uploader:b.url,queueSizeLimit:1,fileSizeLimit:b.maxFileSize+"B",fileTypeExts:"*."+(b.ext.join("; *.")||"*"),overrideEvents:["onSelectError","onDialogClose"],onSelect:$.proxy(this._onSelectForUploadify,this),onSelectError:$.proxy(this._onSelectErrorForUploadify,this),onUploadStart:$.proxy(this._onUploadStart,this),onUploadProgress:$.proxy(this._onUploadProgress,this),onUploadError:$.proxy(function(a,b,c,d){this._onUploadFail(d)},this),onUploadSuccess:$.proxy(function(a,b){this._onUploadSuccess(a,JSON.parse(b))},this)}))}catch(c){}return a},_attachXHRUploader:function(a,b){a.attr("accept",this._makeAcceptableFileTypeProperty(b.ext,b.type)).fileupload({timeout:0,url:b.url,dataType:"json",autoUpload:b.autoUpload,maxFileSize:b.maxFileSize,dropZone:null,xhrFields:{withCredentials:!0},formData:b.formData,add:$.proxy(this._onAddFileForXHRUploader,this),progressall:$.proxy(this._onUploadProgressForXHRUploader,this),done:$.proxy(function(a,b){this._onUploadSuccess(b.files[0],b.result,a)},this),fail:$.proxy(function(a,b){var c="Uploading is failed";try{c=JSON.parse(b.jqXHR.responseText).message}catch(a){}this._onUploadFail(c)},this)})},_onSelectForUploadify:function(a){if(this._isFileSizeOverflow(a.size))return void alert(this._FILESIZE_LIMIT_WARNING);this._htOptions.autoUpload&&this._wel.uploadify("upload","*"),this._onAdd(a)},_onSelectErrorForUploadify:function(a,b){SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT===b?alert(this._FILESIZE_LIMIT_WARNING):SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE===b&&alert($.i18n.prop("uploadmanager.uploaded.file.size.min.message"))},_onAddFileForXHRUploader:function(a,b){var c=b.files[0],d=this._htOptions;if(!1===this._isAcceptableFile(d.ext,c.name))return void alert($.i18n.prop("fileupload.filetype.limited",this._getAcceptFileTypeString(d.ext)));!1!==this._isFileValid(d.ext,c)&&(d.autoUpload&&(b.submit(),d.useUploadProgress&&this._onUploadStart()),this._onAdd(b))},_onUploadProgressForXHRUploader:function(a,b){this._onUploadProgress(null,b.loaded,b.total,b.loaded,b.total)},_onUploadSuccessForXHRUploader:function(a,b){this._onUploadSuccess(b.files[0],b.result,a)},_onAdd:function(a){this._cacheTargetData(a),this._htOptions.add&&this._htOptions.add.apply(this,arguments)},_onUploadStart:function(){this._startProgress(),this._htOptions.start&&this._htOptions.start.apply(this,arguments)},_onUploadProgress:function(a,b,c){this._renderProgress(parseInt(b/c*100,10)),this._htOptions.progress&&this._htOptions.progress.apply(this,arguments)},_onUploadSuccess:function(a,b,c){return this._stopProgress(),500===b.status?void alert(b.message):this._htOptions.done?void this._htOptions.done(a,b.data,b.status,b.message,c):void alert(b.message)},_onUploadFail:function(a){alert(a),this._stopProgress(),this._htOptions.error&&this._htOptions.error(a)},_renderProgress:function(a){f.progress(a)},_startProgress:function(){f.open()},_stopProgress:function(){setTimeout(function(){f.close()},500)},isLessEqualExplorer10:function(){return!1!==e.isIE()&&e.isIE()<=10},_submitForUploadify:function(a){this._uploadify.uploadify("settings","formData",a),this._uploadify.uploadify("upload","*")},_submitForXHRUploader:function(a){this._targetData.formData=$.extend(this._htOptions.formData,a),this._targetData.submit()},submit:function(a){this.isLessEqualExplorer10()?this._submitForUploadify(a):(this._submitForXHRUploader(a),this._onUploadStart())},removeUploadify:function(){try{this._uploadify&&this._uploadify.uploadify&&(this._uploadify.uploadify("destroy"),delete this._uploadify)}catch(a){}}},b.exports=g},{"../../../patches/uploadify.patch.js":73,"../../system.config.js":63,"../components/upload.progress.js":15,"../helper/util.js":17}],25:[function(a,b,c){b.exports=Backbone.Model.extend({__name:"lecture.example.js",url:"",defaults:{confirmQuiz:{},content:"",orderNum:0},initialize:function(a){}})},{}],26:[function(a,b,c){var d=a("./lecture.example.js");b.exports=Backbone.Model.extend({__name:"lecture.question.js",url:"#",enableRemove:!1,defaults:{question:"",orderNum:0,confirmQuizExampleList:[{orderNum:0},{orderNum:1}],confirmQuizAnswerList:null,confirmQuizSubmit:null,lecture:{id:0}},initialize:function(a){_.extend(this,this.defaults,a);var b=[],c={orderNum:0,content:"",explanation:""};_.each(this.confirmQuizExampleList,function(a,c){b.push(new d(a))},this),this.confirmQuizAnswerList||(this.confirmQuizAnswerList=[]),0==this.confirmQuizAnswerList.length&&(this.confirmQuizAnswerList.push(c),this.set("confirmQuizAnswerList",_.clone(this.confirmQuizAnswerList))),this.set("confirmQuizExampleList",_.clone(b)),this.on("change:confirmQuizExampleList",$.proxy(this._changeExamList,this))},_changeExamList:function(a){}})},{"./lecture.example.js":25}],27:[function(a,b,c){var d=a("./lecture.question.js");b.exports=Backbone.Collection.extend({__name:"lecture.questions.js",model:d,url:"#",initialize:function(a){}})},{"./lecture.question.js":26}],28:[function(a,b,c){a("../../plugin/jquery.plugin.NLoader.js");var d=a("../../common/helper/util.js"),e=a("../../comment/cmmt.app.view.js"),f=a("../../comment/cmmt.app.js"),g=a("../../related.forum/related.forum.js"),h=a("../../common/modal/like.user.list/index.js"),i=a("./lecture.show.question.container.view.js"),j=a("./../../system.config.js"),k=a("./../../common/modal/common.modal/index.js"),l=a("../../system.config.js"),m=a("../../../../bower_components/moment/moment.js");b.exports=Backbone.View.extend({__name:"lecture.show.js",el:"#content",events:{"click #_edit_btn":"_onClickEditBtn","click [data-btn-comment]":"_onClickCommentBtn","click [data-btn-forum]":"_onClickForumBtn","click [data-selector=tglLearningCompletion]":"_onClickToggleLearningCompletion","click [data-selector=learningCompletionOnPreview]":"_onClickLearningCompletionOnPreview","click [data-btn-tooltip-close]":"_onClickTooltipClose","click [data-btn-live-chat]":"_onClickLiveChat","click [data-btn-alarm-set]":"_onClickAlarmSet"},initialize:function(a){var b=a.courseName,c=a.lectureId,e=a.bbsId;this.isUsingHiddenComment=a.isUsingHiddenComment,this.courseName=a.courseName,this.isSequence=a.isSequence,this.isAlwaysOpen=a.isAlwaysOpen,this.quizList=a.quizList,this.nextAccess=a.nextAccess,this.nextUrl=a.nextUrl,this.nextConfirm=!1,this.nextId=a.nextId,this.completeLecture=a.completeLecture,this.checkNextURL="/"+b+"/lecture/"+c+"/accessible/"+a.nextId,this.lectureId=c,this.hasConstraintOnLectureCompletion=a.hasConstraintOnLectureCompletion,this.sEditEndpoint="/"+b+"/lecture/"+c+"/edit",this.sLearningCompletionEndpoint="/apiGateway/"+b+"/completeLecture/"+c,this.sLearningCompletionCancelEndpoint="/apiGateway/"+b+"/completeLecture/"+c,this.sGradeURL="/"+b+"/grade",this.apiPrefix="/"+b+"/lecture/"+c,this.welLoader=$("#comment_loader"),this.welBtnComment=$("[data-btn-comment]"),this.welBtnForum=$("[data-btn-forum]"),this.welWrapComment=$("#_wrap_comment"),this.welWrapForum=$("#_wrap_forum"),this.nextBtn=$("[data-btn-next]"),this.voteLikeUrl="/"+b+"/vote/"+c+"?postId="+c+"&postType=LECTURE",this.$likeBtn=$("[data-btn-like]"),this.$likeListBtn=$("[data-btn-like-list]"),this.welCourseLike=$("[data-course-like]"),this.possibleComplete=!1,this.$alarmSetBtn=$(".alarm_set_btn"),this.$completeLectureBtn=$("[data-selector=tglLearningCompletion]"),this._initComponents(b,c,e),this._initEvents(),d.initPreview(),l.isBizClassPartner()&&(this._initAlarm(),this.getCookie("onLoadComplete")==this.lectureId&&"completed"===this.$completeLectureBtn.data("role")&&setTimeout(function(){document.cookie="onLoadComplete="+this.lectureId+";expires=Thu, 01 Jan 1970 00:00:01 GMT",$("[data-selector=tglLearningCompletion]").trigger("click")},500))},getCookie:function(a){for(var b,c,d=document.cookie.split(";"),e=0;e<d.length;e++)if(b=d[e].substr(0,d[e].indexOf("=")),c=d[e].substr(d[e].indexOf("=")+1),(b=b.replace(/^\s+|\s+$/g,""))==a)return unescape(c)},_enableNextBtn:function(){this.nextBtn.hasClass("disabled")&&this.nextBtn.removeClass("disabled"),this.nextBtn.on("click",$.proxy(this._onNextClick,this))},_onNextClick:function(a){location.href=this.nextUrl},_disableNextBtn:function(){this.nextBtn.hasClass("disabled")||this.nextBtn.addClass("disabled"),this.nextBtn.off("click",$.proxy(this._onNextClick,this)),this.nextBtn.on("click",!1)},_initEvents:function(){!0===this.isSequence&&!1===this.nextAccess&&this.nextBtn.on("click",!1),this.$likeBtn.on("click",$.proxy(this._onClickLikeButton,this)),this.$likeListBtn.on("click",$.proxy(this._onClickShowVoteUserList,this))},_initComponents:function(a,b,c){this.oRelatedForum=new g({course:a,lectureId:b}),!0===this.isSequence&&(this.questionView=new i({el:"#_question_container",options:{quizList:this.quizList,apiPrefix:this.apiPrefix}}),this.questionView.on("confirmComplete",$.proxy(this._onConfirmComplete,this)),this.questionView.init()),this.welWrapComment.length?(this.oCommentApp=new e({model:new f({isUsingHiddenComment:this.isUsingHiddenComment,course:a,type:"LECTURE",typeId:b,Sort:"regYmdt",Order:"desc",Max:20,pageIndex:1})}),$.when(this.oCommentApp.promise,this.oRelatedForum.promise).then($.proxy(function(){this.welWrapComment.show()},this))):$.when(this.oRelatedForum.promise).then($.proxy(function(a){this.welWrapForum.show(),this.welBtnForum.addClass("single")},this))},_onConfirmComplete:function(a){this.possibleComplete=!0},_onClickEditBtn:function(){window.location.href=this.sEditEndpoint},_onClickCommentBtn:function(a){this.welWrapForum.hide(),this.welWrapComment.show(),this.welBtnComment.addClass("active"),this.welBtnForum.removeClass("active"),a.preventDefault()},_onClickForumBtn:function(a){this.welWrapForum.show(),this.welWrapComment.hide(),this.welBtnComment.removeClass("active"),this.welBtnForum.addClass("active"),a.preventDefault()},_switchToBtnCancelCompleted:function(a){this.questionView&&this.questionView.setDisabled(),$(this.nextBtn).addClass("on").removeClass("disabled"),a.removeClass("clr").addClass("clr3").data("role","cancel").text($.i18n.prop("lecture.cancel.learning.completion"))},_switchToBtnCompleteLearning:function(a){$("[data-tooltip-next] [data-btn-tooltip-close]").trigger("click"),location.reload()},_requestToToggleLearningCompletion:function(a,b){var c="DELETE",d=this.sLearningCompletionCancelEndpoint,e={};return"completed"===a&&(c="POST",d=this.sLearningCompletionEndpoint,e.lectureId=this.lectureId),$.ajax({type:c,url:d,data:e,global:!1})},_requestNextAccess:function(){return $.ajax({type:"POST",url:this.checkNextURL})},_toggleStatusOfLearningCompletionBtn:function(a,b,c){var d;"completed"===a?(this._switchToBtnCancelCompleted(b),this.isAlwaysOpen&&c.data.isResultOpen&&confirm($.i18n.prop("course.always.course.user.result.open.message"))&&(location.href=this.sGradeURL),!0===this.nextConfirm&&(location.href=this.nextUrl),this._nextTooltipCtrl()):this._switchToBtnCompleteLearning(b),this.isSequence&&this.nextId>0&&(d=this._requestNextAccess(),d.success($.proxy(this._onNextAvail,this)))},_onNextAvail:function(a){a.data&&!0===a.data.accessible?this._enableNextBtn():this._disableNextBtn()},_onClickToggleLearningCompletion:function(a){var b=$(a.target),c=b.data("role");if(this.isSequence&&!1===this.possibleComplete)return void this._alertTooltipCtrl($.i18n.prop("lecture.show.confirm.fail.label"));this.hasConstraintOnLectureCompletion&&"completed"===c&&$(window).trigger("sendVideoLogsBySync"),this._hideAlertTooltipCtrl(),b.attr("disabled","disabled"),this._requestToToggleLearningCompletion(c).done($.proxy(this._toggleStatusOfLearningCompletionBtn,this,c,b)).fail($.proxy(this._onFailLearningCompletion,this)).always(function(){setTimeout(function(){b.removeAttr("disabled")},500)})},_onClickLearningCompletionOnPreview:function(a){if(a.preventDefault(),!j.isLoginUser())return void new k({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")});if(j.isGuestUser()){if(j.IS_BIZ_CLASS){var b=new Date;b.setMinutes(b.getMinutes()+1),document.cookie="onLoadComplete="+this.lectureId+";expires="+b.toUTCString()}return void new k({type:"register"})}},_onFailLearningCompletion:function(a){if(400===a.status){var b;try{b=JSON.parse(a.responseText).message}catch(a){}b&&this._alertTooltipCtrl(b)}},_alertTooltipCtrl:function(a){var b=$("[data-tooltip-alert]");b.show(),b.find("[data-tooltip-alert-msg]").html(a)},_hideAlertTooltipCtrl:function(){$("[data-tooltip-alert]").hide()},_nextTooltipCtrl:function(){if(0===this.nextId)$("[data-tooltip-end]").show();else{var a=$("[data-tooltip-next]");a.show(),a.find("a").attr("href",$("[data-btn-next]").attr("href"))}},_onClickTooltipClose:function(a){$(a.target).parent().hide(),a.preventDefault()},_onClickLikeButton:function(a){return a.preventDefault(),j.isLoginUser()?j.isGuestUser()&&!l.IS_SHARE_PARTNER_CODE?(j.IS_BIZ_CLASS,void new k({type:"register"})):void this._postVoteLike():void new k({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")})},registerCallback:function(){$.ajax({type:"POST",url:this.sLearningCompletionEndpoint,data:{lectureId:this.lectureId},global:!1}).always(function(){setTimeout(function(){location.reload()},500)})},_postVoteLike:function(){var a=this.$likeBtn.data("count-num"),b=Number(this.welCourseLike.text());$.ajax({type:"POST",url:this.voteLikeUrl}).done($.proxy(function(c){100===c.status?c.data.isVoted?(this.$likeBtn.data("count-num",a+1),j.isManager()?this.$likeListBtn.text(a+1):this.$likeBtn.text($.i18n.prop("like.label")+" "+(a+1)),this.$likeBtn.addClass("on"),this.welCourseLike.text(b+1)):(this.$likeBtn.data("count-num",a-1),j.isManager()?this.$likeListBtn.text(a-1):this.$likeBtn.text($.i18n.prop("like.label")+" "+(a-1)),this.$likeBtn.removeClass("on"),this.welCourseLike.text(b-1)):alert(c.msg)},this))},_onClickShowVoteUserList:function(a){a.stopPropagation(),a.preventDefault(),this._likeUserListView=new h({course:this.courseName,lectureId:this.lectureId,modalWrapper:"#_modal_container",modalContainer:"[data-modal-container]"})},_setAlarmBtn:function(a,b){a||!b?this.$alarmSetBtn.addClass("disabled"):this.$alarmSetBtn.removeClass("disabled"),a?this.$alarmSetBtn.text($.i18n.prop("livealarm.register.complete.button")):this.$alarmSetBtn.text($.i18n.prop("livealarm.register.button"))},_initAlarm:function(){$.ajax({url:"/"+this.courseName+"/registrationLectureAlarm?lectureId="+this.lectureId,type:"GET",success:$.proxy(function(a){a.data.hasLiveInfo&&(this.$alarmSetBtn.css("display","block"),this._setAlarmBtn(a.data.isRegistered,a.data.isPossibleRegist),this._enableCompleteLectureBtnProcess(a.data.liveStartTime))},this),fail:$.proxy(function(a){alert("fail")},this)})},_onClickAlarmSet:function(a){$.ajax({url:"/"+this.courseName+"/registrationLectureAlarm",type:"POST",dataType:"json",data:{lectureId:this.lectureId},success:$.proxy(function(a){""!=a.msg&&alert(a.msg),100==a.status&&this._setAlarmBtn(a.data.isRegistered,a.data.isPossibleRegist),400==a.status&&this.$alarmSetBtn.addClass("disabled")},this)})},_enableCompleteLectureBtnProcess:function(a){var b=m(a,"YYYY.MM.DD HH:mm:ss");if(!this._enableCompleteLectureBtn(b))var c=setInterval(function(){this._enableCompleteLectureBtn(b)&&clearInterval(c)}.bind(this),1e4)},_enableCompleteLectureBtn:function(a){return!this.completeLecture&&(new Date>a?(this.$completeLectureBtn.attr("disabled",!1),this.$completeLectureBtn.removeClass("clr3").addClass("clr"),!0):(this.$completeLectureBtn.attr("disabled",!0),this.$completeLectureBtn.removeClass("clr").addClass("clr3"),!1))}})},{"../../../../bower_components/moment/moment.js":1,"../../comment/cmmt.app.js":4,"../../comment/cmmt.app.view.js":5,"../../common/helper/util.js":17,"../../common/modal/like.user.list/index.js":20,"../../plugin/jquery.plugin.NLoader.js":53,"../../related.forum/related.forum.js":60,"../../system.config.js":63,"./../../common/modal/common.modal/index.js":18,"./../../system.config.js":63,"./lecture.show.question.container.view.js":29}],29:[function(a,b,c){var d=a("../../common/application/template.manager.js"),e=a("../lecture.questions.js"),f=a("../lecture.question.js"),g=a("./lecture.show.question.view.js");b.exports=Backbone.View.extend({__name:"lecture.show.question.container.view.js",initialize:function(a){_.extend(this,a)},init:function(){this._initSetting(),this._addEvents(),this._initData(),this.render()},setDisabled:function(){_.each(this.questionViews,function(a,b){a.setDisabled()},this)},render:function(){},_initSetting:function(){this.questionCollection=new e,this.quizList=this.options.quizList,this.questionViews=[],this.confirmCnt=0},_addEvents:function(){this.questionCollection.on("add",$.proxy(this._onAddQuestion,this))},_initData:function(){this.quizList&&this.quizList.length>0&&this.questionCollection.set(this.quizList)},_createQuestion:function(b){var c;this.$el.append(_.template(d.applyI18n(a("../template/show.question.html")),b)),c=new g({el:this.$el.children().last(),model:b,prefix:this.options.apiPrefix}),c.on("confirmComplete",$.proxy(this._onConfirmComplete,this)),this.questionViews.push(c),c.init()},_addQuestionModel:function(a){this.questionCollection.add(new f(a))},_onAddQuestion:function(a){this._createQuestion(a)},_onConfirmComplete:function(a){++this.confirmCnt===this.questionViews.length&&this.trigger("confirmComplete")}})},{"../../common/application/template.manager.js":14,"../lecture.question.js":26,"../lecture.questions.js":27,"../template/show.question.html":31,"./lecture.show.question.view.js":30}],30:[function(a,b,c){var d=(a("../lecture.question.js"),a("../../common/application/template.manager.js"),a("../../system.config.js"));b.exports=Backbone.View.extend({__name:"lecture.show.question.view.js",initialize:function(a){this.prefix=a.prefix,this.saveAPI=this.prefix+"/confirmQuiz/"+this.model.id+"/submit/",this.confirmCnt=0},init:function(){this._initComponent(),this._initView(),this._addEvents()},setDisabled:function(){_.each(this.elements.examListContainer.children(),function(a,b){radio=$(a).find("input[type=radio]"),radio.attr("disabled",!0)},this),this.elements.btnSave.attr("disabled","disabled"),this.elements.btnSave.addClass("op2")},render:function(){},_initComponent:function(){this.elements={textArea:this.$el.find(".txt_area"),answerTitle:this.$el.find("[data-answer-title]"),answerRight:this.$el.find("[data-answer-right]"),answerContent:this.$el.find("[data-answer-content]"),examListContainer:this.$el.find("ul"),btnSave:this.$el.find("[data-btn-save]")}},_initView:function(){var a,b,c=this.model.get("confirmQuizSubmit"),e=!1,f=this.model.get("confirmQuizAnswerList"),g=d.USER_INFO.USER_PRIORITY>2;c&&(b=_.find(this.model.get("confirmQuizExampleList"),function(a){return a.id===c.confirmQuizExample.id},this)),_.each(this.elements.examListContainer.children(),function(d,f){a=$(d).find("input[type=radio]"),a.prop("index",f),a.on("click",$.proxy(this._onClickRadio,this)),b&&c&&b.attributes.orderNum===f&&(this.model.get("confirmQuizAnswerList")[0].orderNum=f,a.closest("span").addClass("checked"),e=!0)},this),g?(this._showAnswer(null,f[0].content,f[0].explanation,!0),this.elements.btnSave.remove(),this.elements.answerTitle.remove()):c&&f&&this._showAnswer(c.correct,f[0].content,f[0].explanation)},_addEvents:function(){this.elements.btnSave.on("click",$.proxy(this._onSaveClick,this))},_findAnswerObj:function(){var a,b=this.model.get("confirmQuizAnswerList")[0].orderNum;return _.each(this.model.get("confirmQuizExampleList"),function(c){if(c.attributes.orderNum===b){if(!this.elements.examListContainer.children().eq(this.model.get("confirmQuizAnswerList")[0].orderNum).find("input[type=radio]").closest("span").hasClass("checked"))return;return a=c}},this),a},_submitQuiz:function(){return this.prefix?$.ajax({type:"POST",contentType:"text/json",url:this.saveAPI+this._findAnswerObj().id,dataType:"json",success:$.proxy(this._onAfterSave,this)}):null},_onClickRadio:function(a){this.elements.examListContainer.find(".checked").removeClass("checked"),$(a.currentTarget).closest("span").addClass("checked"),this.model.get("confirmQuizAnswerList")[0].orderNum=$(a.currentTarget).prop("index")},_onSaveClick:function(a){if(!this._findAnswerObj())return void alert($.i18n.prop("lecture.show.please.select.label"));this._submitQuiz(),a.preventDefault()},_onAfterSave:function(a){this._showAnswer(a.data.correct,a.data.confirmQuizAnswer.content,a.data.confirmQuizAnswer.explanation)},_showAnswer:function(a,b,c,d){this.elements.answerTitle.html(a?$.i18n.prop("lecture.show.answer.ok.label"):$.i18n.prop("lecture.show.answer.fail.label")),this.elements.answerContent.html(c.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br>")),this.elements.answerRight.html($.i18n.prop("lecture.show.quiz.confirm.label")+" "+b),this.elements.textArea.show(),this.trigger("confirmComplete")}})},{"../../common/application/template.manager.js":14,"../../system.config.js":63,"../lecture.question.js":26}],31:[function(a,b,c){
b.exports='\x3c!--  #breadcrumb:lecture/template/show.question.html --\x3e\n<div class="cfm_group">\n    <article class="material_view material_poll">\n        <h1>  </h1>\n        <div class="material_desc">\n            <dl class="desc">\n                <dt><strong><%-question%></strong></dt>\n                <dd>\n                    <ul>\n                        <% _.sortBy(confirmQuizExampleList, \'orderNum\') %>\n                        <% _.each(confirmQuizExampleList, function(quiz){ %>\n                        <li>\n                            <label class="ick">\n                                <span class="radio"><input type="radio" checked=""></span>\n                                <span class="ph"><%-quiz.content%></span>\n                            </label>\n                        </li>\n                        <%})%>\n                    </ul>\n                </dd>\n            </dl>\n            <button type="button" class="btn btn_type1 on" data-btn-save>{{\'lecture.show.page.question.save.label\'}}</button>\n            \x3c!--&lt;!&ndash;  button.btn op2  / div.txt_area display none block  &ndash;&gt;--\x3e\n            \x3c!--<button type="button" class="btn btn_type2<% if(!confirmQuizSubmit) { %> op2<% } %>" data-btn-confirm>{{\'lecture.show.page.question.confirm.label\'}}</button>--\x3e\n            <div class="txt_area" <% if(confirmQuizSubmit && confirmQuizSubmit.confirmExplanation === true) { %>style="display: block;"<% } else { %>style="display: none;"<% } %>>\n            \x3c!--        . --\x3e\n                <strong class="tit pnt" data-answer-title></strong>\n                <strong class="tit" data-answer-right></strong>\n                <p class="dsc" data-answer-content></p>\n            </div>\n        </div>\n    </article>\n</div>\n'},{}],32:[function(a,b,c){var d=a("../../common/helper/util.js"),e=a("../../common/application/template.manager.js"),f=a("../material.util.js"),g=a("../../system.config.js"),h=a("./material.input.view.js");b.exports=h.extend({template:_.template(e.applyI18n(a("./template/file.html"))),events:{},initialize:function(){_.extend(this.events,h.prototype.events),h.prototype.initialize.apply(this,arguments)},initUploader:function(){this.initUploaderUI({ext:g.FILEUPLOAD_ACCEPT_LIST("file")})},_onDialogOpen:function(){this.$el.trigger("click")},_onUploadStart:function(){this.welProgressContainer.fadeIn(300),f.updateProgress(0,this.welProgress),this.model.set("isShowMaterial",!1)},_onUploadProgress:function(a,b,c,d,e){var g=parseInt(d/e*100,10);f.updateProgress(g,this.welProgress)},_onUploadSuccess:function(a,b){this.welProgressContainer.fadeOut(300),b.detail.url=b.url,b.detail.title=b.detail.filename,b.detail.fileSize=d.getFileSizePrintText(b.detail.fileSize),b.detail.isLoaded=!0,b.detail.isShowMaterial=!0,this.model.set(b.detail),this.model.unset("id")},afterRender:function(){this.initUploader(),this.trigger("init")}})},{"../../common/application/template.manager.js":14,"../../common/helper/util.js":17,"../../system.config.js":63,"../material.util.js":38,"./material.input.view.js":34,"./template/file.html":35}],33:[function(a,b,c){var d=a("../../common/application/template.manager.js"),e=a("./material.input.view.js");b.exports=e.extend({__name:"material.input.image.view.js",template:_.template(d.applyI18n(a("./template/image.html"))),initialize:function(){_.extend(this.events,e.prototype.events),e.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:viewType",this._onChangeViewType),this.listenTo(this.model,"change:image",this._onChangeImage)},setModel:function(a){this.model=a},initUploader:function(){this.initUploaderUI({ext:["png","jpg","jpeg","gif"],type:"image/*",maxFileSize:10485760})},_onClickSizeController:function(a){var b=$(a.currentTarget);return this.model.set("viewType",b.data("value")),!1},_onChangeViewType:function(a,b){var c=this._welImage.attr("src").split("?type=")[0];c+=this._getThumbTypePostfix(),this._changeViewType(b),this._changeImageSrc(c)},_onChangeImage:function(a,b){var c=b+this._getThumbTypePostfix();this._changeImageSrc(c)},_changeViewType:function(a){"left"===a?this._changeViewTypeToLeft():this._changeViewTypeToTop()},_onDialogOpen:function(){this.$el.trigger("click")},_onUploadStart:function(){this.model.set("isShowMaterial",!1),this.trigger("uploadStart")},_onUploadSuccess:function(a,b){b.detail.url=b.url,b.detail.title="",b.detail.isLoaded=!0,b.detail.isShowMaterial=!0,this.model.set(b.detail),this.model.unset("id")},_getThumbTypePostfix:function(){return"left"===this._getViewType()?"?type=ffn199_148":"?type=w760"},_getViewType:function(){return this.model.get("viewType")},_attachEvents:function(){this.$el.find("[data-selector=sizeController]").on("click","[data-value]",$.proxy(this._onClickSizeController,this))},_assignElements:function(){this._welContentsWrapper=this.$el.find("[data-selector=contentsWrapper]"),this._welImage=this.$el.find("[data-selector=image]")},afterRender:function(){this.initUploader(),this._assignElements(),this._attachEvents(),this.initComponents()},initComponents:function(){},_changeViewTypeToLeft:function(){this._welContentsWrapper.removeClass("material_spread",500)},_changeViewTypeToTop:function(){this._welContentsWrapper.addClass("material_spread",500)},_changeImageSrc:function(a){this._welImage&&setTimeout($.proxy(function(){this._welImage.data("src",a).attr("src",a)},this),1)}})},{"../../common/application/template.manager.js":14,"./material.input.view.js":34,"./template/image.html":36}],34:[function(a,b,c){var d=a("../../system.config.js"),e=a("../material.filter.js"),f=(a("../material.util.js"),a("../../common/service/upload.service.js"));b.exports=Backbone.View.extend({_FILE_LIMIT_MESSAGE:null,_MAX_UPLOAD_SIZE:21475e5,__name:"material.input.view.js",tagName:"div",className:"_material material",attributes:{"data-id":""},events:{"keydown textarea":"onKeyDownTextArea","focus ._key_event":"onFocus","blur ._key_event":"onBlur","keydown ._key_event":"onKeyDown",mouseover:"onMouseOver","click ._remove_btn":"clickRemoveItem","click ._clear_btn":"clickClearItem","mouseenter .material_item":"enterMaterial","mouseleave .material_item":"leaveMaterial","mouseenter .input_item":"showMaterial",drop:"drop"},initialize:function(a){this._FILE_LIMIT_MESSAGE=$.i18n.prop("default.warning.file.limited"),this.formData=a.formData,this.render(),this.model.on("change",$.proxy(this.render,this)),this.model.on("remove",$.proxy(this._onRemoveItem,this)),this.bindAfterRender()},onKeyDownTextArea:function(a){$(a.target).hasClass("_exercise_content")||$(a.target).hasClass("_exercise_result")},_onRemoveItem:function(){this.$el.slideUp(300,$.proxy(function(){this.remove(),this.trigger("remove")},this))},bindAfterRender:function(){_.bindAll(this,"render","afterRender");var a=this,b=function(b){return b(),a.afterRender(),a};this.render=_.wrap(this.render,b)},afterRender:function(){this.$el.find("._url_input").trigger("change"),this.$el.find("._key_event").trigger("change")},_getViewModel:function(){return _.extend({isMovable:!0,toggleClosedButton:!0},this.model.toJSON())},render:function(a){if(a)this._renderChangedItems(a);else{var b=this._getViewModel(),c=this.template(b);this.$el.html(c).attr("data-id",this.model.cid);this.$el.find("[data-filter]").each($.proxy(function(a,c){var d=$(c),e=d.attr("data-factor"),f=b[e];this._renderSingleItems(d,f)},this))}this._initMaterialView(),this._runLazyLoads(),$("[data-global-placeholder]").change()},_changeViewStyle:function(a,b){"viewType"===a&&("top"===b?this.$el.find("article").addClass("material_spread"):this.$el.find("article").removeClass("material_spread"))},_runLazyLoads:function(){this.$el.find("img, iframe").each($.proxy(function(a,b){var c=$(b),d=c.attr("data-src");c.attr("src")!==d&&c.attr("src",d).one("load",$.proxy(function(){},this))},this))},_initMaterialView:function(){this._toggleArticle(),!0===this.model.get("isShowMaterial")?(this.$el.find('[data-factor="isShowMaterial"]').removeClass("control_factor hidden_element"),"video"===this.model.get("contentType")?(this.$el.find('[data-factor="video"]').removeClass("control_factor hidden_element"),this.$el.find('[data-factor="image"]').addClass("control_factor hidden_element"),this.$el.find("._video_section").removeClass("control_factor hidden_element").show()):"image"===this.model.get("contentType")&&this.$el.find('[data-factor="image"]').removeClass("control_factor hidden_element")):this.$el.find('[data-factor="isShowMaterial"]').addClass("control_factor hidden_element"),this.$el.attr("data-type",this.model.get("type"))},_toggleArticle:function(){!0===this.model.get("isLoaded")?this.$el.find("article, ._material_item").show():this.$el.find("article, ._material_item").hide()},_renderChangedItems:function(a){_.each(a.changed,$.proxy(function(a,b){this._changeViewStyle(b,a),"contentType"===b&&this.$el.find('[data-factor="isShowMaterial"]').addClass("control_factor hidden_element");var c=this.$el.find('[data-factor="'+b+'"]');if(0!==c.length){if("isShowMaterial"===b)return void(!0===a?c.removeClass("control_factor hidden_element"):c.addClass("control_factor hidden_element"));if("sourceName"===b)c.text(a);else if("ext"===b){var d="file ico ico_"+a;c.attr("class",d)}else"filename"===b&&this.$el.find("[data-selector=filename]").text(a);if(0===a)return void c.hide();"fileSize"!==b&&"playTime"!==b&&"width"!==b&&"height"!==b||c.show(),this._renderSingleItems(c,a)}},this))},_renderSingleItems:function(a,b){a.each($.proxy(function(a,c){var d=$(c),f=d.attr("data-filter"),g=c.tagName,h=d.attr("data-render-type");if(f)try{b=e[f](b,d)}catch(i){throw"no Such Filter "+f}if("title"===h)d.attr("title",b);else if("class"===h)d.attr("class",b);else if("attr"===h&&""!==b)d.attr("data-value",b);else if("show"===h&&""!==b)d.show();else if("TEXTAREA"===g||"INPUT"===g)d.val(_.unescape(b));else if("A"===c.tagName)"EXT"===d.attr("data-link-type")?d.attr("href","#."+b.substr(0,3)):d.attr("href",this.model.get("downloadPath")),"A"!==d.attr("data-link-type")&&d.text(b);else if("IMG"===c.tagName){if(void 0===b)return;d.attr("data-src",b).show()}else"IFRAME"===c.tagName?d.attr("data-src",b).show():d.text(_.unescape(b))},this))},drop:function(a,b){this.$el.trigger("update-sort",[this.model,b])},clickRemoveItem:function(a){confirm(i18n("material.confirm.remove"))&&(this.model.collection&&this.model.collection.remove(this.model),this.clearUploadify(),this.trigger("removeMaterial")),a.stopPropagation()},clickClearItem:function(){confirm(i18n("material.confirm.remove"))&&(this.model.set({contentType:"",title:"",description:"",isParsed:!1,isLoaded:!1,isShowMaterial:!1}),this._initMaterialView())},showMaterial:function(){this.$el.find(".input_ui").show()},enterMaterial:function(){this.$el.find(".input_ui").show()},leaveMaterial:function(){this.$el.find(".input_ui").hide()},enterStage:function(a){},leaveStage:function(){},onKeyDown:function(a){27===a.which?$(a.currentTarget).val(this.originData).trigger("blur"):13===a.which&&"INPUT"===a.currentTarget.tagName&&$(a.currentTarget).trigger("blur")},onFocus:function(a){this.originData=$(a.currentTarget).val()},onBlur:function(a){var b=$(a.currentTarget),c=b.val(),d=b.attr("data-target");this.model.set(d,c),$(".edit_mode").remove()},onMouseOver:function(){},initUploaderUI:function(a){void 0===this.formData&&(this.formData={commonYn:this.model.get("commonYn"),postUrl:encodeURIComponent(location.href.replace("/edit","")+"#_movie_"),lectureId:location.href.split("/")[5]});var b=this.$el.find("._upload_input"),a=_.extend({url:d.FILEUPLOAD_ENDPOINT,ext:[],maxFileSize:this._MAX_UPLOAD_SIZE,width:"100%",height:"100%",hideButton:!0,autoUpload:!0,formData:this.formData,start:$.proxy(this._onBeforeUploadStart,this),progress:$.proxy(this._onUploadProgress,this),done:$.proxy(this._onBeforeUploadSuccess,this)},a);return this._uploader=new f(b,a),this.welProgressContainer=this.$el.find(".progress"),this.welProgress=this.welProgressContainer.find(".progress_bar"),this.welProgressContainer.hide(),this._uploader},_onBeforeUploadStart:function(){this.model.startUploading(),this._onUploadStart&&this._onUploadStart.apply(this,arguments)},_onBeforeUploadSuccess:function(){this.model.finishtUploading(),this._onUploadSuccess&&this._onUploadSuccess.apply(this,arguments)},_isFileSizeOverflow:function(a,b){return a<b},resetFlashUploader:function(){this.clearUploadify(),this.initUploader()},clearUploadify:function(){this._uploader&&this._uploader.removeUploadify()},initUploader:function(){}})},{"../../common/service/upload.service.js":24,"../../system.config.js":63,"../material.filter.js":37,"../material.util.js":38}],35:[function(a,b,c){b.exports='\x3c!-- #breadcrumb:material/input/template/file.html --\x3e\n<span class="ico ico_s_file"></span><a class="name" href="<%= downloadPath %>&autoClose=true" data-global-file-download><%= filename %></a>\n<span class="size"><%= fileSize %></span>\n<a href="#" class="btn btn_type5 f_close"><span class="sr_only">{{\'default.button.close.label\'}}</span></a>\n'},{}],36:[function(a,b,c){b.exports='\x3c!-- #breadcrumb:material/input/template/image.html --\x3e\n<div class="align_type" data-selector="sizeController">\n    <button type="button" class="btn bdnone ico_uio_al vatop" data-value="left">{{ \'material.image.small.mode\' }}</button>\n    <button type="button" class="btn bdnone ico_uio_va vatop" data-value="top">{{ \'material.image.large.mode\' }}</button>\n</div>\n<span class="movable_bar"></span>\n<div class="inner">\n    <article class="material_view material_image <% if(viewType === \'top\'){%>material_spread<%} %>" data-selector="contentsWrapper">\n\n        <div class="file_info ico_file_b">\n            <div class="name">\n                <span data-selector="filename" data-factor="filename">\n                    <%= filename %>\n                </span>\n                <label class="btn btn_type3 control_factor" >\n                    {{ \'default.button.change.file.label\' }}\n                    <input type="file" name="myFile" class="_upload_input" title="<%= filename %>" data-factor="filename" data-render-type="title" data-accept="png,jpg,jpeg,gif" accept="image/*" />\n                </label>\n            </div>\n            <div class="info"><span><%= fileSize %> bytes</span></div>\n        </div>\n\n        <div class="material_item">\n            <span>\n                <% if(viewType === \'top\'){ %>\n                <img data-src="<%= image %>?type=w760" data-factor="image" data-selector="image">\n                <% } else { %>\n                <img data-src="<%= image.indexOf(\'?type=mfullfill_199_148\') === -1 ? image + \'?type=ffn199_148\' : image %>" data-factor="image" data-selector="image">\n                <% } %>\n                <span></span>\n            </span>\n        </div>\n\n        <div class="material_desc">\n            <dl class="desc">\n                <dt>\n                    <label class="it stretch border_none">\n                        <span class="ph _ce_placeholder control_factor">{{ \'contents.editor.input.title.placeholder\' }}</span>\n                        <input data-global-placeholder="._ce_placeholder" type="text" class="bold _key_event _cancel" data-factor="title" data-target="title" value="<%= title === \'\' ? \'\' : title %>">\n                    </label>\n                </dt>\n                <dd>\n                    <label class="it stretch border_none">\n                        <span class="ph _ce_placeholder control_factor">{{\'material.please.insert.description\'}}</span>\n                        <textarea data-global-placeholder="._ce_placeholder" class="_key_event _cancel" data-filter="stripBr" data-factor="description" data-target="description" style="min-height:100px;"><%= description %></textarea>\n                    </label>\n                </dd>\n            </dl>\n\n        </div>\n    </article>\n</div>\n<div class="remove">\n    <button type="button" class="_remove_btn btn_remove_material">{{\'default.button.delete.label\'}}</button>\n</div>'},{}],37:[function(a,b,c){var d=a("./material.util.js");b.exports={bytesToSize:function(a){var b=["Bytes","KB","MB","GB","TB"];if(0==a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+" "+b[c]},stripBr:function(a){return a?a.replace(/<br\s?\/?>/g,"\n"):""},secToMin:function(a){var b=Math.floor(a/3600);a-=3600*b;var c=Math.floor(a/60);a-=60*c;var e=parseInt(a%60,10);return b>0?d.pad(b,2)+":"+d.pad(c,2)+":"+d.pad(e,2):d.pad(c,2)+":"+d.pad(e,2)},stripSourceUrl:function(a){var b=a.match(/:\/\/(www[0-9]?\.)?(.[^\/:]+)/i);return null!=b&&b.length>2&&"string"==typeof b[2]&&b[2].length>0?"https://"+b[2]:a},uppercase:function(a){return a?(a+"").toUpperCase():""},placeholder:function(a,b){return a||b.attr("data-placeholder")},substrExt:function(a){return(a+"").substr(0,3)},getCodeHTML:function(a){var b=$(a),c="";return"PRE"===b[0].tagName?(c=b[0].innerHTML,b[0].innerHTML="<code>"+c+"</code>",this.stripBr(b[0].outerHTML)):a}}},{"./material.util.js":38}],38:[function(a,b,c){b.exports={getOpenGraphInfoBy:function(a,b){a=a.replace(/(?:\r\n|\r|\n|\s)/g,""),a.search(new RegExp(/^https?:\/\//i))&&(a="http://"+a),-1===a.search("http://serviceapi.rmcnmv.naver.com")&&-1===a.search("http://share.navercorp.com")&&-1===a.search("http://qa-share.navercorp.com")&&-1===a.search("http://dev-share.navercorp.com")||(a=a.replace("http://","https://")),-1!==a.search("https://serviceapi.rmcnmv.naver.com")&&-1!==a.indexOf("?")&&-1===a.search("enableHls=false")&&(a+="&enableHls=false"),$.ajax({url:"/linkManager/upload",type:"get",data:{link:a}}).then(function(a,c,d){if(401===a.status)return alert(a.message),void b(!1);b(!0,a.data)}).fail(function(a){b(!1,a)})},nl2br:function(a){return null===a||void 0===a?"":(a+"").replace(/\n/g,"<br />")},resizeTextArea:function(a){a.style.height="1px",a.style.height=20+a.scrollHeight+"px"},pad:function(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a},updateProgress:function(a,b){b.attr("aria-valuenow",a).css({width:a+"%"}).show()},getDomainName:function(a){return a?(a=a.replace("http://","").replace("https://","").replace("www.","").split(/[\/?#]/)[0],a.split(".")[0].toUpperCase()):""}}},{}],39:[function(a,b,c){var d=a("./material.js");b.exports=d.extend({defaults:{at:1,title:"",description:"",viewType:"",commonYn:!0,ext:"",fileSize:0,filename:"",image:"",downloadPath:"",isParsed:!1,pageCount:0,height:0,width:0},initialize:function(a){d.prototype.initialize.apply(this,arguments),a.type="File",this.set(a)}})},{"./material.js":41}],40:[function(a,b,c){var d=a("./material.js");b.exports=d.extend({defaults:{at:0,title:"",description:"",viewType:"left",commonYn:!1,ext:"",fileSize:0,filename:"",image:"",downloadPath:"",isParsed:!1,pageCount:0,height:0,width:0},initialize:function(a){d.prototype.initialize.apply(this,arguments),a.type="Image",this.set(a)}})},{"./material.js":41}],41:[function(a,b,c){b.exports=Backbone.Model.extend({defaults:{type:"",isShowMaterial:!1,isLoaded:!1,isUploading:!1},events:{},idAttribute:"_id",initialize:function(a){this.set({type:"",isShowMaterial:!1,isLoaded:!1,isUploading:!1}),this.set(a)},validate:function(){return!0},isUploading:function(){return this.get("isUploading")},startUploading:function(){this.set("isUploading",!0)},finishtUploading:function(){this.set("isUploading",!1)}})},{}],42:[function(a,b,c){var d=(a("../system.config.js"),a("../common/application/template.manager.js"));b.exports=Backbone.View.extend({template:_.template(d.applyI18n(a("./template/file.html"))),tagName:"div",className:"f_file",events:{"click .f_close":"_onClickRemoveBtn"},initialize:function(){},render:function(a){return this.model=a,this.$el.html(this.template(this.model.toJSON())),this},_onClickRemoveBtn:function(a){var b=$.i18n.prop("material.confirm.remove");!0===confirm(b)&&(this.model.set(this.model.defaults,{silent:!0}),this.remove(),this.trigger("remove")),a.preventDefault()}})},{"../common/application/template.manager.js":14,"../system.config.js":63,"./template/file.html":49}],43:[function(a,b,c){var d=(a("../system.config.js"),a("../common/application/template.manager.js"));b.exports=Backbone.View.extend({events:{"click .f_close":"_onClickRemoveBtn"},template:_.template(d.applyI18n(a("./template/image.html"))),tagName:"div",className:"f_img",initialize:function(){},render:function(a){return this.model=a,this.$el.html(this.template(this.model.toJSON())),this},_onClickRemoveBtn:function(a){var b=$.i18n.prop("material.confirm.remove");!0===confirm(b)&&(this.model.set(this.model.defaults,{silent:!0}),this.remove(),this.trigger("remove")),a.preventDefault()}})},{"../common/application/template.manager.js":14,"../system.config.js":63,"./template/image.html":50}],44:[function(a,b,c){var d=a("../material/input/material.input.file.view.js"),e=a("../material/input/material.input.image.view.js"),f=a("./attachment.image.view.js"),g=a("./attachment.file.view.js");b.exports=Backbone.View.extend({ATTACH_FILE_TYPE:"File",ATTACH_IMAGE_TYPE:"Image",BUTTONS_ON_CLASS:"active",events:{},initialize:function(a){this.$aUploaderWrap=a.$aUploaderWrap,this.$el=a.$el,this.materialImageView=null,this.materialFileView=null,this._createUploader(),this._attachEvent(),this.model.validate()&&this.renderAttachments()},_attachEvent:function(a){$("[data-selector=Image]").on("click",$.proxy(this._onClickImageUploader,this))},_onClickImageUploader:function(a){var b=$(a.currentTarget).data("selector");this._createMaterial(b,$(a))},clear:function(){this.model.clear(),this.renderAttachments()},destroyView:function(){_.each(this.attachmentViews,function(a){a.clearUploadify()},this)},resetFlashUploader:function(){_.each(this.attachmentViews,function(a){a.resetFlashUploader()},this)},_createUploader:function(){var a=this.$aUploaderWrap;this.attachmentViews=[],_.each(a,function(a){var b=$(a).data("selector");this._createMaterial(b,$(a))},this)},_createMaterial:function(a,b){var c,f,g=this.model.findWhere({type:this.ATTACH_FILE_TYPE}),h=this.model.indexOf(g);a===this.ATTACH_IMAGE_TYPE?(c=this.model.getNewItem(this.ATTACH_IMAGE_TYPE),this.materialImageView?this.materialImageView.setModel(c):this.materialImageView=new e({model:c}),f=this.materialImageView,this.model.add(c,{at:h})):a===this.ATTACH_FILE_TYPE&&(f=new d({model:g})),this.listenTo(this.model,"change:isShowMaterial",this.renderAttachments),f.$el=b,this.attachmentViews.push(f)},renderAttachments:function(){this.$el.empty(),this.model.each(function(a){var b=this.render(a);this.$el.append(b)},this),this._togglePreviewArea()},render:function(a){var b;if(""!==a.get("filename")&&!1!==a.get("isShowMaterial"))return a.get("type")===this.ATTACH_IMAGE_TYPE?b=new f:a.get("type")===this.ATTACH_FILE_TYPE&&(b=new g),this.listenTo(b,"remove",this._togglePreviewArea),b.render(a).el},_togglePreviewArea:function(){this.$el.children("div").length>0?this.$el.css("display",""):this.$el.hide()},validate:function(){return this.model.validate()}})},{"../material/input/material.input.file.view.js":32,"../material/input/material.input.image.view.js":33,"./attachment.file.view.js":42,"./attachment.image.view.js":43}],45:[function(a,b,c){var d=a("../material/model/material.image.js"),e=a("../material/model/material.file.js");b.exports=Backbone.Collection.extend({initialize:function(){},setMaterials:function(a){if(a&&0!==a.length||this.add(new e({})),a&&a.length>0){var b=0;_.each(a,function(a){var c,f=a.type;"Image"===f?c=new d({}):(b++,c=new e({})),c.set(a),this.add(c)},this),0===b&&this.add(new e({}))}},clear:function(){this.each(function(a){a.set(a.defaults)})},validate:function(){var a=!1;return this.each(function(b){""!==b.get("filename")&&(a=!0)},this),a},getNotEmptyMaterials:function(){var a=[];return this.each(function(b){""!==b.get("filename")&&a.push(b.toJSON())},this),a},getNewItem:function(a){return"Image"===a?new d({}):new e({})}})},{"../material/model/material.file.js":39,"../material/model/material.image.js":40}],46:[function(a,b,c){var d=a("../common/helper/util.js");b.exports=Backbone.Model.extend({defaults:{content:""},clear:function(){this.set("content","")},isEmpty:function(){var a=d.removeEmptyString(this.get("content"));return!($.trim(a).length>0)}})},{"../common/helper/util.js":17}],47:[function(a,b,c){a("../plugin/jquery.plugin.NKatex.js");var d=a("../system.config.js");b.exports=Backbone.View.extend({MAX:3e3,events:{},initialize:function(a){this.$el=a.$el,this.$elTextarea=this.$el.find(".mce_editor"),this.render(),this._createTinymceEditor()},render:function(){this._oNKatex=this.$el.parent().find("[data-plugin=Katex]").NKatex({modal:this.$el.parent().find("[data-wrap=katex]")}),this._oNKatex.on("add",$.proxy(this._onClickAddByNKatex,this)),this._oNKatex.on("opened",$.proxy(this._onOpenNKatex,this)),this._oNKatex.on("closed",$.proxy(this._onCloseNKatex,this))},_onOpenNKatex:function(a,b){this._editor.isKatexOpened=!0;var c=this._editor,d=$(c.selection.getNode());if(!c.selection.isCollapsed()&&d.is(".katex")){b(d.find(".katex-mathml").text())}},_onCloseNKatex:function(){this._editor.isKatexOpened=!1,this._editor.focus()},_onClickAddByNKatex:function(a,b){this._editor.insertContent(b),this._saveContent()},_getTplPlaceholder:function(a){var b=$("#"+a).attr("placeholder");return void 0!==b&&!1!==b&&'<p class="ph" data-selector="placeholder">'+$("#"+a).attr("placeholder")+"</p>"},_createTinymceEditor:function(){var a={mode:"textareas",editor_selector:"mce_editor",skin_url:d.CSS+"tinymce_skin",content_css:d.VENDOR+"katex/katex.min.css",toolbar:!1,menubar:!1,statusbar:!1,paste_as_text:!0,paste_data_images:!1,init_instance_callback:$.proxy(this._initializedTinymceEditor,this),setup:$.proxy(function(a){this._editor=a;var b=this._getTplPlaceholder(a.id);a.on("focusin",$.proxy(this._onFocusInContent,this)),a.on("focusout",$.proxy(this._onFocusOutContent,this)),!1!==b&&(a.on("init blur",function(a){var c=a.target;""===c.getContent()&&c.setContent(b)}),a.on("focus",function(a){var b=a.target;$("<div></div>").html(b.getContent()).find("[data-selector=placeholder]").length>0&&b.setContent(""),$(document).trigger("DOCUMENT_CLICKED"),$(document.body).trigger("DOCUMENT_CLICKED"),$(document.body).trigger("HIDE_LAYER")}),a.on("ExecCommand",function(a){if("katex"===a.command)return this._oNKatex.click(),!1}.bind(this)))},this)};a=_.extend({},d.TINYMCE_EDITOR_DEFAULT_OPTION,a),setTimeout($.proxy(function(){tinymce.init(a)},this),10)},_initializedTinymceEditor:function(){this._updateContentView()},_updateContentView:function(){var a=this._editor,b=this.model.get("content"),c=this._getTplPlaceholder(a.id),d=!1;a.setContent(b),a.save(),a.iframeElement===document.activeElement&&(d=!0),""===b&&!1!==c&&!0!==d&&a.setContent(c)},destroyTinymce:function(){this._editor.destroy()},clear:function(){this.model.clear(),this._updateContentView()},validateMax:function(){var a=$(this.model.get("content"));return this._isLessThanMax(a.text(),this.MAX)},validate:function(){return!0!==this.model.isEmpty()},_onFocusInContent:function(){this._saveContent(),$(document.body).trigger("HIDE_MINI_EDITOR_LAYER")},_onFocusOutContent:function(){this._saveContent()},_saveContent:function(){this.model.set("content",this._editor.getContent()),this._editor.save()},_isLessThanMax:function(a,b){return a.length<=b}})},{"../plugin/jquery.plugin.NKatex.js":52,"../system.config.js":63}],48:[function(a,b,c){a("../plugin/jquery.plugin.ychecker.js");var d=a("../common/application/template.manager.js"),e=a("./mini.editor.content.js"),f=a("./mini.editor.content.view.js"),g=a("./mini.editor.attachments.js"),h=a("./mini.editor.attachment.view.js");b.exports=Backbone.View.extend({template:_.template(d.applyI18n(a("./template/mini.editor.html"))),tagName:"div",className:"se_editor_wrap sub_modal_wrap",events:{"click [data-checkbox=secret]":"_onClickSecretCheckbox"},initialize:function(a){this.isParentCommentPrivate=!1,this.isUsingHiddenComment=!0,a&&(this.isParentCommentPrivate=a.isParentCommentPrivate,this.isUsingHiddenComment=a.isUsingHiddenComment)},render:function(a){return a=this._setCommentPrivateData(a),this.$el.append(this.$el.html(a?this.template(a):this.template())),this._welSecretCheckbox=this.$el.find("[data-checkbox=secret]"),this.isPrivate=this.isParentCommentPrivate,this},_setCommentPrivateData:function(a){return a?a.isUsingHiddenComment=this.isUsingHiddenComment:a={isUsingHiddenComment:this.isUsingHiddenComment},a},initComponent:function(a,b,c){this._createComponent(a,b),this._setSecretCheckbox(c)},moveTo:function(){var a=this.$el.offset().top;$("html, body").stop().animate({scrollTop:a},700,"easeOutQuint")},_createComponent:function(a,b){var c=new e({content:a});this._oContentView=new f({model:c,$el:this.$el.find("[data-wrap=content]")});var d=new g;b&&b.sort(function(a,b){return"Image"===a.type?0:1}),d.setMaterials(b),this._oAttachmentView=new h({model:d,$el:this.$el.find(".se_editor_area"),$aUploaderWrap:this.$el.find("[data-selector]")}),_.each(this._oAttachmentView.attachmentViews,function(a){a.initUploader()},this)},_onClickSecretCheckbox:function(){var a=this._welSecretCheckbox;!0===a.prop("checked")?(this.isPrivate=!0,this._showSecretNotifyMessage($.i18n.prop("comment.secret.notify.message.template"))):this.isParentCommentPrivate?(this.isPrivate=!0,a.prop("checked",!0),this._showSecretNotifyMessage($.i18n.prop("comment.secret.notify.only.private.message.template"))):this.isPrivate=!1},_showSecretNotifyMessage:function(a){this.$el.find("[data-secret-notify]").text(a),clearTimeout(this._tooltipTimerId);var b=this.$el.find("[data-wrap=tooltip]");b.removeClass("hidden").fadeIn(),this._tooltipTimerId=setTimeout($.proxy(function(){b.fadeOut().addClass("hidden")},this),4e3)},_setSecretCheckbox:function(a){this.isPrivate=a;var b=this._welSecretCheckbox;!0===a?(b.prop("checked",!0),b.parent().addClass("checked")):(b.prop("checked",!1),b.parent().removeClass("checked"))},getEditorData:function(){var a={isPrivate:this.isPrivate,isLiveNotice:!1,content:this._oContentView.model.get("content"),aMaterials:this._oAttachmentView.model.getNotEmptyMaterials()};return a.aMaterials&&(a.attachmentIdList=[],_.forEach(a.aMaterials,$.proxy(function(b){a.attachmentIdList.push(b.attachmentId)},this))),a},clearEditor:function(){this.$el.find("input[type=checkbox]").prop("checked",!1).closest("[data-ychecker]").trigger("checked.ychecker"),this.isPrivate=!1,this._oContentView.clear(),this._oAttachmentView.clear()},destroyEditor:function(){this._oAttachmentView.destroyView(),this._oContentView.destroyTinymce(),this.remove()},validate:function(){return!1===this._oContentView.validate()&&!1===this._oAttachmentView.validate()?(alert($.i18n.prop("comment.please.insert.comment.alert")),!1):!1!==this._oContentView.validateMax()||(alert($.i18n.prop("comment.save.comment.confirm")),!1)},isContentValid:function(){return this._oContentView.validate()}})},{"../common/application/template.manager.js":14,"../plugin/jquery.plugin.ychecker.js":58,"./mini.editor.attachment.view.js":44,"./mini.editor.attachments.js":45,"./mini.editor.content.js":46,"./mini.editor.content.view.js":47,"./template/mini.editor.html":51}],49:[function(a,b,c){b.exports='\x3c!-- #breadcrumb:mini.editor/template/file.html --\x3e\n<span class="ico ico_s_file"></span><a class="name" href="<%- downloadPath %>&autoClose=true" data-global-file-download><%- filename %></a>\n<span class="size"><%- fileSize %></span>\n<a href="#" class="btn btn_type5 f_close"><span class="sr_only">{{\'default.button.close.label\'}}</span></a>\n'},{}],50:[function(a,b,c){
b.exports='\x3c!-- #breadcrumb:mini.editor/template/image.html --\x3e\n<% if( image ) { %>\n    <img src="<%- image.indexOf(\'?type=mfullfill_199_148\') === -1 ? image + \'?type=mfullfill_199_148\' : image %>" width="199" height="148" alt="<%- filename %>">\n<% } %>\n<a href="#" class="btn btn_type5 f_close"><span class="sr_only">{{\'default.button.close.label\'}}</span></a>\n'},{}],51:[function(a,b,c){b.exports='\x3c!-- #breadcrumb:mini.editor/template/mini.editor.html --\x3e\n<div class="comment_wrap" data-wrap="content">\n    <% if (typeof(placeholder) !== "undefined") { %>\n        <textarea style="height:70px" class="mce_editor" placeholder="<%= placeholder %>"></textarea>\n    <% } else { %>\n        <textarea style="height:70px" class="mce_editor" placeholder="{{\'comment.save.comment.confirm\'}}"></textarea>\n    <% } %>\n</div>\n<div class="se_editor_area" style="display:none" data-wrap="preview"></div>\n<div class="comment_footer_wrap">\n    <div class="btn_area_l" data-btn="other">\n        <span class="img" data-selector="Image">\n            <span class="ico_i_image">{{\'comment.attachment.image.label\'}}</span>\n            <input id="upload_input1" type="file" name="myFile" title="{{\'comment.attachment.image.label\'}}" class="_upload_input">\n        </span>\n        <span class="file" data-selector="File">\n            <span class="ico_i_file">{{\'comment.attachment.file.label\'}}</span>\n            <input id="upload_input2" type="file" name="myFile" title="{{\'comment.attachment.file.label\'}}" class="_upload_input">\n        </span>\n        <span class="katex" data-plugin="Katex">\n            <button type="button" data-markup=".sub_modal" class="btn bdnone ico_i_katex">{{\'comment.attachment.math.label\'}}</button>\n        </span>\n    </div>\n    <div class="btn_area_r">\n        <% if (isUsingHiddenComment) { %>\n        <span class="check_group" data-btn="private">\n            <label class="ick fs12" data-ychecker="">\n                <span class="checkbox"><input type="checkbox" data-checkbox="secret"></span>\n                <span class="ph">{{\'default.button.private.label\'}}</span>\n                <div class="bubb top" data-wrap="tooltip" style="display:none;top:25px;right:-14px;">\n                    <span class="arrow" style="right:27px"></span>\n                    <p data-secret-notify></p>\n                </div>\n            </label>\n        </span>\n        <% } %>\n        <button type="button" class="btn btn_type1" data-btn="cancel">{{\'default.button.cancel.label\'}}</button>\n        <button type="button" class="btn btn_type1 on" data-btn="save">{{\'default.button.save.label\'}}</button>\n    </div>\n</div>\n<div class="sub_modal math" style="display:none" data-wrap="katex">\n</div>'},{}],52:[function(a,b,c){var d=(a("../system.config.js"),a("../common/application/template.manager.js"));!function(b,c,e,f){function g(a,c){this.$el=b(a),this.options=b.extend({},i,c),this._defaults=i,this._name=h,this.$modal=b(this.options.modal),this.$modal.html(j()),this.init()}var h="NKatex",i={modal:"[data-wrap=katex]"},j=_.template(d.applyI18n(a("./template/NKatex.html")));b.extend(g.prototype,{init:function(){this.$addBtn=this.$modal.find("[data-btn=add]"),this.$closeBtn=this.$modal.find(".ico_clse"),this.$input=this.$modal.find("textarea"),this.$output=this.$modal.find(".math_preview"),this.$el.on("click",b.proxy(this._onClickIconBtn,this)),this.$input.on("keyup",b.proxy(this._onKeyupInput,this)),this.$input.on("click",b.proxy(this._onClickInput,this)),this.$addBtn.on("click",b.proxy(this._onClickAddBtn,this)),this.$closeBtn.on("click",b.proxy(this._onClickCloseBtn,this)),b(e.body).on("HIDE_MINI_EDITOR_LAYER",b.proxy(this._onClickCloseBtn,this))},renderKatex:function(a){try{katex.render(a,this.$output.get(0))}catch(b){}},_onClickIconBtn:function(a){""!==this.$input.val()&&(this.$input.val(""),this.$output.html("")),this.$modal.show(),this.$input.focus(),this.isModify=!1,this.$el.trigger("opened",function(a){this.isModify=!0,a&&(this.$input.val(a),this.renderKatex(a))}.bind(this)),a.stopPropagation()},_onKeyupInput:function(){var a=this.$input.val();this.renderKatex(a)},_onClickInput:function(a){a.stopPropagation()},_onClickAddBtn:function(){var a=b(this.$output.html()),c=this.$input.val();c&&a.text()&&""!==b.trim(a.text())&&(a.find(".katex-mathml").html(c),a.find(":empty").html('<span style="display:none;">&nbsp;</span>'),a.attr("contentEditable","false"),this.isModify?this.$el.trigger("add",a[0].outerHTML):this.$el.trigger("add","&nbsp;"+a[0].outerHTML+"&nbsp;")),this._onClickCloseBtn()},_onClickCloseBtn:function(a){this.$modal.is(":visible")&&(this.$modal.hide(),this.$el.trigger("closed"))}}),b.fn[h]=function(a){return this.each(function(){b.data(this,"plugin_"+h)||b.data(this,"plugin_"+h,new g(this,a))})}}(jQuery,window,document)},{"../common/application/template.manager.js":14,"../system.config.js":63,"./template/NKatex.html":59}],53:[function(a,b,c){!function(a,b,c,d){function e(b,c){this.element=b,this.$element=a(this.element),this.options=a.extend({},g,c),this._welLoader=null,this.init()}var f="NLoader",g={message:"",template:'<div class="loading mat20" style="display:none;"><span class="step1" data-selector="sprites"><strong data-selector="message"></strong></span></div>'};a.extend(e.prototype,{init:function(){g.message=a.i18n.prop("jquery.plugin.nloader.loading.message"),this._welLoader=a(this.options.template),this._welSprites=this._welLoader.find('[data-selector="sprites"]'),this._welMessage=this._welLoader.find("[data-selector='message']"),this._currentFrameIndex=1,this._lastFrameIndex=24,this._frameTid=null,this._frameRate=35,this._update(),this._injectLoader()},_update:function(){this._updateHeight(),this._updateMode(),this._updateMessage()},_updateHeight:function(){this.options.height&&this._welLoader.height(this.options.height)},_updateMessage:function(){this.options.message&&this._welMessage.text(this.options.message)},_addMiniMode:function(){this._welLoader.addClass("type2"),this._welMessage.hide()},_removeMiniMode:function(){this._welLoader.removeClass("type2")},_showMessage:function(){this._welMessage.css("display","block")},_transformToNormalMode:function(){this._removeMiniMode(),this._removeFullscreenMode(),this._showMessage()},_updateMode:function(){switch(this._transformToNormalMode(),this.options.mode){case"fullscreen":this._addFullscreenMode();break;case"mini":this._addMiniMode()}},_addFullscreenMode:function(){this._welLoader.addClass("fullscreen"),this._welLoader.removeClass("mat20")},_removeFullscreenMode:function(){this._welLoader.removeClass("fullscreen"),this._welLoader.addClass("mat20")},_injectLoader:function(){this.$element.is(c)?this.$element.find("body").append(this._welLoader):this.$element.append(this._welLoader)},_nextFrame:function(){this._welSprites.removeClass().addClass("step"+this._currentFrameIndex),this._currentFrameIndex++},_isEndFrame:function(){return this._currentFrameIndex===this._lastFrameIndex},_goFirstFrame:function(){this._currentFrameIndex=1},_rotateLoader:function(){this._nextFrame(),this._isEndFrame()&&this._goFirstFrame()},_startTick:function(){this._frameTid=setInterval(a.proxy(this._rotateLoader,this),this._frameRate)},_clearTick:function(){clearInterval(this._frameTid)},showLoader:function(){this._clearTick(),this._startTick(),this._welLoader.show()},hideLoader:function(){this._clearTick(),this._welLoader.hide()},changeOptions:function(a){this.options=a,this._update()}}),a.fn[f]=function(b){if(!a(this).data(f)||b)return this.each(function(){if(!a.data(this,f))return void a.data(this,f,new e(this,b));b&&a(this).data(f).changeOptions(b)})},a.fn.showLoader=function(b){return this[f](b),this.each(function(){a(this).data(f).showLoader()}),this},a.fn.hideLoader=function(b){return this[f](b),this.each(function(){a(this).data(f).hideLoader()}),this}}(jQuery,window,document)},{}],54:[function(a,b,c){!function(a){function b(a){this.initialize.apply(this,[a])}var c={container:"#_modal_wrap",content:"",center:!0};b.prototype={initialize:function(b){this.configs=a.extend({},c,b),this.wrap_modal_element=a(this.configs.container),this.wrap_container=this.wrap_modal_element.find("*[data-md-content]"),this.wrap_dimmed=this.wrap_modal_element.find("*[data-md-dimmed]"),this.custom_events=[],b.content&&this.changeContents(b)},attachEvent:function(){this.wrap_modal_element.on("click","*[data-md-close]",a.proxy(this._onClose,this)),this.$onKeyDown||(this.$onKeyDown=a.proxy(this._onKeyDown,this)),a(window).on("keydown",this.$onKeyDown)},_onKeyDown:function(a){27===a.keyCode&&this.close()},_onClose:function(){this.close()},changeContents:function(a){this.wrap_container.html(a.content)},initDraggable:function(){this.wrap_drag_handler=this.wrap_modal_element.find("*[data-md-drag]"),this.wrap_drag_handler.length>0&&this.wrap_drag_handler.draggable&&this.wrap_container.draggable({handle:"*[data-md-drag]",scroll:!1})},calcPosition:function(){if(!1===this.configs.center)return!1;var b=a(window).height()/2,c=this.wrap_container.children().outerHeight()/2;this.wrap_container.css("top",b-c+"px")},clearCustomEvent:function(){_.each(this.custom_events,a.proxy(function(a){this.wrap_modal_element.off(a[0],a[1])},this)),this.custom_events=[]},open:function(a){return a&&a.withoutChange||this.changeContents(this.configs),this.wrap_modal_element.css("display","block"),this._bodyScrollLock(),this.calcPosition(),this.attachEvent(),this},_bodyScrollLock:function(){a("body").addClass("hidden_scroll")},_bodyScrollUnlock:function(){a("body").removeClass("hidden_scroll")},when:function(b){return _.each(_.pairs(b),a.proxy(function(a){var b=a[0].split(/\s/),c=a[1];b[1]?(this.wrap_modal_element.off(b[0],b[1],c),this.wrap_modal_element.on(b[0],b[1],c)):(this.wrap_modal_element.off(b[0],c),this.wrap_modal_element.on(b[0],c)),this.custom_events.push(b)},this)),this},change:function(b){return this.configs=a.extend({},c,b),this.changeContents(b),this.calcPosition(),this.clearCustomEvent(),this},close:function(){return this.wrap_modal_element.hide(),this.wrap_modal_element.trigger("close"),a(window).off("keydown",this.$onKeyDown),this.$onKeyDown=void 0,0===a(".modal_wrap:visible").length&&this._bodyScrollUnlock(),this},reposition:function(){this.calcPosition()},getElement:function(){return this.wrap_modal_element}},a.modal=function(a){return new b(a)},a.popup=function(a){return new b(a)}}(jQuery)},{}],55:[function(a,b,c){!function(a,b,c,d){function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="page_navigation",g={current_page_index:1,page_count:10,count_per_page:10,total_item_count:0};a.extend(e.prototype,{init:function(){this._assignElement(),this._dynamicAttachEvent(),this.numberOfPages=Math.ceil(this.settings.total_item_count/this.settings.count_per_page),this.settings.current_page_index>this.numberOfPages&&(this.settings.current_page_index=this.numberOfPages),this.renderPageNavi(),this.activatePage(this.settings.current_page_index)},_assignElement:function(){var b=a(this.element);this.elements={btn_first:b.find("*[data-pg-first]"),btn_prev:b.find("*[data-pg-prev]"),number_list:b.find("*[data-pg-number]"),btn_next:b.find("*[data-pg-next]"),btn_last:b.find("*[data-pg-last]")}},_dynamicAttachEvent:function(){a(this.element).on("click","*[data-pg-number] a:not(.selected)",a.proxy(this.onClickPageNumberHandler,this))},resetPageNavi:function(b){this.prevBlock=0,this.settings=a.extend({},g,b),this.numberOfPages=Math.ceil(this.settings.total_item_count/this.settings.count_per_page),this.settings.current_page_index>this.numberOfPages&&(this.settings.current_page_index=this.numberOfPages),this.renderPageNavi(),this.activatePage(this.settings.current_page_index)},renderPageNavi:function(){this.checkPageNavi(),this.renderPageNumber(),this.checkPageButtons(),this.checkPageNumbers()},checkPageNavi:function(){var b=a(this.element);0===this.numberOfPages?b.hide():b.show()},renderPageNumber:function(){var a=[],b=Math.ceil(this.settings.current_page_index/this.settings.page_count);if(this.prevBlock==b)return!1;var c=(b-1)*this.settings.page_count+1,d=c+this.settings.page_count-1;d>this.numberOfPages&&(d=this.numberOfPages);for(var e=c;e<=d;e++){var f=_.template("<li><a href='#' data-pg-number='<%= pageNumber %>'><%= pageNumber %></a></li>",{pageNumber:e});a.push(f)}var g=a.join("");this.elements.number_list.html(g),this.prevBlock=b},checkPageButtons:function(){1!==this.settings.current_page_index?this.enableButton(this.elements.btn_first,a.proxy(this.firstPageList,this)):this.disableButton(this.elements.btn_first,a.proxy(this.firstPageList,this)),this.settings.current_page_index-1>=1?this.enableButton(this.elements.btn_prev,a.proxy(this.prevPageList,this)):this.disableButton(this.elements.btn_prev,a.proxy(this.prevPageList,this)),this.settings.current_page_index+1<=this.numberOfPages?this.enableButton(this.elements.btn_next,a.proxy(this.nextPageList,this)):this.disableButton(this.elements.btn_next,a.proxy(this.nextPageList,this)),this.settings.current_page_index!==this.numberOfPages?this.enableButton(this.elements.btn_last,a.proxy(this.lastPageList,this)):this.disableButton(this.elements.btn_last,a.proxy(this.lastPageList,this))},checkPageNumbers:function(){var b=this.settings.current_page_index%this.settings.page_count-1;this.elements.number_list.find("a.selected").removeClass("selected"),this.elements.number_list.find(".sr_only").remove();var c=_.template("<span class='sr_only'><%= TextSelectedPage %></span>",{TextSelectedPage:a.i18n.prop("pagenavi.current.page.message")});this.elements.number_list.find("li").eq(b).find("a").addClass("selected").append(c)},activatePage:function(a){this.renderPageNavi()},onClickPageNumberHandler:function(b){var c=a(b.currentTarget).data("pg-number");this.settings.current_page_index=c,this.renderPageNavi(),a(this.element).trigger("CHANGE_PAGE",[this.settings.current_page_index]),b.preventDefault()},enableButton:function(b,c){var d=a(this.element);d.off("click",b.selector,c),d.on("click",b.selector,c),b.removeClass("disabled")},disableButton:function(b,c){var d=a(this.element);d.off("click",b.selector,c),d.on("click",b.selector,function(a){a.preventDefault()}),b.addClass("disabled")},prevPageList:function(a){this.settings.current_page_index--,this._triggerChangePageEvent(),a.preventDefault()},nextPageList:function(a){this.settings.current_page_index++,this._triggerChangePageEvent(),a.preventDefault()},firstPageList:function(a){this.settings.current_page_index=1,this._triggerChangePageEvent(),a.preventDefault()},lastPageList:function(a){this.settings.current_page_index=this.numberOfPages,this._triggerChangePageEvent(),a&&a.preventDefault()},changePage:function(a){a>this.numberOfPages&&(a=this.numberOfPages),this.settings.current_page_index=a,this._triggerChangePageEvent()},getConfig:function(a){return this.settings[a]},on:function(b,c){a(this.element).on(b,c)},_triggerChangePageEvent:function(){this.activatePage(this.settings.current_page_index),a(this.element).trigger("CHANGE_PAGE",[this.settings.current_page_index])}}),a.fn[f]=function(b){var c=null;return this.each(function(){a.data(this,"plugin_"+f)||(c=new e(this,b),a.data(this,"plugin_"+f,c))}),c}}(jQuery,window,document)},{}],56:[function(a,b,c){!function(b,c,d,e){function f(a,c){this.element=a,this.$element=b(a),this.settings=b.extend({baseUrl:""},j,c),this.data={courseId:this.$element.data("course-id"),postId:this.$element.data("post-id"),postType:this.$element.data("post-type")},this._defaults=j,this._name=i,this.init()}var g=a("./../system.config.js"),h=a("./../common/modal/common.modal/index.js"),i="report_plugin",j={};b.extend(f.prototype,{init:function(){this._attachEvent()},getElement:function(){return this.$element},_attachEvent:function(){this.$element.off("click","[data-btn-report]",b.proxy(this._onClickReportHandler,this)),this.$element.on("click","[data-btn-report]",b.proxy(this._onClickReportHandler,this))},_onClickReportHandler:function(a){if(!g.isLoginUser())return void new h({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")});if(g.isGuestUser())return void new h({type:"register"});var c=b(a.currentTarget),d=c.data("course-id"),e=c.data("post-type"),f=c.data("post-id");if(!0===confirm(b.i18n.prop("report.handler.confirm"))){b.post([this.settings.baseUrl,d,"report",f].join("/"),{postType:e,postId:parseInt(f,10)}).success(b.proxy(this._onSuccessHandler,this))}a.preventDefault()},_onSuccessHandler:function(){alert(b.i18n.prop("report.success.handler.alert"))}}),b.fn[i]=function(a){var c=null;return this.each(function(){c=new f(this,a),b.data(this,"plugin_"+i,c)}),c}}(jQuery,window,document)},{"./../common/modal/common.modal/index.js":18,"./../system.config.js":63}],57:[function(a,b,c){!function(b,c,d,e){function f(a,c){this.element=a,this.$element=b(a),this.settings=b.extend({baseUrl:""},j,c),this._defaults=j,this._name=i,this.init()}var g=a("./../system.config.js"),h=a("./../common/modal/common.modal/index.js"),i="vote_plugin",j={};b.extend(f.prototype,{init:function(){this._attachEvent()},getElement:function(){return this.$element},_attachEvent:function(){this.$element.off("click","[data-btn-vote]",b.proxy(this._onClickVoteHandler,this)),this.$element.on("click","[data-btn-vote]",b.proxy(this._onClickVoteHandler,this))},_onClickVoteHandler:function(a){if(!g.isLoginUser())return void new h({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")});if(!g.IS_SHARE_PARTNER_CODE&&g.isGuestUser())return void new h({type:"register"});this.btnElement=b(a.currentTarget);var c=this.btnElement.data("course-id"),d=this.btnElement.data("post-type"),e=this.btnElement.data("post-id");b.post([this.settings.baseUrl,c,"vote",e].join("/"),{postType:d,postId:parseInt(e,10)}).success(b.proxy(this._onSuccessHandler,this)),a.preventDefault()},_onSuccessHandler:function(a){var b=a.data.voteCount,c=a.data.isVoted,d="";0===b?d=this.btnElement.data("live")?"0":"":b>0&&(d=b),this.btnElement.find("[data-vote-count]").text(d),c?this.btnElement.addClass("on"):this.btnElement.removeClass("on")}}),b.fn[i]=function(a){var c=null;return this.each(function(){c=new f(this,a),b.data(this,"plugin_"+i,c)}),c}}(jQuery,window,document)},{"./../common/modal/common.modal/index.js":18,"./../system.config.js":63}],58:[function(a,b,c){!function(b,c,d,e){function f(a,c){this.options=b.extend({},j,c),this._defaults=j,this._name=i,this.init()}var g=a("./../system.config.js"),h=a("./../common/modal/common.modal/index.js"),i="ychecker",j={propertyName:"value"};b.extend(f.prototype,{init:function(){b(d.body).on("click","[data-ychecker]",b.proxy(this._onClickCheckbox,this)),b(d.body).on("change","[data-ychecker]",b.proxy(this._onChangeCheckbox,this)),b(d.body).on("checked.ychecker","[data-ychecker]",b.proxy(this._onChangeCheckbox,this))},_onClickCheckbox:function(a){if("quiz"===a.currentTarget.dataset.ychecker||"poll"===a.currentTarget.dataset.ychecker){if(!g.isLoginUser())return a.preventDefault(),new h({type:"login",returnUrl:"/login?returnUrl="+location.href.replace(/^.*\/\/[^\/]+/,"")}),void a.stopPropagation();if(g.isGuestUser())return a.preventDefault(),new h({type:"register"}),void a.stopPropagation()}this.$element=b(a.currentTarget);var c=this._getCheckerElement();!0!==c.prop("disabled")&&(!0===c.prop("checked")?this.checked():this.unchecked(),this._clearRadioChecked(),a.stopPropagation())},_onChangeCheckbox:function(a){this.$element=b(a.currentTarget),this._getCheckerElement().prop("checked")?this.checked():this.unchecked()},checked:function(){this._getCheckerElement().parent().addClass("checked")},unchecked:function(){this._getCheckerElement().parent().removeClass("checked")},_clearRadioChecked:function(){if("radio"===this.$element.find("input").attr("type")){var a=this.$element.find("input").attr("name");b("input[name="+a+"]").trigger("checked.ychecker")}},_getCheckerElement:function(){return this.$element.find(":checkbox").length>0?this.$element.find(":checkbox"):this.$element.find(":radio")}}),b.fn[i]=function(a){return this.each(function(){b.data(this,"plugin_"+i)||b.data(this,"plugin_"+i,new f(this,a))})}}(jQuery,window,document)},{"./../common/modal/common.modal/index.js":18,"./../system.config.js":63}],59:[function(a,b,c){b.exports='\x3c!-- #breadcrumb:plugin/template/NKatex.html --\x3e\n<h5 class="tit">{{\'quiz.katex.label\'}}<a href="/help/navigator?helpName=MATH_SYMBOL" target="_blank" title="{{\'default.help.label\'}}" class="ico_help2">{{\'default.help.label\'}}</a></h5>\n<div class="inner">\n    <label class="it stretch">\n        <span class="ph">{{\'quiz.input.katex.message\'}}</span>\n        <textarea cols="30" rows="5" style="height:66px" data-global-placeholder=".ph"></textarea>\n    </label>\n    <div class="math_preview"></div>\n    <div class="ta_r mat20"><button type="button" data-btn="add" class="btn btn_type2">{{\'quiz.add.katex.label\'}}</button></div>\n</div>\n<button type="button" class="close ico_clse">{{\'default.button.close.label\'}}</button>\n'},{}],60:[function(a,b,c){a("../plugin/jquery.plugin.pagenavi.js");var d=a("../system.config.js"),e=a("../common/constants/user.role.info.map.js"),f=a("../common/application/template.manager.js"),g=a("../related.forum/related.forum.model.js");b.exports=Backbone.View.extend({__name:"related.forum.js",el:"._warp_lecture_content",template:_.template(f.applyI18n(a("./template/related.forum.item.html"))),initialize:function(a){this.config=_.extend({course:"",lectureId:0,offset:0,max:20},a),this.offset=this.config.offset,this.max=this.config.max,this._assignElements(),this._requestList()},_assignElements:function(){this.elements={forum_count:this.$el.find("#_wrap_forum_count"),forum_list:this.$el.find("._warp_forum_list"),page_navi:this.$el.find("#_wrap_forum_page_navi")}},refresh:function(){this.offset=0,void 0===this.pageNavi?this._requestList():this.pageNavi.changePage(this.offset+1)},_requestList:function(){this.promise=$.ajax({method:"GET",url:d.API+this.config.course+"/forum/lectureRelatedList/"+this.config.lectureId+"?offset="+this.offset*this.max+"&max="+this.max}),this.promise.success($.proxy(this._onSuccess,this))},_onSuccess:function(a){this._setForumData(a.data),0==this.model.get("isPrivateForumMenu")&&(this._setForumCount(this.model.get("forumCount")),this._setForumList(this.model.get("forumList")),void 0===this.pageNavi&&this._initPageNavi(this.model.get("forumCount")))},_initPageNavi:function(a){this.pageNavi=this.elements.page_navi.page_navigation({current_page_index:this.offset+1,page_count:10,count_per_page:this.max,total_item_count:a}),this.pageNavi&&this.pageNavi.on("CHANGE_PAGE",$.proxy(function(a,b){this.offset=b-1,this._requestList()},this))},_setForumData:function(a){this.model=new g(a)},_setForumCount:function(a){this.elements.forum_count.text($.i18n.prop("lecture.detail.related.forum.label",a>0?a:""))},_setForumList:function(a){this._clearForumListArea(),0===a.length?this._renderEmptyForum():this._renderForumList(a)},_clearForumListArea:function(){this.elements.forum_list.html("")},_renderEmptyForum:function(){var a=_.template('<li class="none type4"><p>'+$.i18n.prop("forum.index.page.registered.forum.not.exist.message")+"</p></li>");this.elements.forum_list.html(a)},_renderForumList:function(a){var b=this.template;_.each(a,$.proxy(function(a){a.href="/"+this.config.course+"/forum/"+a.id,a.userRoleInfoMap=e,this.elements.forum_list.append(b(a))},this))}})},{"../common/application/template.manager.js":14,"../common/constants/user.role.info.map.js":16,"../plugin/jquery.plugin.pagenavi.js":55,"../related.forum/related.forum.model.js":61,"../system.config.js":63,"./template/related.forum.item.html":62}],61:[function(a,b,c){b.exports=Backbone.Model.extend({idAttribute:"id",defaults:{forumCount:0,forumList:[]}})},{}],62:[function(a,b,c){b.exports='\x3c!--  #breadcrumb:relate.forum/template/related.forum.item.html --\x3e\n<li <%if(isFocused){%> class="notice" <%}%>>\n    <div class="forum_summary">\n        <a href="<%= href %>" class="title"><%= title %></a>\n        <% if ( filterFlag == "OUTER" ) { %>\n            <div class="user_info edwith">\n        <% } else { %>\n            <div class="user_info">\n        <% } %>\n            <% if(profImageUrl === "" || profImageUrl == null){ %>\n                <div class="thumb">\n                </div>\n            <% }else{ %>\n                <div class="thumb bgnone">\n                    <img src="<%= profImageUrl %>?type=ff64_64" width="32" height="32" alt="">\n                </div>\n            <% } %>\n            <span class="username mal5"><%= nickName %></span>\n            <% if (rolePriority === userRoleInfoMap.ROLE_ASSISTANT) { %>\n            <span class="ic_ad vamiddle">{{\'default.staff.label\'}}</span>\n            <% } else if (rolePriority === userRoleInfoMap.ROLE_PROFESSOR) { %>\n            <span class="ic_ad vamiddle">{{\'default.prof.label\'}}</span>\n            <% } else  if (rolePriority === userRoleInfoMap.ROLE_ADMIN) { %>\n            <span class="ic_ad vamiddle">{{\'default.admin.label\'}}</span>\n            <% } %>\n            <time class="time" datetime="<%= registeredTime %>"><%= registeredTime %></time>\n        </div>\n        <dl class="quick_vote">\n            <dt class="sr_only">{{\'related.forum.like.vote.label\'}}</dt>\n            <dd title={{\'related.forum.like.vote.label\'}}><span class="ico ico_fl_like"></span><span><%= voteCount %></span></dd>\n            <dt class="sr_only">{{\'related.forum.comment.label\'}}</dt>\n            <dd title={{\'related.forum.comment.label\'}}><span class="ico ico_fl_cmt"></span><span><%= commentCount %></span></dd>\n        </dl>\n    </div>\n</li>'},{}],63:[function(a,b,c){function d(a){return $.trim(a.replace(/([^a-zA-Z0-9|\u3131-\u314e|\u314f-\u3163|\uac00-\ud7a3])+/g,""))}function e(a){var b=document.getElementById(a);return b?b.value:null}var f=window.location.protocol+"//"+window.location.host,g="/static/js/vendor/",h="/static/js/src/modules/",i=window.location.host,j=-1!==i.search("local")||-1!==i.search("dev")?"https://pages.oss.navercorp.com/IN-edwith/edwith/css/":"https://ssl.pstatic.net/static/connectfdn/edwith/RB.22.01.27.0/css/",k=a("./tinymce.custom.buttons/link/plugin.js"),l=a("./tinymce.custom.buttons/codetext/plugin.js");b.exports={DOMAIN:f,API:f+"/",BASE_PATH:"/static/js/src/",CSS:j,JS:h,VENDOR:g,PARTNER_CODE:e("__PARTNER_CODE")||"",PARTNER_COLOR:e("__PARTNER_COLOR")||"",ADMIN_PARTNER_CODE:e("__ADMIN_PARTNER_CODE")||"",IS_SHARE_PARTNER_CODE:Boolean("true"===(e("__IS_SHARE_PARTNER_CODE")||"").toString()),IS_PRIVATE_PARTNER:Boolean("true"===(e("__IS_PRIVATE_PARTNER")||"").toString()),IS_BOOST_COURSE_PARTNER:Boolean("true"===(e("__IS_BOOST_COURSE_PARTNER")||"").toString()),IS_WHALE_CLASS:Boolean("true"===(e("__IS_WHALE_CLASS")||"").toString()),IS_BIZ_CLASS:Boolean("true"===(e("__IS_BIZ_CLASS")||"").toString()),IS_MOBILE:Boolean("true"===(e("__IS_MOBILE")||"").toString()),RMC_PROXY_DOMAIN:("https://"+location.host).replace("local","dev"),FILEUPLOAD_DOMAIN:e("__FILEUPLOAD_DOMAIN")||"",FILEUPLOAD_ENDPOINT:e("__FILEUPLOAD_ENDPOINT")||"",LOCALE_LANGUAGE:e("__LOCALE_LANGUAGE"),I18N_RESOURCES_PATH:e("__I18N_RESOURCES_PATH"),COURSE_URI:e("__COURSE_URI_PATH"),COURSE_ID:e("__COURSE_ID"),CONTROLLER_TYPE:e("__CONTROLLER_TYPE"),USER_INFO:{USER_ROLE:e("__USER_ROLE")||"ROLE_GUEST",USER_PRIORITY:e("__USER_PRIORITY")||"1",USER_ID:e("__USER_ID")||""},DATE:{COURSE_OPEN_DAY:e("__COURSE_OPEN_DAY"),COURSE_CLOSE_DAY:e("__COURSE_CLOSE_DAY"),CURRENT_DATE:e("__CURRENT_DATE")},DATEPICKER_DEFAULT_OPTION:{dateFormat:"yy.mm.dd",prevText:" ",nextText:" ",monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],showMonthAfterYear:!0,showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,yearSuffix:"&nbsp;",constrainInput:!0,minDate:e("__CURRENT_DATE")},GITLAB_URL:e("__GITLAB_URL"),EDWITH_PC_URL:e("__EDWITH_PC_URL"),EDWITH_API_URL:e("__EDWITH_API_URL"),CBOX_STATIC_DOMAIN:e("__CBOX_STATIC_DOMAIN"),CBOX_API_DOMAIN:e("__CBOX_API_DOMAIN"),CBOX_TICKET:e("__CBOX_TICKET"),STANDBY_CAMPAIGN_DOMAIN:e("__STANDBY_CAMPAIGN_DOMAIN"),TINYMCE_EDITOR_DEFAULT_OPTION:{menubar:!1,theme:"modern",style_formats:[{title:"1",inline:"span",styles:{"font-size":"24pt"}},{title:"2",inline:"span",styles:{"font-size":"18pt"}},{title:"1",inline:"span",styles:{"font-size":"14pt"}},{title:"2",inline:"span",styles:{"font-size":"12pt"}},{title:"",inline:"span",styles:{"font-size":"10pt"}}],codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"swift",value:"swift"}],plugins:["quick_image_uploader","quick_file_uploader","textcolor","code","preview","katex","hr","paste","link","autolink","lists"],paste_data_images:!0,pluginsPath:h+"tinymce.plugins",toolbar:"styleselect | bold italic forecolor | bullist numlist indent outdent hr | alignleft aligncenter alignright | clink | quick_file_uploader quick_image_uploader katex",content_css:g+"katex/katex.min.css",content_style:"* + p { margin: 10px 0 0!important; } * p:first-child { margin: 0; } * + ul, * + ol { margin: 10px 0 0; }",skin_url:j+"tinymce_skin",invalid_elements:"button, input, video, audio, style, link, script, iframe, frameset, object",statusbar:!1,inline:!1,keep_styles:!1,language:"ko_KR",relative_urls:!1,setup:function(b){var c=$("#"+b.id),d=c.attr("placeholder");if(void 0!==d&&!1!==d){var e='<p class="ph" data-selector="placeholder">'+d+"</p>";b.on("init blur",function(){b.isEmpty()&&b.setContent(e)})}b.on("focus",function(){b.isEmpty()&&b.setContent(""),$(document).trigger("DOCUMENT_CLICKED"),$(document.body).trigger("DOCUMENT_CLICKED"),$(document.body).trigger("HIDE_LAYER")}),b.isEmpty=function(c){return a("./common/helper/util.js").isEditorContentEmpty(b.getContent(),c)},b.on("BeforeSetContent",function(a){var b=$("<div>"+a.content+"</div>");f(b);var c=b.html();a.content=c.toString()});var f=function(a){_.forEach(a,function(a){var b=$(a),c=a.tagName.toLocaleLowerCase();"placeholder"===b.data("selector")||b.hasClass("katex")||"pre"===c&&a.className&&-1!==a.className.indexOf("language-")||b.hasClass("mce_video")||(b.attr("align")&&b.css("text-align",b.attr("align")),b.removeAttr("class title align"),g(b,a,c),b.children().length&&f(b.children()))})},g=function(a,c,d){if(d){var e=["h5","h4","h3","h2","h1","h6"].indexOf(d.toLocaleLowerCase());if(-1!==e){var f=b.getParam("style_formats")[e>4?0:e],g=$("<p>");_.forEach(c.style,function(a){g.css(a,c.style[a])});var h=$("<"+f.inline+">").css(f.styles).append($("<strong>").html(a.html()));a.replaceWith(g.append(h))}}};k.initCustomMCELinkButton(b),l.initCustomCodeTextButton(b),a("./tinymce.plugins/codesample/prism_extension.js").syncPrism()},images_upload_handler:function(a,b,c){var d=e("__FILEUPLOAD_ENDPOINT"),f=new XMLHttpRequest;f.withCredentials=!0,f.open("POST",d),f.onload=function(){var a;a=JSON.parse(f.responseText),b(a.data.url)};var g=new FormData;g.append("myFile",a.blob(),a.filename()),g.append("commonYn",!1),f.send(g)}},CHOSEN_DEFAULT_OPTION:{disable_search_threshold:999999},VALIDATE_DEFAULT_OPTION:{onkeyup:!1,onclick:!1,validClass:"sts_valid",errorClass:"sts_error",errorPlacement:function(a,b){a.insertAfter(b.closest(".it, [data-checkpassword-wrap]"))},unhighlight:function(a,b,c){var d=$(a);"password"===a.type&&$.validator.methods.errorMessage&&""!==$.validator.methods.errorMessage||d.removeClass(b).addClass(c)},highlight:function(a,b,c){$(a).removeClass(c).addClass(b)},success:function(a,b){var c=$(b)
;"password"===b.type&&$.validator.methods.errorMessage&&""!==$.validator.methods.errorMessage&&c.removeClass("sts_valid").addClass("sts_error")}},VALIDATE_PASSWORD_SIMPLE_OPTION:{onkeyup:!1,onclick:!1,validClass:"sts_valid",errorClass:"sts_error",errorPlacement:function(a,b){a.insertAfter(b.closest(".it, [data-checkpassword-wrap]"))},unhighlight:function(a,b,c){var d=$(a);$.validator.methods.errorMessage&&""!==$.validator.methods.errorMessage||d.closest(".it, [data-checkpassword-wrap]").removeClass(b).addClass(c)},highlight:function(a,b,c){$(a).closest(".it, [data-checkpassword-wrap]").removeClass(c).addClass(b)},success:function(a,b){var c=$(b);$.validator.methods.errorMessage&&""!==$.validator.methods.errorMessage&&c.closest(".it, [data-checkpassword-wrap]").removeClass("sts_valid").addClass("sts_error")}},SCORE_DEFAULT_OPTION:{step:1,min:1,max:1e3,visibleButtons:!1},TAG_IT_DEFAULT_OPTIONS:{fieldName:"tags",allowSpaces:!0,tagLimit:20,preprocessTag:function(a){if(!a)return"";var b=d(a),c=20;return b.length>c&&(b=b.substr(0,c)),d(b)}},FACEBOOK:function(a){var b="https://"+window.location.hostname,c=b+a;FB.api("https://graph.facebook.com/","post",{id:c,scrape:!0},function(a){})},FILEUPLOAD_ACCEPT_LIST:function(a){switch(a){case"doc":case"file":default:return["pdf","pptx","ppt","docx","doc","hwp","xls","xlsx","xlsm","accdb","txt","swift","py","csv","zip","apk","rar","7z","tar","alz","mp3","aac","wma","wmv","tif"]}},isLoginUser:function(){return""!==this.USER_INFO.USER_ID},isGuestUser:function(){return Number(this.USER_INFO.USER_PRIORITY)<2},isManager:function(){return Number(this.USER_INFO.USER_PRIORITY)>2},isShareTutor:function(){return this.IS_SHARE_PARTNER_CODE&&3===Number(this.USER_INFO.USER_PRIORITY)},isSharePartnerAssociation:function(){return"NAVERCORP"===this.PARTNER_CODE||"LDCLASS"===this.PARTNER_CODE},isBizClassPartner:function(){return"BIZCLASS"===this.PARTNER_CODE},CODE_MIRROR_LANGUAGE_MODE:{PYTHON:"text/x-python",RUBY:"text/x-ruby",CLOJURE:"text/x-clojure",PHP:"application/x-httpd-php",JAVASCRIPT:"text/javascript",JSON:"application/json",SCALA:"text/x-scala",GO:"text/x-go",CPP:"text/x-c++src",JAVA:"text/x-java",VBNET:"text/x-vb",CSHARP:"text/x-csharp",BASH:"text/x-sh",OBJECTIVEC:"text/x-objectivec",SQL:"text/x-sql",MYSQL:"text/x-mysql",PERL:"text/x-perl",SWIFT:"text/x-swift",XML:"application/xml",HTML:"text/html",CSS:"text/css",SASS:"text/x-sass",LESS:"text/x-less",GROOVY:"text/x-groovy",DTD:"application/xml-dtd",MARKDOWN:"text/x-markdown",YAML:"text/x-yaml",COFFEESCRIPT:"text/x-coffeescript",TYPESCRIPT:"text/typescript",ERLANG:"text/x-erlang",R:"text/x-rsrc",DOCKERFILE:"text/x-dockerfile",JSP:"application/x-jsp"},getCodeMirrorLanguageMode:function(a){var b=this.CODE_MIRROR_LANGUAGE_MODE[a];return b||"clike"},FILE_DOWNLOAD_OPTION:{httpMethod:"GET",prepareCallback:function(a){$(document).showLoader({mode:"fullscreen"})},successCallback:function(a){$(document).hideLoader()},failCallback:function(a,b,c){$(document).hideLoader(),alert(" .    .")}},getTimelineTypeLabel:function(a){switch(a){case"FORUM":return"";case"FORUM_COMMENT":case"LECTURE":return"";default:return a}},getStandbyCampaignDomain:function(){var a=window.location.hostname;return-1==a.search("local")&&-1==a.search("dev")&&-1==a.search("qa")?"https://standby-campaign.naver.com/edwith/videoLog/":"https://dev-standby-campaign.naver.com/edwith/videoLog/"}}},{"./common/helper/util.js":17,"./tinymce.custom.buttons/codetext/plugin.js":64,"./tinymce.custom.buttons/link/plugin.js":65,"./tinymce.plugins/codesample/prism_extension.js":66}],64:[function(a,b,c){b.exports={initCustomCodeTextButton:function(a){var b,c=function(a){return a&&"PRE"===a.nodeName&&-1!==a.className.indexOf("language-")};a.on("blur",function(){return!b}),a.on("KeyDown",function(a){return!(b&&13===a.keyCode)}),a.on("ObjectSelected",function(a){b||(b=c(a.target))}),a.on("SelectionChange",function(){b&&(!a.selection.isCollapsed()&&c(a.selection.getNode())||(b=!1))}),a.on("dblclick",function(c){b&&a.execCommand("codetext")}),a.addCommand("codetext",function(){a.buttons.codetext.onclick()}),a.addButton("codetext",{title:"",tooltip:"",minHeight:260,onclick:function(){function b(){c(),d(),e()}function c(){a.windowManager&&(a.windowManager.close(),$(".sub_modal").hide())}function d(){a.execCommand("codesample",!0)}function e(){var b=a.windowManager.getWindows()[0];if(!b)return a.formatter.remove("code"),a.selection.collapse(),d(),void e();var c=a.editorContainer,f=$("#mce-modal-block"),g=$(c),h=parseInt(g.width()-16),i=Math.max(parseInt(g.height()-16),260),j=i-130,k=j-84,l=$(b.$el[0]),m=$(l.find("textarea")),n=$($(l.find(".mce-i-remove")).parent("button")),o=$(l.find(".mce-dragh")),p=$(l.find(".mce-title")),q=$(l.find("button")),r=$(l).find(".mce-foot"),s=$(r.find(".mce-widget.mce-first")),t=$(r.find(".mce-widget.mce-last"));b.resizeTo(h,i),f.remove(),o.remove(),n.remove(),p.text(" "),g.css("position","relative"),l.css({position:"absolute",top:"8px",left:"8px"}),g.before(l),l.find(".mce-label").hide(),l.find(".mce-listbox").css("left","0"),l.find(".mce-formitem").css("height","34px"),l.find(".mce-formitem .mce-abs-layout").css("height","34px"),l.find(".mce-formitem .mce-btn").css("height","32px"),l.find(".mce-container-body.mce-window-body.mce-abs-layout").css("height",j+"px"),r.css("border","0"),q.css({padding:"0 15px"}),s.find(".mce-txt").text("").css({color:"#010101","font-weight":"normal"}),s.css({left:"auto",right:"85px",width:"auto",height:"32px","background-color":"#fff",border:"1px solid #010101"}),t.find(".mce-txt").text("").css({color:"#fff","font-weight":"normal"}),t.css({left:"auto",right:"19px",width:"auto",height:"32px","background-color":"#89888e",border:"1px solid #89888e"}),m.on("keydown",function(a){a.stopPropagation()}).css({top:"64px","border-radius":"0",height:k+"px"}),s.on("click",function(a){var b=$(a.currentTarget);b.find(".mce-caret");if(""===m.val().trim())return alert(" ."),!1}),$(window).off("resize"),$(window).on("resize",function(){l.css({position:"absolute",top:"8px",left:"8px"})})}b()}})}}},{}],65:[function(a,b,c){b.exports={initCustomMCELinkButton:function(a){a.addButton("clink",{title:"",tooltip:"",icon:"link",minHeight:200,onclick:function(b){function c(){d(),e(),f()}function d(){a.windowManager&&(a.windowManager.close(),$(".sub_modal").hide())}function e(){a.execCommand("mceLink",!0)}function f(){var b=a.editorContainer,c=a.windowManager.getWindows()[0],d=$(b),e=$(c.$el[0]),f=$("#mce-modal-block"),g=$(e.find(".mce-dragh")),h=$(e.find(".mce-close")),i=$(e.find(".mce-title")),j=$(e.find(".mce-abs-layout")),k=$(j.find(".mce-formitem")),l=$(e.find("button")),m=$(e.find(".mce-foot")),n=$(m.find(".mce-widget.mce-first")),o=$(m.find(".mce-widget.mce-last")),p=0;$(d.parent("div")).css("position","relative").after(e),p=d.width()-458,f.remove(),g.remove(),h.remove(),i.text(" "),e.css({top:"8px",left:p+"px",width:"450px",height:"226px",border:"solid 1px #d1d1d1",position:"absolute"}),j.css({width:"100%",height:"98px"}),e.find(".mce-formitem:gt(1)").remove(),e.find(".mce-first.mce-last").css("width","100%"),k.css({left:"0",width:"100%",padding:"0 19px","box-sizing":"border-box"}),k.find("input").css({width:"100%",padding:"0 16px","box-sizing":"border-box","border-radius":"0",border:"1px solid #d7d7d7"}),k.find("label").remove(),e.find(".mce-combobox").css({left:"0",width:"100%"}),e.find(".mce-textbox").css({left:"0"}),m.css({width:"100%",border:"0","border-radius":"0"}),l.css({padding:"0 15px"}),o.find(".mce-txt").text("").css({color:"#fff","font-weight":"normal"}),o.css({left:"auto",right:"19px",width:"auto",height:"32px",background:"#89878e",border:"1px solid #89878e"}),n.find(".mce-txt").text("").css({color:"#000","font-weight":"normal"}),n.css({left:"auto",right:"85px",width:"auto",height:"32px",background:"#fff",border:"1px solid #000"}),k.eq(0).prepend('<span class="input_placeholder" data-type="url">URL </span>'),k.eq(1).prepend('<span class="input_placeholder" data-type="text"> </span>');for(var q=0;q<k.find("input").length;q++){var r=$(k.find("input")[q]),s=r.val(),t=$(r.parents(".mce-formitem")).find(".input_placeholder");""!=s&&t.hide()}$(".input_placeholder").on("click",function(a){var b=$(a.target);$(b.parents(".mce-formitem")).find("input").focus()}),k.find("input").on("keydown",function(){var a=k.find(".input_placeholder"),b=$($(this).parents(".mce-formitem")).find(".input_placeholder"),c=$(k.find("input")[1]);"url"===b.data("type")&&""!==c.val()?a.hide():b.hide()}),k.find("input").on("focus",function(){$($(this).parents(".mce-formitem")).find(".input_placeholder").hide()}),k.find("input").on("blur",function(a){var b=$(a.target),c=k.find(".input_placeholder"),d=$($(this).parents(".mce-formitem")).find(".input_placeholder");""===b.val()&&"url"===d.data("type")?c.show():""===b.val()&&d.show()}),$(window).off("resize"),$(window).on("resize",function(){e.css({top:"8px",left:p+"px",width:"450px",height:"226px",border:"solid 1px #d1d1d1",position:"absolute"})})}c()}})}}},{}],66:[function(a,b,c){var d=a("../../../../bower_components/tinymce/plugins/codesample/plugin.js"),e=a("../../../lib/prism.js");b.exports={syncPrism:function(){d&&_.each(e,function(a,b){d[b]=a})}}},{"../../../../bower_components/tinymce/plugins/codesample/plugin.js":2,"../../../lib/prism.js":3}],67:[function(a,b,c){var d=a("../../common/helper/util.js"),e=a("../../system.config.js");b.exports={attachPlugin:function(){$(document.body).prepend('<link rel="stylesheet" href="'+e.VENDOR+'katex/katex.min.css" type="text/css">'),tinymce.PluginManager.add("katex",function(a,b){a.on("BeforeSetContent",function(a){var b=$("<div>"+a.content+"</div>"),c=b.find("span.katex"),d=c.not('[contentEditable="false"]').attr("contentEditable","false"),e=c.find(":empty").html('<span style="display:none;">&nbsp;</span>');(d.length||e.length)&&(a.content=b.html().toString())});var c,f=function(a){return a&&"SPAN"===a.nodeName&&-1!==a.className.indexOf("katex")};a.on("blur",function(){if(c)return setTimeout(function(){a.isKatexOpened||a.selection.collapse()},100),!1}),a.on("KeyDown",function(a){return!(c&&13===a.keyCode)}),a.on("ObjectSelected",function(a){c||(c=f(a.target))}),a.on("SelectionChange",function(){c&&(!a.selection.isCollapsed()&&f(a.selection.getNode())||(c=!1))}),a.on("dblclick",function(b){c&&a.execCommand("katex")}),a.addCommand("katex",function(){a.buttons.katex.onclick()}),a.addCommand("mceKatex",function(){}),a.addButton("katex",{title:"",tooltip:"",icon:"katex",minHeight:240,onclick:function(b){var c=$(a.editorContainer).closest(".mce_editor").parent();if(0!==c.length){a.execCommand("mceKatex");var f="",g=c.find("._wrap_insert_katex"),h=g.find("#_previewLatex"),i=g.find("#_input_katex"),j=g.find("._btn_close"),k=g.find("#_insert_katex"),l=g.find(".tit > a");d.closeAllLayer(),g.show(),i.focus(),$('body iframe[id*="mce"]').not(".fb-like").contents().find("body").on("click",function(){d.closeAllLayer()}),a.isKatexOpened=!0;var m=function(){g.hide(),a.isKatexOpened=!1};$(document.body).on("HIDE_LAYER",function(){m()}),h.css({color:"#333"}),g.off("click"),g.on("click",function(){return i.focus(),!1});var n=function(a){if(0===a.length)return katex.render("",h.get(0)),f=h.html(),!1;try{katex.render(a,h.get(0)),f=h.html()}catch(b){katex.render("",h.get(0)),f=h.html()}};i.val(""),h.html("");var o=!1,p=$(a.selection.getNode());if(!a.selection.isCollapsed()&&p.is(".katex")){o=!0;var q=p.find(".katex-mathml").text();q&&(i.val(q),n(q))}i.off("keyup"),i.on("keyup",function(){n($(this).val())}),k.off("click"),k.on("click",function(){var b=$(f),c=i.val();c&&b.text()&&""!==$.trim(b.text())&&(b.find(".katex-mathml").html(c),b.find(":empty").html('<span style="display:none;">&nbsp;</span>'),b.attr("contentEditable","false"),o?a.insertContent(b[0].outerHTML):a.insertContent("&nbsp;"+b[0].outerHTML+"&nbsp;")),m()}),j.off("click"),j.on("click",function(){return m(),!1}),l.off("click"),l.on("click",function(){window.open("about:blank").location.href=e.DOMAIN+"/help/navigator?helpName=MATH_SYMBOL"}),b&&b.stopPropagation()}}})})}}},{"../../common/helper/util.js":17,"../../system.config.js":63}],68:[function(a,b,c){b.exports={attachPlugin:function(){tinymce.PluginManager.add("link",function(a){function b(b){return function(){var c=a.settings.link_list;"string"==typeof c?tinymce.util.XHR.send({url:c,success:function(a){b(tinymce.util.JSON.parse(a))}}):"function"==typeof c?c(b):b(c)}}function c(a,b,c){function d(a,c){return c=c||[],tinymce.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b&&b(e)),c.push(e)}),c}return d(a,c||[])}function d(b){function d(a){var b=l.find("#text");(!b.value()||a.lastControl&&b.value()==a.lastControl.text())&&b.value(a.control.text()),l.find("#href").value(a.control.value())}function e(b){var c=[];if(tinymce.each(a.dom.select("a:not([href])"),function(a){var d=a.name||a.id;d&&c.push({text:d,value:"#"+d,selected:-1!=b.indexOf("#"+d)})}),c.length)return c.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:c,onselect:d}}function f(){!k&&0===u.text.length&&m&&this.parent().parent().find("#text")[0].value(this.value())}function g(b){var c=b.meta||{};o&&o.value(a.convertURL(this.value(),"href")),tinymce.each(b.meta,function(a,b){l.find("#"+b).value(a)}),c.text||f.call(this)}function h(a){var b=v.getContent();if(/</.test(b)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(b)||-1==b.indexOf("href=")))return!1;if(a){var c,d=a.childNodes;if(0===d.length)return!1;for(c=d.length-1;c>=0;c--)if(3!=d[c].nodeType)return!1}return!0}var i,j,k,l,m,n,o,p,q,r,s,t,u={},v=a.selection,w=a.dom;i=v.getNode(),j=w.getParent(i,"a[href]"),m=h(),u.text=k=j?j.innerText||j.textContent:v.getContent({format:"text"}),u.href=j?w.getAttrib(j,"href"):"",j?u.target=w.getAttrib(j,"target"):a.settings.default_link_target&&(u.target=a.settings.default_link_target),(t=w.getAttrib(j,"rel"))&&(u.rel=t),(t=w.getAttrib(j,"class"))&&(u.class=t),(t=w.getAttrib(j,"title"))&&(u.title=t),m&&(n={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){u.text=this.value()}}),b&&(o={type:"listbox",label:"Link list",values:c(b,function(b){b.value=a.convertURL(b.value||b.url,"href")},[{text:"None",value:""}]),onselect:d,value:a.convertURL(u.href,"href"),onPostRender:function(){o=this}}),!1!==a.settings.target_list&&(a.settings.target_list||(a.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),q={name:"target",type:"listbox",label:"Target",values:c(a.settings.target_list)}),a.settings.rel_list&&(p={name:"rel",type:"listbox",label:"Rel",values:c(a.settings.rel_list)}),a.settings.link_class_list&&(r={name:"class",type:"listbox",label:"Class",values:c(a.settings.link_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:"a",classes:[b.value]})})})}),!1!==a.settings.link_title&&(s={name:"title",type:"textbox",label:"Title",value:u.title}),l=a.windowManager.open({title:"Insert link",data:u,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:g,onkeyup:f},n,s,e(u.href),o,p,q,r],onSubmit:function(b){function c(){var b={href:d,target:u.target?u.target:"_blank",rel:u.rel?u.rel:null,class:u.class?u.class:null,title:u.title?u.title:null};j?(a.focus(),m&&u.text!=k&&("innerText"in j?j.innerText=u.text:j.textContent=u.text),w.setAttribs(j,b),v.select(j),a.undoManager.add()):m?a.insertContent(w.createHTML("a",b,w.encode(u.text))):a.execCommand("mceInsertLink",!1,b)}var d;return u=tinymce.extend(u,b.data),(d=u.href)?d.indexOf("@")>0&&-1==d.indexOf("//")&&-1==d.indexOf("mailto:")?(d="mailto:"+d,void c()):!/^\w+:/i.test(d)||/^\s*www[\.|\d\.]/i.test(d)?(d="https://"+d,void c()):void c():void a.execCommand("unlink")}})}a.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:b(d),stateSelector:"a[href]"}),a.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),a.addShortcut("Meta+K","",b(d)),a.addCommand("mceLink",b(d)),this.showDialog=d,a.addMenuItem("link",{icon:"link",text:"Insert/edit link",shortcut:"Meta+K",onclick:b(d),stateSelector:"a[href]",context:"insert",prependToContext:!0})})}}},{}],69:[function(a,b,c){var d=a("../../common/helper/util.js"),e=a("../../common/service/upload.service.js"),f=a("../../system.config.js");b.exports={attachPlugin:function(){tinymce.PluginManager.add("quick_file_uploader",function(a,b){a.addButton("quick_file_uploader",{title:"",tooltip:"",icon:"file",onclick:function(b){var c=$(b.target).closest(".mce_editor").parent();d.closeAllLayer(),$('body iframe[id*="mce"]').not(".fb-like").contents().find("body").on("click",function(){d.closeAllLayer()}),$(document.body).on("HIDE_LAYER",function(){g.hide()});var g=c.find("._wrap_file_upload");g.show(),new e(g.find("._intro_file_upload"),{buttonText:$.i18n.prop("course.button.upload.file.label"),ext:f.FILEUPLOAD_ACCEPT_LIST("file"),welSpinTarget:$("<div></div>"),done:function(b,c){var d="",e="",f=null;c&&c.detail&&(d=c.detail.downloadPath,e=c.detail.filename,f=c.detail.attachmentId);var h={href:d,title:e||null,"data-attachment-id":f};a.insertContent(a.dom.createHTML("a",h,a.dom.encode(e))),g.hide()}}),g.find("._btn_close").on("click",function(){g.hide()}),b.stopPropagation()}})})}}},{"../../common/helper/util.js":17,"../../common/service/upload.service.js":24,"../../system.config.js":63}],70:[function(a,b,c){var d=a("../../common/helper/util.js"),e=a("../../common/service/upload.service.js");b.exports={attachPlugin:function(){tinymce.PluginManager.add("quick_image_uploader",function(a,b){a.addButton("quick_image_uploader",{title:"",tooltip:"",icon:"image",onclick:function(b){var c=$(b.target).closest(".mce_editor").parent();d.closeAllLayer(),$('body iframe[id*="mce"]').not(".fb-like").contents().find("body").on("click",function(){d.closeAllLayer()}),$(document.body).on("HIDE_LAYER",function(){f.hide()});var f=c.find("._wrap_image_upload");f.show(),new e(f.find("._intro_image_upload"),{buttonText:$.i18n.prop("course.button.upload.image.label"),ext:["png","jpg","jpeg","gif"],type:"image/*",maxFileSize:10485760,welSpinTarget:$("<div></div>"),done:function(b,c){var d,e="",g="";c&&(e=c.url||"",g=c.detail?c.detail.attachmentId:null,d=c.detail?c.detail.width:void 0),d&&d>a.contentWindow.innerWidth-100&&(d=a.contentWindow.innerWidth-100);var h=$("<div />"),i=$("<a />",{href:e,class:"_preview",target:"_blank"}),j=$("<img />",{src:e,title:$.i18n.prop("fileupload.you.can.select.and.resize.image.msg"),"data-attachment-id":g,width:d,style:"max-width: 100%;"});a.insertContent(h.append(i.append(j)).html()),f.hide()}}),f.find("._btn_close").on("click",function(){f.hide()}),b.stopPropagation()}})})}}},{"../../common/helper/util.js":17,"../../common/service/upload.service.js":24}],71:[function(a,b,c){var d=a("../../common/helper/util.js"),e=a("../../common/service/upload.service.js");b.exports={attachPlugin:function(){tinymce.PluginManager.add("quick_video_uploader",function(a,b){a.on("BeforeSetContent",function(a){var b=$("<div>"+a.content+"</div>");b.find("div.mce_video").not('[contentEditable="false"]').attr("contentEditable","false").length&&(a.content=b.html().toString())});var c,f=function(a){return a&&"DIV"===a.nodeName&&-1!==a.className.indexOf("mce_video")};a.on("KeyDown",function(a){return!(c&&13===a.keyCode)}),a.on("ObjectSelected",function(a){c||(c=f(a.target))}),a.on("SelectionChange",function(){c&&(!a.selection.isCollapsed()&&f(a.selection.getNode())||(c=!1))}),a.addButton("quick_video_uploader",{title:"",tooltip:"",icon:"video",onclick:function(b){var c=$(b.target).closest(".mce_editor").parent();d.closeAllLayer(),$('body iframe[id*="mce"]').not(".fb-like").contents().find("body").on("click",function(){d.closeAllLayer()}),$(document.body).on("HIDE_LAYER",function(){f.hide()});var f=c.find("._wrap_video_upload");f.show(),new e(f.find("._intro_video_upload"),{formData:{commonYn:!1,postUrl:encodeURIComponent(location.href+"#_movie_"),lectureId:0},autoUpload:!0,buttonText:$.i18n.prop("course.button.upload.image.label"),ext:["avi","wmv","vob","flv","skm","mov","mkv","asf","mpg","mpeg","k3g","mp4","rm","tp","ts"],type:"video/*",maxFileSize:21475e5,welSpinTarget:$("<div></div>"),done:function(b,c){setTimeout(function(){$(document).showLoader({mode:"fullscreen"})},400),a.selection.isCollapsed()||a.selection.collapse();var e=a.contentWindow.innerWidth-80,g=a.contentWindow.innerHeight-40,h="height:"+g+"px;",i='<div class="mce_video"><div class="upload_progress" style="'+h+'"><div class="progress_inner"><div class="check_info"><strong class="check_sjt">    .<br>  .</strong></div></div></div></div>';a.insertContent(i),a.setMode("readonly");var j=$(a.selection.getNode()).closest(".mce_video")[0],k=function(){return $.ajax({url:"/videoInfo/processStatus",timeout:3e3,retryLimit:0,type:"get",data:{postId:c.detail.postId}})},l=setInterval(function(){k().then(function(b){if(b.data.detail.attachmentId){clearInterval(l),a.setMode("design");var c=b.data.detail,g=c.image,h=c.width,i=c.height;h&&h>e&&(i*=e/h,i=Math.floor(i),h=e);var k=$("<div>",{class:"mce_video",contentEditable:"false",style:"width:"+h+"px; height:"+i+"px; max-width: 100%;"});k.append($("<img>",{src:g,"data-attachment-id":"mceVideo_"+c.postId+"_"+c.attachmentId,style:"width:"+h+"px;"})),k.append('<div class="preview_box"><div class="play_time"><span class="time" style="color: #fff !important;">'+d.changeSecondToTimeFormat(c.playTime)+'</span></div><span class="dimmed_box">&nbsp;</span></div>'),a.dom.replace(k[0],j),f.hide(),$(document).hideLoader()}})},3e3)}}),f.find("._btn_close").on("click",function(){f.hide()}),b.stopPropagation()}})})}}},{"../../common/helper/util.js":17,"../../common/service/upload.service.js":24}],72:[function(a,b,c){var d={link:a("../../modules/tinymce.plugins/link/plugin.js"),katex:a("../../modules/tinymce.plugins/katex/plugin.js"),quickImageUploader:a("../../modules/tinymce.plugins/quick_image_uploader/plugin.js"),quickFileUploader:a("../../modules/tinymce.plugins/quick_file_uploader/plugin.js"),quickVideoUploader:a("../../modules/tinymce.plugins/quick_video_uploader/plugin.js")};b.exports={loadPlugins:function(a){for(var b=0;b<a.length;b++)d[a[b]].attachPlugin()}}},{"../../modules/tinymce.plugins/katex/plugin.js":67,"../../modules/tinymce.plugins/link/plugin.js":68,"../../modules/tinymce.plugins/quick_file_uploader/plugin.js":69,"../../modules/tinymce.plugins/quick_image_uploader/plugin.js":70,"../../modules/tinymce.plugins/quick_video_uploader/plugin.js":71}],73:[function(a,b,c){SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&"unknown"==typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"==typeof a[b]&&b[0]<="Z"&&(a[b]=null)}catch(c){}}}catch(d){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if((a=this.getMovieElement())&&"unknown"==typeof a.CallFunction){for(var b in a)try{a[b]=null}catch(c){}try{a.parentNode.removeChild(a)}catch(d){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(e){return!1}}},{}]},{},["/entries/lecture/show.entry.js"]);